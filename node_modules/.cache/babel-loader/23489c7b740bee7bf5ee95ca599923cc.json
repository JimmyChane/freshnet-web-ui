{"remainingRequest":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-v2\\vue\\src\\items\\Image.js","dependencies":[{"path":"C:\\dev\\freshnet-v2\\vue\\src\\items\\Image.js","mtime":1666245771725},{"path":"C:\\dev\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOlxcZGV2XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQzpcXGRldlxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgQXBpSG9zdCBmcm9tICJAL2hvc3QvQXBpSG9zdC5qcyI7CmltcG9ydCBNb2R1bGVJbWFnZSBmcm9tICJALy4uLy4uL2V4cHJlc3MvZGF0YV9zdHJ1Y3R1cmVzL0ltYWdlLmpzIjsKCnZhciBnZXRDb2xvcnMgPSByZXF1aXJlKCJnZXQtaW1hZ2UtY29sb3JzIik7IC8vIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2dldC1pbWFnZS1jb2xvcnMKCgp2YXIgSW1hZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEltYWdlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEltYWdlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1ldGhvZCIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJwYXRoIiwgdm9pZCAwKTsKICB9CgogIF9jcmVhdGVDbGFzcyhJbWFnZSwgW3sKICAgIGtleTogImZyb21EYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmcm9tRGF0YShkYXRhKSB7CiAgICAgIGRhdGEgPSBuZXcgTW9kdWxlSW1hZ2UoZGF0YSk7CiAgICAgIHRoaXMubWV0aG9kID0gZGF0YS5tZXRob2Q7CiAgICAgIHRoaXMucGF0aCA9IGRhdGEucGF0aDsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAidG9EYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b0RhdGEoKSB7CiAgICAgIHJldHVybiBuZXcgTW9kdWxlSW1hZ2UoewogICAgICAgIG1ldGhvZDogdGhpcy5tZXRob2QsCiAgICAgICAgcGF0aDogdGhpcy5wYXRoCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInRvQ291bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRvQ291bnQoc3RycykgewogICAgICByZXR1cm4gMDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0b1VybCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9VcmwoKSB7CiAgICAgIHZhciBvcHRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHsKICAgICAgICB3aWR0aDogMCwKICAgICAgICBoZWlnaHQ6IDAKICAgICAgfTsKICAgICAgdmFyIF9vcHRpb24kd2lkdGggPSBvcHRpb24ud2lkdGgsCiAgICAgICAgICB3aWR0aCA9IF9vcHRpb24kd2lkdGggPT09IHZvaWQgMCA/IDAgOiBfb3B0aW9uJHdpZHRoLAogICAgICAgICAgX29wdGlvbiRoZWlnaHQgPSBvcHRpb24uaGVpZ2h0LAogICAgICAgICAgaGVpZ2h0ID0gX29wdGlvbiRoZWlnaHQgPT09IHZvaWQgMCA/IDAgOiBfb3B0aW9uJGhlaWdodDsKICAgICAgdmFyIG1ldGhvZCA9IHRoaXMubWV0aG9kOwogICAgICB2YXIgcGF0aCA9IHRoaXMucGF0aDsKCiAgICAgIGlmIChtZXRob2QgJiYgcGF0aCkgewogICAgICAgIGlmIChtZXRob2QgPT09IEltYWdlLk1ldGhvZC5Mb2NhbCkgcmV0dXJuICIiLmNvbmNhdChBcGlIb3N0Lm9yaWdpbiwgIi8iKS5jb25jYXQocGF0aCk7CiAgICAgICAgaWYgKG1ldGhvZCA9PT0gSW1hZ2UuTWV0aG9kLkxpbmspIHJldHVybiBwYXRoOwoKICAgICAgICBpZiAobWV0aG9kID09PSBJbWFnZS5NZXRob2QuU3RvcmFnZUltYWdlKSB7CiAgICAgICAgICB2YXIgcHJlZml4ID0gIi9hcGkvaW1hZ2UvbmFtZS8iOwogICAgICAgICAgdmFyIG5hbWUgPSBwYXRoLnN1YnN0cmluZyhwcmVmaXgubGVuZ3RoLCBwYXRoLmxlbmd0aCk7CiAgICAgICAgICByZXR1cm4gQXBpSG9zdC5pbWdGaWxlLm5hbWUobmFtZSwgewogICAgICAgICAgICB3aWR0aDogd2lkdGgsCiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiAiIjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmZXRjaENvbG9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZmV0Y2hDb2xvciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcGFsZXR0ZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q29sb3JzKHRoaXMudG9VcmwoewogICAgICAgICAgICAgICAgICB3aWR0aDogMjAKICAgICAgICAgICAgICAgIH0pLCB7CiAgICAgICAgICAgICAgICAgIGNvdW50OiAxCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcGFsZXR0ZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcGFsZXR0ZXNbMF0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZmV0Y2hDb2xvcigpIHsKICAgICAgICByZXR1cm4gX2ZldGNoQ29sb3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZldGNoQ29sb3I7CiAgICB9KCkKICB9XSk7CgogIHJldHVybiBJbWFnZTsKfSgpOwoKX2RlZmluZVByb3BlcnR5KEltYWdlLCAiTWV0aG9kIiwgTW9kdWxlSW1hZ2UuTWV0aG9kKTsKCmV4cG9ydCBkZWZhdWx0IEltYWdlOw=="},{"version":3,"sources":["C:/dev/freshnet-v2/vue/src/items/Image.js"],"names":["ApiHost","ModuleImage","getColors","require","Image","data","method","path","strs","option","width","height","Method","Local","origin","Link","StorageImage","prefix","name","substring","length","imgFile","toUrl","count","palettes"],"mappings":";;;;;;;AAAA,OAAOA,OAAP,MAAoB,mBAApB;AACA,OAAOC,WAAP,MAAwB,0CAAxB;;AAEA,IAAMC,SAAS,GAAGC,OAAO,CAAC,kBAAD,CAAzB,C,CAA+C;;;IAEzCC,K;;;;;;;;;;;WAML,kBAASC,IAAT,EAAe;AACdA,MAAAA,IAAI,GAAG,IAAIJ,WAAJ,CAAgBI,IAAhB,CAAP;AACA,WAAKC,MAAL,GAAcD,IAAI,CAACC,MAAnB;AACA,WAAKC,IAAL,GAAYF,IAAI,CAACE,IAAjB;AACA,aAAO,IAAP;AACA;;;WACD,kBAAS;AACR,aAAO,IAAIN,WAAJ,CAAgB;AACtBK,QAAAA,MAAM,EAAE,KAAKA,MADS;AAEtBC,QAAAA,IAAI,EAAE,KAAKA;AAFW,OAAhB,CAAP;AAIA;;;WACD,iBAAQC,IAAR,EAAc;AACb,aAAO,CAAP;AACA;;;WACD,iBAAwC;AAAA,UAAlCC,MAAkC,uEAAzB;AAAEC,QAAAA,KAAK,EAAE,CAAT;AAAYC,QAAAA,MAAM,EAAE;AAApB,OAAyB;AACvC,0BAAgCF,MAAhC,CAAMC,KAAN;AAAA,UAAMA,KAAN,8BAAc,CAAd;AAAA,2BAAgCD,MAAhC,CAAiBE,MAAjB;AAAA,UAAiBA,MAAjB,+BAA0B,CAA1B;AACA,UAAIL,MAAM,GAAG,KAAKA,MAAlB;AACA,UAAIC,IAAI,GAAG,KAAKA,IAAhB;;AAEA,UAAID,MAAM,IAAIC,IAAd,EAAoB;AACnB,YAAID,MAAM,KAAKF,KAAK,CAACQ,MAAN,CAAaC,KAA5B,EAAmC,iBAAUb,OAAO,CAACc,MAAlB,cAA4BP,IAA5B;AACnC,YAAID,MAAM,KAAKF,KAAK,CAACQ,MAAN,CAAaG,IAA5B,EAAkC,OAAOR,IAAP;;AAClC,YAAID,MAAM,KAAKF,KAAK,CAACQ,MAAN,CAAaI,YAA5B,EAA0C;AACzC,cAAMC,MAAM,GAAG,kBAAf;AACA,cAAMC,IAAI,GAAGX,IAAI,CAACY,SAAL,CAAeF,MAAM,CAACG,MAAtB,EAA8Bb,IAAI,CAACa,MAAnC,CAAb;AACA,iBAAOpB,OAAO,CAACqB,OAAR,CAAgBH,IAAhB,CAAqBA,IAArB,EAA2B;AAAER,YAAAA,KAAK,EAALA,KAAF;AAASC,YAAAA,MAAM,EAANA;AAAT,WAA3B,CAAP;AACA;AACD;;AACD,aAAO,EAAP;AACA;;;;gFAED;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACwBT,SAAS,CAAC,KAAKoB,KAAL,CAAW;AAAEZ,kBAAAA,KAAK,EAAE;AAAT,iBAAX,CAAD,EAA4B;AAAEa,kBAAAA,KAAK,EAAE;AAAT,iBAA5B,CADjC;;AAAA;AACOC,gBAAAA,QADP;AAAA,iDAEQA,QAAQ,CAAC,CAAD,CAFhB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;;;gBAtCKpB,K,YACWH,WAAW,CAACW,M;;AA2C7B,eAAeR,KAAf","sourcesContent":["import ApiHost from \"@/host/ApiHost.js\";\r\nimport ModuleImage from \"@/../../express/data_structures/Image.js\";\r\n\r\nconst getColors = require(\"get-image-colors\"); // https://www.npmjs.com/package/get-image-colors\r\n\r\nclass Image {\r\n\tstatic Method = ModuleImage.Method;\r\n\r\n\tmethod;\r\n\tpath;\r\n\r\n\tfromData(data) {\r\n\t\tdata = new ModuleImage(data);\r\n\t\tthis.method = data.method;\r\n\t\tthis.path = data.path;\r\n\t\treturn this;\r\n\t}\r\n\ttoData() {\r\n\t\treturn new ModuleImage({\r\n\t\t\tmethod: this.method,\r\n\t\t\tpath: this.path,\r\n\t\t});\r\n\t}\r\n\ttoCount(strs) {\r\n\t\treturn 0;\r\n\t}\r\n\ttoUrl(option = { width: 0, height: 0 }) {\r\n\t\tlet { width = 0, height = 0 } = option;\r\n\t\tlet method = this.method;\r\n\t\tlet path = this.path;\r\n\r\n\t\tif (method && path) {\r\n\t\t\tif (method === Image.Method.Local) return `${ApiHost.origin}/${path}`;\r\n\t\t\tif (method === Image.Method.Link) return path;\r\n\t\t\tif (method === Image.Method.StorageImage) {\r\n\t\t\t\tconst prefix = \"/api/image/name/\";\r\n\t\t\t\tconst name = path.substring(prefix.length, path.length);\r\n\t\t\t\treturn ApiHost.imgFile.name(name, { width, height });\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tasync fetchColor() {\r\n\t\tconst palettes = await getColors(this.toUrl({ width: 20 }), { count: 1 });\r\n\t\treturn palettes[0];\r\n\t}\r\n}\r\n\r\nexport default Image;\r\n"]}]}