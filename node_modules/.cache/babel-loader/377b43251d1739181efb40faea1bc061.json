{"remainingRequest":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-v2\\vue\\src\\stores\\components\\DataLoader.js","dependencies":[{"path":"C:\\dev\\freshnet-v2\\vue\\src\\stores\\components\\DataLoader.js","mtime":1666019912109},{"path":"C:\\dev\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOlxcZGV2XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQzpcXGRldlxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgVmFsaWRhdGlvbkNoZWNrZXIgZnJvbSAiLi9WYWxpZGF0aW9uQ2hlY2tlciI7Cgp2YXIgRGF0YUxvYWRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRGF0YUxvYWRlcigpIHsKICAgIHZhciBhcmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHsKICAgICAgdGltZW91dDogMTAwMCAqIDYwICogMTAKICAgIH07CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERhdGFMb2FkZXIpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiJHZhbGlkYXRvciIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICIkZ2V0UHJvY2Vzc29yIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIiRsb2FkRGF0YSIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICIkc2V0RGF0YSIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICIkZ2V0RGF0YSIsIHZvaWQgMCk7CgogICAgdGhpcy4kdmFsaWRhdG9yID0gbmV3IFZhbGlkYXRpb25DaGVja2VyKHsKICAgICAgdGltZW91dDogYXJnLnRpbWVvdXQKICAgIH0pOwogIH0KCiAgX2NyZWF0ZUNsYXNzKERhdGFMb2FkZXIsIFt7CiAgICBrZXk6ICJwcm9jZXNzb3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByb2Nlc3NvcihjYWxsYmFjaykgewogICAgICB0aGlzLiRnZXRQcm9jZXNzb3IgPSBjYWxsYmFjazsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9hZERhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWREYXRhKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuJGxvYWREYXRhID0gY2FsbGJhY2s7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogInNldERhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldERhdGEoY2FsbGJhY2spIHsKICAgICAgdGhpcy4kc2V0RGF0YSA9IGNhbGxiYWNrOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXREYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREYXRhKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuJGdldERhdGEgPSBjYWxsYmFjazsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAiZG9UaW1lb3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkb1RpbWVvdXQoKSB7CiAgICAgIHRoaXMuJHZhbGlkYXRvci5yZXNldENoZWNrcG9pbnQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc1RpbWVvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzVGltZW91dCgpIHsKICAgICAgcmV0dXJuICF0aGlzLiR2YWxpZGF0b3IuaXNWYWxpZCgpOwogICAgfQogIH0sIHsKICAgIGtleTogImRhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICAgIHZhciB2YWxpZGF0b3IgPSB0aGlzLiR2YWxpZGF0b3I7CiAgICAgIHZhciBwcm9jZXNzb3IgPSB0aGlzLiRnZXRQcm9jZXNzb3IoKTsKICAgICAgdmFyIGdldERhdGEgPSB0aGlzLiRnZXREYXRhOwogICAgICB2YXIgc2V0RGF0YSA9IHRoaXMuJHNldERhdGE7CiAgICAgIHZhciBsb2FkRGF0YSA9IHRoaXMuJGxvYWREYXRhOwogICAgICByZXR1cm4gcHJvY2Vzc29yLmFjcXVpcmUoIkRhdGFMb2FkZXIiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwoKICAgICAgICAgICAgICAgIGlmICghdmFsaWRhdG9yLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZ2V0RGF0YSgpKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICB2YWxpZGF0b3IucmVzZXRDaGVja3BvaW50KCk7CiAgICAgICAgICAgICAgICAgIHNldERhdGEobnVsbCk7CiAgICAgICAgICAgICAgICAgIGxvYWREYXRhKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGRhdGEpOwogICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBzZXREYXRhKGRhdGEpOwogICAgICAgICAgICAgICAgdmFsaWRhdG9yLm1ha2VDaGVja3BvaW50KCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBnZXREYXRhKCkpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHZhbGlkYXRvci5yZXNldENoZWNrcG9pbnQoKTsKICAgICAgICAgICAgICAgIHNldERhdGEobnVsbCk7CiAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dC50MDsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTFdXSk7CiAgICAgIH0pKSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRGF0YUxvYWRlcjsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgRGF0YUxvYWRlcjs="},{"version":3,"sources":["C:/dev/freshnet-v2/vue/src/stores/components/DataLoader.js"],"names":["ValidationChecker","DataLoader","arg","timeout","$validator","callback","$getProcessor","$loadData","$setData","$getData","resetCheckpoint","isValid","validator","processor","getData","setData","loadData","acquire","Promise","resolve","reject","then","data","catch","error","makeCheckpoint"],"mappings":";;;;;;AAAA,OAAOA,iBAAP,MAA8B,qBAA9B;;IAEMC,U;AASL,wBAA+C;AAAA,QAAnCC,GAAmC,uEAA7B;AAAEC,MAAAA,OAAO,EAAE,OAAO,EAAP,GAAY;AAAvB,KAA6B;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAC9C,SAAKC,UAAL,GAAkB,IAAIJ,iBAAJ,CAAsB;AAAEG,MAAAA,OAAO,EAAED,GAAG,CAACC;AAAf,KAAtB,CAAlB;AACA;;;;WAED,mBAAUE,QAAV,EAAoB;AACnB,WAAKC,aAAL,GAAqBD,QAArB;AACA,aAAO,IAAP;AACA;;;WAED,kBAASA,QAAT,EAAmB;AAClB,WAAKE,SAAL,GAAiBF,QAAjB;AACA,aAAO,IAAP;AACA;;;WACD,iBAAQA,QAAR,EAAkB;AACjB,WAAKG,QAAL,GAAgBH,QAAhB;AACA,aAAO,IAAP;AACA;;;WACD,iBAAQA,QAAR,EAAkB;AACjB,WAAKI,QAAL,GAAgBJ,QAAhB;AACA,aAAO,IAAP;AACA;;;WAED,qBAAY;AACX,WAAKD,UAAL,CAAgBM,eAAhB;AACA;;;WACD,qBAAY;AACX,aAAO,CAAC,KAAKN,UAAL,CAAgBO,OAAhB,EAAR;AACA;;;WAED,gBAAO;AACN,UAAMC,SAAS,GAAG,KAAKR,UAAvB;AAEA,UAAMS,SAAS,GAAG,KAAKP,aAAL,EAAlB;AAEA,UAAMQ,OAAO,GAAG,KAAKL,QAArB;AACA,UAAMM,OAAO,GAAG,KAAKP,QAArB;AACA,UAAMQ,QAAQ,GAAG,KAAKT,SAAtB;AAEA,aAAOM,SAAS,CAACI,OAAV,CAAkB,YAAlB,uEAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,qBAEjCL,SAAS,CAACD,OAAV,EAFiC;AAAA;AAAA;AAAA;;AAAA,iDAELG,OAAO,EAFF;;AAAA;AAAA;AAAA,uBAIlB,IAAII,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACnDR,kBAAAA,SAAS,CAACF,eAAV;AACAK,kBAAAA,OAAO,CAAC,IAAD,CAAP;AACAC,kBAAAA,QAAQ,GACNK,IADF,CACO,UAACC,IAAD;AAAA,2BAAUH,OAAO,CAACG,IAAD,CAAjB;AAAA,mBADP,EAEEC,KAFF,CAEQ,UAACC,KAAD;AAAA,2BAAWJ,MAAM,CAACI,KAAD,CAAjB;AAAA,mBAFR;AAGA,iBANkB,CAJkB;;AAAA;AAI/BF,gBAAAA,IAJ+B;AAYrCP,gBAAAA,OAAO,CAACO,IAAD,CAAP;AACAV,gBAAAA,SAAS,CAACa,cAAV;AAbqC,iDAc9BX,OAAO,EAduB;;AAAA;AAAA;AAAA;AAgBrCF,gBAAAA,SAAS,CAACF,eAAV;AACAK,gBAAAA,OAAO,CAAC,IAAD,CAAP;AAjBqC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAhC,GAAP;AAqBA;;;;;;AAGF,eAAed,UAAf","sourcesContent":["import ValidationChecker from \"./ValidationChecker\";\r\n\r\nclass DataLoader {\r\n\t$validator;\r\n\r\n\t$getProcessor;\r\n\r\n\t$loadData;\r\n\t$setData;\r\n\t$getData;\r\n\r\n\tconstructor(arg = { timeout: 1000 * 60 * 10 }) {\r\n\t\tthis.$validator = new ValidationChecker({ timeout: arg.timeout });\r\n\t}\r\n\r\n\tprocessor(callback) {\r\n\t\tthis.$getProcessor = callback;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tloadData(callback) {\r\n\t\tthis.$loadData = callback;\r\n\t\treturn this;\r\n\t}\r\n\tsetData(callback) {\r\n\t\tthis.$setData = callback;\r\n\t\treturn this;\r\n\t}\r\n\tgetData(callback) {\r\n\t\tthis.$getData = callback;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tdoTimeout() {\r\n\t\tthis.$validator.resetCheckpoint();\r\n\t}\r\n\tisTimeout() {\r\n\t\treturn !this.$validator.isValid();\r\n\t}\r\n\r\n\tdata() {\r\n\t\tconst validator = this.$validator;\r\n\r\n\t\tconst processor = this.$getProcessor();\r\n\r\n\t\tconst getData = this.$getData;\r\n\t\tconst setData = this.$setData;\r\n\t\tconst loadData = this.$loadData;\r\n\r\n\t\treturn processor.acquire(\"DataLoader\", async () => {\r\n\t\t\ttry {\r\n\t\t\t\tif (validator.isValid()) return getData();\r\n\r\n\t\t\t\tconst data = await new Promise((resolve, reject) => {\r\n\t\t\t\t\tvalidator.resetCheckpoint();\r\n\t\t\t\t\tsetData(null);\r\n\t\t\t\t\tloadData()\r\n\t\t\t\t\t\t.then((data) => resolve(data))\r\n\t\t\t\t\t\t.catch((error) => reject(error));\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsetData(data);\r\n\t\t\t\tvalidator.makeCheckpoint();\r\n\t\t\t\treturn getData();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tvalidator.resetCheckpoint();\r\n\t\t\t\tsetData(null);\r\n\t\t\t\tthrow error;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport default DataLoader;\r\n"]}]}