{"remainingRequest":"C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\development\\freshnet-v2\\vue\\src\\stores\\store.login.js","dependencies":[{"path":"C:\\development\\freshnet-v2\\vue\\src\\stores\\store.login.js","mtime":1663504444445},{"path":"C:\\development\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgVnVleCBmcm9tICJ2dWV4IjsKaW1wb3J0IEFwaUhvc3QgZnJvbSAiQC9ob3N0L0FwaUhvc3QuanMiOwppbXBvcnQgSXRlbVVzZXIgZnJvbSAiLi4vaXRlbXMvVXNlci5qcyI7CmltcG9ydCBQcm9jZXNzb3IgZnJvbSAiLi9jb21wb25lbnRzL1Byb2Nlc3Nvci5qcyI7CnZhciBzdG9yYWdlVG9rZW5LZXkgPSAidXNlclRva2VuIjsKCnZhciBnZXRUb2tlbiA9IGZ1bmN0aW9uIGdldFRva2VuKCkgewogIHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oc3RvcmFnZVRva2VuS2V5KTsKfTsKCnZhciBzZXRUb2tlbiA9IGZ1bmN0aW9uIHNldFRva2VuKHRva2VuKSB7CiAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShzdG9yYWdlVG9rZW5LZXksIHRva2VuKTsKfTsKCnZhciBkZWxldGVUb2tlbiA9IGZ1bmN0aW9uIGRlbGV0ZVRva2VuKCkgewogIHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oc3RvcmFnZVRva2VuS2V5KTsKfTsKCnZhciBvbk5ld0NyZWRlbnRhaWwgPSBmdW5jdGlvbiBvbk5ld0NyZWRlbnRhaWwoY29udGV4dCkgewogIHZhciBhcmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHsKICAgIHRva2VuOiB0b2tlbiwKICAgIHVzZXI6IHVzZXIKICB9OwogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdG9rZW4gPSBhcmcudG9rZW4sCiAgICAgICAgdXNlciA9IGFyZy51c2VyOwogICAgdmFyIG5ld1VzZXIgPSBuZXcgSXRlbVVzZXIodXNlcik7CiAgICBzZXRUb2tlbih0b2tlbik7CiAgICBjb250ZXh0LmNvbW1pdCgidXNlciIsIG5ld1VzZXIpOwogICAgcmV0dXJuIG5ld1VzZXI7CiAgfSgpOwp9OwoKZXhwb3J0IGRlZmF1bHQgewogIGluaXQ6IGZ1bmN0aW9uIGluaXQoU3RvcmVzKSB7CiAgICB2YXIgc3RvcmUgPSBTdG9yZXMuc3RvcmU7CiAgICB2YXIgbG9naW5TdG9yZSA9IG5ldyBWdWV4LlN0b3JlKHsKICAgICAgc3RhdGU6IHsKICAgICAgICB1c2VyOiBudWxsLAogICAgICAgIGxvYWRlcjogbmV3IFByb2Nlc3NvcigpCiAgICAgIH0sCiAgICAgIG11dGF0aW9uczogewogICAgICAgIHVzZXI6IGZ1bmN0aW9uIChfdXNlcikgewogICAgICAgICAgZnVuY3Rpb24gdXNlcihfeCwgX3gyKSB7CiAgICAgICAgICAgIHJldHVybiBfdXNlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfQoKICAgICAgICAgIHVzZXIudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBfdXNlci50b1N0cmluZygpOwogICAgICAgICAgfTsKCiAgICAgICAgICByZXR1cm4gdXNlcjsKICAgICAgICB9KGZ1bmN0aW9uIChzdGF0ZSwgdXNlcikgewogICAgICAgICAgcmV0dXJuIHN0YXRlLnVzZXIgPSB1c2VyOwogICAgICAgIH0pCiAgICAgIH0sCiAgICAgIGdldHRlcnM6IHsKICAgICAgICBpc0xvYWRpbmc6IGZ1bmN0aW9uIGlzTG9hZGluZyhzdGF0ZSkgewogICAgICAgICAgcmV0dXJuIHN0YXRlLmxvYWRlci5pc0xvYWRpbmcoKTsKICAgICAgICB9LAogICAgICAgIHVzZXI6IGZ1bmN0aW9uIHVzZXIoc3RhdGUpIHsKICAgICAgICAgIHJldHVybiBzdGF0ZS51c2VyOwogICAgICAgIH0sCiAgICAgICAgdG9rZW46IGZ1bmN0aW9uIHRva2VuKCkgewogICAgICAgICAgcmV0dXJuIGdldFRva2VuKCk7CiAgICAgICAgfQogICAgICB9LAogICAgICBhY3Rpb25zOiB7CiAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaChjb250ZXh0KSB7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5sb2FkZXIuYWNxdWlyZSgicmVmcmVzaCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiZ2V0VXNlciIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgZ2V0VXNlcjogZnVuY3Rpb24gZ2V0VXNlcihjb250ZXh0KSB7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5sb2FkZXIuYWNxdWlyZSgiZ2V0VXNlciIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIF90b2tlbiwgYXBpLCBjb250ZW50LCBfdXNlcjI7CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdG9rZW4gPSBnZXRUb2tlbigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90b2tlbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoInVzZXIiLCBudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlVG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIG51bGwpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuUE9TVCgpLnVybCgic2Vzc2lvbi92ZXJpZnlUb2tlbi8iKS5ib2R5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogX3Rva2VuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYXBpLmdldENvbnRlbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3VzZXIyID0gbmV3IEl0ZW1Vc2VyKGNvbnRlbnQudXNlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRva2VuKF90b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJ1c2VyIiwgX3VzZXIyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIF91c2VyMik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgidXNlciIsIG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVUb2tlbigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2NvbnRleHQzLnQwLm1lc3NhZ2UgPT09ICJub3Qgc2lnbmVkIGluIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgbnVsbCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQzLnQwOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzAsIDE2XV0pOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICBjaGFuZ2VQYXNzd29yZDogZnVuY3Rpb24gY2hhbmdlUGFzc3dvcmQoY29udGV4dCkgewogICAgICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBhcmcgPSBfYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50c1sxXSA6IHt9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLmxvYWRlci5hY3F1aXJlKCJjaGFuZ2VQYXNzd29yZCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIsIHVzZXJuYW1lLCBwYXNzd29yZFZlcmlmeSwgcGFzc3dvcmROZXcsIGFwaSwgY29udGVudCwgdG9rZW47CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyID0gY29udGV4dC5nZXR0ZXJzLnVzZXI7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISghdXNlciB8fCAhdXNlci5nZXRVc2VybmFtZSgpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJjYW5ub3QgZmluZCB1c2VybmFtZSB3aXRoIGN1cnJlbnQgdXNlciIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWUgPSB1c2VyLmdldFVzZXJuYW1lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkVmVyaWZ5ID0gYXJnLnBhc3N3b3JkVmVyaWZ5LCBwYXNzd29yZE5ldyA9IGFyZy5wYXNzd29yZE5ldzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuUE9TVCgpLnVybCgic2Vzc2lvbi91c2VyLyIuY29uY2F0KHVzZXJuYW1lLCAiL2NoYW5nZVBhc3N3b3JkIikpLmJvZHkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkVmVyaWZ5OiBwYXNzd29yZFZlcmlmeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZE5ldzogcGFzc3dvcmROZXcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc2VuZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGkuZ2V0Q29udGVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IGNvbnRlbnQudG9rZW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXIgPSBjb250ZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyID0gb25OZXdDcmVkZW50YWlsKGNvbnRleHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogdXNlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInJlc3RhcnRTb2NrZXQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHVzZXIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzMiA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgICAgICB2YXIgYXJnOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGFyZyA9IF9hcmd1bWVudHMyLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czJbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHMyWzFdIDogewogICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5sb2FkZXIuYWNxdWlyZSgibG9naW4iLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBhcGksIGVycm9yLCBjb250ZW50LCBfdG9rZW4yLCBfdXNlcjMsIG5ld1VzZXI7CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3LnByZXYgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVUb2tlbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5QT1NUKCkudXJsKCJzZXNzaW9uL2xvZ2luLyIpLmJvZHkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBhcmcudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGFyZy5wYXNzd29yZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBhcGkuZ2V0RXJyb3IoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaS5nZXRDb250ZW50KCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShlcnJvciB8fCAhY29udGVudCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Rva2VuMiA9IGNvbnRlbnQudG9rZW4sIF91c2VyMyA9IGNvbnRlbnQudXNlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VXNlciA9IG9uTmV3Q3JlZGVudGFpbChjb250ZXh0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IF90b2tlbjIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogX3VzZXIzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgicmVzdGFydFNvY2tldCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgbmV3VXNlcik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3LnByZXYgPSAxNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3LnQwID0gX2NvbnRleHQ3WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVUb2tlbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgidXNlciIsIG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDcudDA7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTcsIG51bGwsIFtbMCwgMTVdXSk7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KGNvbnRleHQpIHsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMCgpIHsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLmxvYWRlci5hY3F1aXJlKCJsb2dvdXQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBfdXNlcjQ7CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5LnByZXYgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVUb2tlbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgicmVzdGFydFNvY2tldCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdXNlcjQgPSBjb250ZXh0LmdldHRlcnMudXNlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoInVzZXIiLCBudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIF91c2VyNCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDkucHJldiA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS50MCA9IF9jb250ZXh0OVsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlVG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoInVzZXIiLCBudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQ5LnQwOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU5LCBudWxsLCBbWzAsIDhdXSk7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTEwKTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbG9naW5TdG9yZTsKICB9Cn07"},{"version":3,"sources":["C:/development/freshnet-v2/vue/src/stores/store.login.js"],"names":["Vuex","ApiHost","ItemUser","Processor","storageTokenKey","getToken","window","localStorage","getItem","setToken","token","setItem","deleteToken","removeItem","onNewCredentail","context","arg","user","newUser","commit","init","Stores","store","loginStore","Store","state","loader","mutations","getters","isLoading","actions","refresh","acquire","dispatch","getUser","request","POST","url","body","send","api","content","getContent","message","changePassword","getUsername","Error","username","passwordVerify","passwordNew","login","password","error","getError","logout"],"mappings":"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","sourcesContent":["import Vuex from \"vuex\";\r\nimport ApiHost from \"@/host/ApiHost.js\";\r\nimport ItemUser from \"../items/User.js\";\r\nimport Processor from \"./components/Processor.js\";\r\n\r\nconst storageTokenKey = \"userToken\";\r\nconst getToken = () => window.localStorage.getItem(storageTokenKey);\r\nconst setToken = (token) => window.localStorage.setItem(storageTokenKey, token);\r\nconst deleteToken = () => window.localStorage.removeItem(storageTokenKey);\r\nconst onNewCredentail = (context, arg = { token, user }) => {\r\n   const { token, user } = arg;\r\n   const newUser = new ItemUser(user);\r\n   setToken(token);\r\n   context.commit(\"user\", newUser);\r\n   return newUser;\r\n};\r\n\r\nexport default {\r\n   init(Stores) {\r\n      const { store } = Stores;\r\n\r\n      const loginStore = new Vuex.Store({\r\n         state: { user: null, loader: new Processor() },\r\n         mutations: { user: (state, user) => (state.user = user) },\r\n         getters: {\r\n            isLoading: (state) => state.loader.isLoading(),\r\n            user: (state) => state.user,\r\n            token: () => getToken(),\r\n         },\r\n         actions: {\r\n            async refresh(context) {\r\n               return context.state.loader.acquire(\"refresh\", async () => {\r\n                  await context.dispatch(\"getUser\");\r\n               });\r\n            },\r\n\r\n            async getUser(context) {\r\n               return context.state.loader.acquire(\"getUser\", async () => {\r\n                  try {\r\n                     let token = getToken();\r\n                     if (!token) {\r\n                        context.commit(\"user\", null);\r\n                        deleteToken();\r\n                        return null;\r\n                     }\r\n\r\n                     let api = await ApiHost.request()\r\n                        .POST()\r\n                        .url(\"session/verifyToken/\")\r\n                        .body({ token })\r\n                        .send();\r\n\r\n                     let content = api.getContent();\r\n                     let user = new ItemUser(content.user);\r\n\r\n                     setToken(token);\r\n                     context.commit(\"user\", user);\r\n\r\n                     return user;\r\n                  } catch (error) {\r\n                     context.commit(\"user\", null);\r\n                     deleteToken();\r\n                     if (error.message === \"not signed in\") return null;\r\n                     throw error;\r\n                  }\r\n               });\r\n            },\r\n            async changePassword(context, arg = {}) {\r\n               return context.state.loader.acquire(\"changePassword\", async () => {\r\n                  let { user } = context.getters;\r\n                  if (!user || !user.getUsername()) {\r\n                     throw new Error(\"cannot find username with current user\");\r\n                  }\r\n                  let username = user.getUsername();\r\n                  let { passwordVerify, passwordNew } = arg;\r\n                  let api = await ApiHost.request()\r\n                     .POST()\r\n                     .url(`session/user/${username}/changePassword`)\r\n                     .body({ passwordVerify, passwordNew })\r\n                     .send();\r\n                  let content = api.getContent();\r\n                  let { token } = content;\r\n                  user = content;\r\n                  user = onNewCredentail(context, { token, user });\r\n                  store.dispatch(\"restartSocket\");\r\n\r\n                  return user;\r\n               });\r\n            },\r\n\r\n            async login(context, arg = { username, password }) {\r\n               return context.state.loader.acquire(\"login\", async () => {\r\n                  try {\r\n                     deleteToken();\r\n                     let api = await ApiHost.request()\r\n                        .POST()\r\n                        .url(\"session/login/\")\r\n                        .body({ username: arg.username, password: arg.password })\r\n                        .send();\r\n                     let error = api.getError();\r\n                     let content = api.getContent();\r\n                     if (error || !content) throw new Error();\r\n                     const { token, user } = content;\r\n                     const newUser = onNewCredentail(context, { token, user });\r\n                     store.dispatch(\"restartSocket\");\r\n                     return newUser;\r\n                  } catch (error) {\r\n                     deleteToken();\r\n                     context.commit(\"user\", null);\r\n                     throw error;\r\n                  }\r\n               });\r\n            },\r\n            async logout(context) {\r\n               return context.state.loader.acquire(\"logout\", async () => {\r\n                  try {\r\n                     deleteToken();\r\n                     store.dispatch(\"restartSocket\");\r\n                     let user = context.getters.user;\r\n                     context.commit(\"user\", null);\r\n                     return user;\r\n                  } catch (error) {\r\n                     deleteToken();\r\n                     context.commit(\"user\", null);\r\n                     throw error;\r\n                  }\r\n               });\r\n            },\r\n         },\r\n      });\r\n\r\n      return loginStore;\r\n   },\r\n};\r\n"]}]}