{"remainingRequest":"C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\development\\freshnet-v2\\vue\\src\\stores\\components\\DataLoader.js","dependencies":[{"path":"C:\\development\\freshnet-v2\\vue\\src\\stores\\components\\DataLoader.js","mtime":1663428488520},{"path":"C:\\development\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxkZWZpbmVQcm9wZXJ0eS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBWYWxpZGF0aW9uQ2hlY2tlciBmcm9tICIuL1ZhbGlkYXRpb25DaGVja2VyIjsKCnZhciBEYXRhTG9hZGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBEYXRhTG9hZGVyKCkgewogICAgdmFyIGFyZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogewogICAgICB0aW1lb3V0OiAxMDAwICogNjAgKiAxMAogICAgfTsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGF0YUxvYWRlcik7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICIkdmFsaWRhdG9yIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIiRnZXRQcm9jZXNzb3IiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiJGxvYWREYXRhIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIiRzZXREYXRhIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIiRnZXREYXRhIiwgdm9pZCAwKTsKCiAgICB0aGlzLiR2YWxpZGF0b3IgPSBuZXcgVmFsaWRhdGlvbkNoZWNrZXIoewogICAgICB0aW1lb3V0OiBhcmcudGltZW91dAogICAgfSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoRGF0YUxvYWRlciwgW3sKICAgIGtleTogInByb2Nlc3NvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc29yKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuJGdldFByb2Nlc3NvciA9IGNhbGxiYWNrOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsb2FkRGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZERhdGEoY2FsbGJhY2spIHsKICAgICAgdGhpcy4kbG9hZERhdGEgPSBjYWxsYmFjazsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0RGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGF0YShjYWxsYmFjaykgewogICAgICB0aGlzLiRzZXREYXRhID0gY2FsbGJhY2s7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogImdldERhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERhdGEoY2FsbGJhY2spIHsKICAgICAgdGhpcy4kZ2V0RGF0YSA9IGNhbGxiYWNrOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkb1RpbWVvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRvVGltZW91dCgpIHsKICAgICAgdGhpcy4kdmFsaWRhdG9yLnJlc2V0Q2hlY2twb2ludCgpOwogICAgfQogIH0sIHsKICAgIGtleTogImlzVGltZW91dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNUaW1lb3V0KCkgewogICAgICByZXR1cm4gIXRoaXMuJHZhbGlkYXRvci5pc1ZhbGlkKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGF0YSgpIHsKICAgICAgdmFyIHZhbGlkYXRvciA9IHRoaXMuJHZhbGlkYXRvcjsKICAgICAgdmFyIHByb2Nlc3NvciA9IHRoaXMuJGdldFByb2Nlc3NvcigpOwogICAgICB2YXIgZ2V0RGF0YSA9IHRoaXMuJGdldERhdGE7CiAgICAgIHZhciBzZXREYXRhID0gdGhpcy4kc2V0RGF0YTsKICAgICAgdmFyIGxvYWREYXRhID0gdGhpcy4kbG9hZERhdGE7CiAgICAgIHJldHVybiBwcm9jZXNzb3IuYWNxdWlyZSgiRGF0YUxvYWRlciIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgIHZhciBydW5uYWJsZSA9IGZ1bmN0aW9uIHJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0b3IuaXNWYWxpZCgpKSByZXR1cm4gcmVzb2x2ZShnZXREYXRhKCkpOwogICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvci5yZXNldENoZWNrcG9pbnQoKTsKICAgICAgICAgICAgICAgICAgICBzZXREYXRhKG51bGwpOwogICAgICAgICAgICAgICAgICAgIGxvYWREYXRhKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBzZXREYXRhKGRhdGEpOwogICAgICAgICAgICAgICAgdmFsaWRhdG9yLm1ha2VDaGVja3BvaW50KCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBnZXREYXRhKCkpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICB2YWxpZGF0b3IucmVzZXRDaGVja3BvaW50KCk7CiAgICAgICAgICAgICAgICBzZXREYXRhKG51bGwpOwogICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQudDA7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDldXSk7CiAgICAgIH0pKSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRGF0YUxvYWRlcjsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgRGF0YUxvYWRlcjs="},{"version":3,"sources":["C:/development/freshnet-v2/vue/src/stores/components/DataLoader.js"],"names":["ValidationChecker","DataLoader","arg","timeout","$validator","callback","$getProcessor","$loadData","$setData","$getData","resetCheckpoint","isValid","validator","processor","getData","setData","loadData","acquire","Promise","resolve","reject","runnable","then","data","catch","error","makeCheckpoint"],"mappings":";;;;;;AAAA,OAAOA,iBAAP,MAA8B,qBAA9B;;IAEMC,U;AASH,wBAA+C;AAAA,QAAnCC,GAAmC,uEAA7B;AAAEC,MAAAA,OAAO,EAAE,OAAO,EAAP,GAAY;AAAvB,KAA6B;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAC5C,SAAKC,UAAL,GAAkB,IAAIJ,iBAAJ,CAAsB;AAAEG,MAAAA,OAAO,EAAED,GAAG,CAACC;AAAf,KAAtB,CAAlB;AACF;;;;WAED,mBAAUE,QAAV,EAAoB;AACjB,WAAKC,aAAL,GAAqBD,QAArB;AACA,aAAO,IAAP;AACF;;;WAED,kBAASA,QAAT,EAAmB;AAChB,WAAKE,SAAL,GAAiBF,QAAjB;AACA,aAAO,IAAP;AACF;;;WACD,iBAAQA,QAAR,EAAkB;AACf,WAAKG,QAAL,GAAgBH,QAAhB;AACA,aAAO,IAAP;AACF;;;WACD,iBAAQA,QAAR,EAAkB;AACf,WAAKI,QAAL,GAAgBJ,QAAhB;AACA,aAAO,IAAP;AACF;;;WAED,qBAAY;AACT,WAAKD,UAAL,CAAgBM,eAAhB;AACF;;;WACD,qBAAY;AACT,aAAO,CAAC,KAAKN,UAAL,CAAgBO,OAAhB,EAAR;AACF;;;WAED,gBAAO;AACJ,UAAMC,SAAS,GAAG,KAAKR,UAAvB;AAEA,UAAMS,SAAS,GAAG,KAAKP,aAAL,EAAlB;AAEA,UAAMQ,OAAO,GAAG,KAAKL,QAArB;AACA,UAAMM,OAAO,GAAG,KAAKP,QAArB;AACA,UAAMQ,QAAQ,GAAG,KAAKT,SAAtB;AAEA,aAAOM,SAAS,CAACI,OAAV,CAAkB,YAAlB,uEAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEd,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACjD,sBAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACpB,wBAAIT,SAAS,CAACD,OAAV,EAAJ,EAAyB,OAAOQ,OAAO,CAACL,OAAO,EAAR,CAAd;AAEzBF,oBAAAA,SAAS,CAACF,eAAV;AACAK,oBAAAA,OAAO,CAAC,IAAD,CAAP;AACAC,oBAAAA,QAAQ,GACJM,IADJ,CACS,UAACC,IAAD;AAAA,6BAAUJ,OAAO,CAACI,IAAD,CAAjB;AAAA,qBADT,EAEIC,KAFJ,CAEU,UAACC,KAAD;AAAA,6BAAWL,MAAM,CAACK,KAAD,CAAjB;AAAA,qBAFV;AAGF,mBARD;;AASAJ,kBAAAA,QAAQ;AACV,iBAXkB,CAFc;;AAAA;AAE3BE,gBAAAA,IAF2B;AAejCR,gBAAAA,OAAO,CAACQ,IAAD,CAAP;AACAX,gBAAAA,SAAS,CAACc,cAAV;AAhBiC,iDAiB1BZ,OAAO,EAjBmB;;AAAA;AAAA;AAAA;AAmBjCF,gBAAAA,SAAS,CAACF,eAAV;AACAK,gBAAAA,OAAO,CAAC,IAAD,CAAP;AApBiC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAhC,GAAP;AAwBF;;;;;;AAGJ,eAAed,UAAf","sourcesContent":["import ValidationChecker from \"./ValidationChecker\";\r\n\r\nclass DataLoader {\r\n   $validator;\r\n\r\n   $getProcessor;\r\n\r\n   $loadData;\r\n   $setData;\r\n   $getData;\r\n\r\n   constructor(arg = { timeout: 1000 * 60 * 10 }) {\r\n      this.$validator = new ValidationChecker({ timeout: arg.timeout });\r\n   }\r\n\r\n   processor(callback) {\r\n      this.$getProcessor = callback;\r\n      return this;\r\n   }\r\n\r\n   loadData(callback) {\r\n      this.$loadData = callback;\r\n      return this;\r\n   }\r\n   setData(callback) {\r\n      this.$setData = callback;\r\n      return this;\r\n   }\r\n   getData(callback) {\r\n      this.$getData = callback;\r\n      return this;\r\n   }\r\n\r\n   doTimeout() {\r\n      this.$validator.resetCheckpoint();\r\n   }\r\n   isTimeout() {\r\n      return !this.$validator.isValid();\r\n   }\r\n\r\n   data() {\r\n      const validator = this.$validator;\r\n\r\n      const processor = this.$getProcessor();\r\n\r\n      const getData = this.$getData;\r\n      const setData = this.$setData;\r\n      const loadData = this.$loadData;\r\n\r\n      return processor.acquire(\"DataLoader\", async () => {\r\n         try {\r\n            const data = await new Promise((resolve, reject) => {\r\n               const runnable = () => {\r\n                  if (validator.isValid()) return resolve(getData());\r\n\r\n                  validator.resetCheckpoint();\r\n                  setData(null);\r\n                  loadData()\r\n                     .then((data) => resolve(data))\r\n                     .catch((error) => reject(error));\r\n               };\r\n               runnable();\r\n            });\r\n\r\n            setData(data);\r\n            validator.makeCheckpoint();\r\n            return getData();\r\n         } catch (error) {\r\n            validator.resetCheckpoint();\r\n            setData(null);\r\n            throw error;\r\n         }\r\n      });\r\n   }\r\n}\r\n\r\nexport default DataLoader;\r\n"]}]}