{"remainingRequest":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-v2\\vue\\src\\stores\\store.device.js","dependencies":[{"path":"C:\\dev\\freshnet-v2\\vue\\src\\stores\\store.device.js","mtime":1666953101741},{"path":"C:\\dev\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0IERhdGFMb2FkZXIgZnJvbSAiLi90b29scy9EYXRhTG9hZGVyIjsKaW1wb3J0IENvbGxlY3Rpb25VcGRhdGVyIGZyb20gIi4vdG9vbHMvQ29sbGVjdGlvblVwZGF0ZXIiOwppbXBvcnQgUHJvY2Vzc29yIGZyb20gIi4vdG9vbHMvUHJvY2Vzc29yLmpzIjsKaW1wb3J0IFZ1ZXggZnJvbSAidnVleCI7CmltcG9ydCBBcGlIb3N0IGZyb20gIkAvaG9zdC9BcGlIb3N0LmpzIjsKaW1wb3J0IEl0ZW1DdXN0b21lckRldmljZSBmcm9tICIuLi9pdGVtcy9DdXN0b21lckRldmljZS5qcyI7Cgp2YXIgYXBpVGhlbkNvbnRlbnQgPSBmdW5jdGlvbiBhcGlUaGVuQ29udGVudChhcGkpIHsKICB2YXIgZXJyb3IgPSBhcGkuZ2V0RXJyb3IoKTsKICB2YXIgZnJpZW5kbHlFcnJvciA9IGFwaS5nZXRFcnJvckZyaWVuZGx5KCk7CiAgaWYgKGVycm9yKSB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpOwogIGlmIChmcmllbmRseUVycm9yKSB0aHJvdyBuZXcgRXJyb3IoZnJpZW5kbHlFcnJvcik7CiAgcmV0dXJuIGFwaS5nZXRDb250ZW50KCk7Cn07Cgp2YXIgdXBkYXRlVGhlbkl0ZW0gPSBmdW5jdGlvbiB1cGRhdGVUaGVuSXRlbShjb250ZXh0LCBpZCwgY2FsbGJhY2spIHsKICB2YXIgaXRlbXMgPSBjb250ZXh0LnN0YXRlLml0ZW1zOwogIHZhciBpdGVtID0gaXRlbXMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIGl0ZW0uaWQgPT09IGlkOwogIH0pOwogIGNhbGxiYWNrKGl0ZW0pOwogIGNvbnRleHQuY29tbWl0KCJpdGVtcyIsIGl0ZW1zKTsKICBjb250ZXh0LmNvbW1pdCgibGFzdE1vZGlmaWVkIiwgRGF0ZS5ub3coKSk7CiAgcmV0dXJuIGl0ZW07Cn07Cgp2YXIgX2dldEl0ZW1PZklkID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoY29udGV4dCkgewogICAgdmFyIGlkLAogICAgICAgIF9hcmdzMiA9IGFyZ3VtZW50czsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlkID0gX2FyZ3MyLmxlbmd0aCA+IDEgJiYgX2FyZ3MyWzFdICE9PSB1bmRlZmluZWQgPyBfYXJnczJbMV0gOiAiIjsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoImdldEl0ZW1PZklkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICAgICAgICB2YXIgaXRlbXMsIGl0ZW07CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIGlkICE9PSAic3RyaW5nIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIG51bGwpOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCJnZXRJdGVtcyIpOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gaWQ7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGl0ZW0gPyBpdGVtIDogbnVsbCk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRJdGVtT2ZJZChfeCkgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7Cgp2YXIgX2dldEl0ZW1zT2ZJZHMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoY29udGV4dCkgewogICAgdmFyIGlkcywKICAgICAgICBfYXJnczQgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZHMgPSBfYXJnczQubGVuZ3RoID4gMSAmJiBfYXJnczRbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmdzNFsxXSA6IFtdOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgiZ2V0SXRlbXNPZklkcyIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgICAgICAgIHZhciBpdGVtcywgcmVzdWx0czsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgaWYgKFUuaXNBcnJheShpZHMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIFtdKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlzcGF0Y2goImdldEl0ZW1zIik7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gaWRzLm1hcChmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IGlkOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0gPyBpdGVtIDogbnVsbDsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHJlc3VsdHMpOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU0KTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRJdGVtc09mSWRzKF94MikgewogICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgewogIGluaXQ6IGZ1bmN0aW9uIGluaXQoU3RvcmVzKSB7CiAgICB2YXIgZGV2aWNlU3RvcmUgPSBuZXcgVnVleC5TdG9yZSh7CiAgICAgIHN0YXRlOiB7CiAgICAgICAgbGFzdE1vZGlmaWVkOiAwLAogICAgICAgIGRhdGFMb2FkZXI6IG5ldyBEYXRhTG9hZGVyKHsKICAgICAgICAgIHRpbWVvdXQ6IDEwMDAgKiA2MCAqIDEwCiAgICAgICAgfSkgLy8gMTBtaW4KICAgICAgICAucHJvY2Vzc29yKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBkZXZpY2VTdG9yZS5zdGF0ZS5wcm9jZXNzb3I7CiAgICAgICAgfSkubG9hZERhdGEoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgICAgdmFyIGFwaSwgY29udGVudCwgY29udGVudHMsIGl0ZW1zOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkudXJsKCJjdXN0b21lci9kZXZpY2UvbGlzdCIpLnNlbmQoKTsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgICBjb250ZW50ID0gYXBpVGhlbkNvbnRlbnQoYXBpKTsKICAgICAgICAgICAgICAgICAgY29udGVudHMgPSBBcnJheS5pc0FycmF5KGNvbnRlbnQpID8gY29udGVudCA6IFtdOwogICAgICAgICAgICAgICAgICBpdGVtcyA9IGNvbnRlbnRzLm1hcChmdW5jdGlvbiAoY29udGVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSXRlbUN1c3RvbWVyRGV2aWNlKFN0b3JlcykuZnJvbURhdGEoY29udGVudCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgaXRlbXMpOwoKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICAgIH0pKSkuc2V0RGF0YShmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgZGV2aWNlU3RvcmUuY29tbWl0KCJpdGVtcyIsIEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW10pOwogICAgICAgICAgZGV2aWNlU3RvcmUuY29tbWl0KCJsYXN0TW9kaWZpZWQiLCBEYXRlLm5vdygpKTsKICAgICAgICB9KS5nZXREYXRhKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBkZXZpY2VTdG9yZS5nZXR0ZXJzLml0ZW1zOwogICAgICAgIH0pLAogICAgICAgIGl0ZW1zOiBbXSwKICAgICAgICBwcm9jZXNzb3I6IG5ldyBQcm9jZXNzb3IoKQogICAgICB9LAogICAgICBtdXRhdGlvbnM6IHsKICAgICAgICBsYXN0TW9kaWZpZWQ6IGZ1bmN0aW9uIGxhc3RNb2RpZmllZChzdGF0ZSwgdGltZSkgewogICAgICAgICAgcmV0dXJuIHN0YXRlLmxhc3RNb2RpZmllZCA9IHRpbWU7CiAgICAgICAgfSwKICAgICAgICBpdGVtczogZnVuY3Rpb24gaXRlbXMoc3RhdGUsIF9pdGVtcykgewogICAgICAgICAgcmV0dXJuIHN0YXRlLml0ZW1zID0gX2l0ZW1zOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2V0dGVyczogewogICAgICAgIGxhc3RNb2RpZmllZDogZnVuY3Rpb24gbGFzdE1vZGlmaWVkKHN0YXRlKSB7CiAgICAgICAgICByZXR1cm4gc3RhdGUubGFzdE1vZGlmaWVkOwogICAgICAgIH0sCiAgICAgICAgaXNMb2FkaW5nOiBmdW5jdGlvbiBpc0xvYWRpbmcoc3RhdGUpIHsKICAgICAgICAgIHJldHVybiBzdGF0ZS5wcm9jZXNzb3IuaXNMb2FkaW5nKCk7CiAgICAgICAgfSwKICAgICAgICBpdGVtczogZnVuY3Rpb24gaXRlbXMoc3RhdGUpIHsKICAgICAgICAgIHJldHVybiBzdGF0ZS5pdGVtczsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFjdGlvbnM6IHsKICAgICAgICByZWZyZXNoOiBmdW5jdGlvbiByZWZyZXNoKGNvbnRleHQpIHsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJyZWZyZXNoIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnN0YXRlLmRhdGFMb2FkZXIuZG9UaW1lb3V0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlzcGF0Y2goImdldEl0ZW1zIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIGdldEl0ZW1zOiBmdW5jdGlvbiBnZXRJdGVtcyhjb250ZXh0KSB7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgiZ2V0SXRlbXMiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCgpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLmRhdGFMb2FkZXIuZGF0YSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgZ2V0SXRlbU9mSWQ6IGZ1bmN0aW9uIGdldEl0ZW1PZklkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzOwogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgICAgICB2YXIgaWQ7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGlkID0gX2FyZ3VtZW50cy5sZW5ndGggPiAxICYmIF9hcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMV0gOiAiIjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoInJldHVybiIsIF9nZXRJdGVtT2ZJZChjb250ZXh0LCBpZCkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIGdldEl0ZW1zT2ZJZHM6IGZ1bmN0aW9uIGdldEl0ZW1zT2ZJZHMoY29udGV4dCkgewogICAgICAgICAgdmFyIF9hcmd1bWVudHMyID0gYXJndW1lbnRzOwogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICAgICAgICB2YXIgaWRzOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBpZHMgPSBfYXJndW1lbnRzMi5sZW5ndGggPiAxICYmIF9hcmd1bWVudHMyWzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzMlsxXSA6IFtdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdCgicmV0dXJuIiwgX2dldEl0ZW1zT2ZJZHMoY29udGV4dCwgaWRzKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTExKTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgYWRkSXRlbTogZnVuY3Rpb24gYWRkSXRlbShjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50czMgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMoKSB7CiAgICAgICAgICAgIHZhciBhcmc7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGFyZyA9IF9hcmd1bWVudHMzLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czNbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHMzWzFdIDoge307CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJhZGRJdGVtIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEsIGFwaSwgY29udGVudCwgaXRlbSwgY3VzdG9tZXI7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBJdGVtQ3VzdG9tZXJEZXZpY2UoU3RvcmVzKS5mcm9tRGF0YShhcmcpLnRvRGF0YSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZGF0YS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QucmVxdWVzdCgpLlBPU1QoKS51cmwoImN1c3RvbWVyL2RldmljZS9hZGQiKS5ib2R5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBkYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaVRoZW5Db250ZW50KGFwaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBuZXcgSXRlbUN1c3RvbWVyRGV2aWNlKFN0b3JlcykuZnJvbURhdGEoY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBuZXcgQ29sbGVjdGlvblVwZGF0ZXIoY29udGV4dCkub25JZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5nZXRJdGVtKGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lciA9IFN0b3Jlcy5jdXN0b21lci5nZXR0ZXJzLmN1c3RvbWVycy5maW5kKGZ1bmN0aW9uIChjdXN0b21lcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21lci5pZCA9PT0gaXRlbS5vd25lckN1c3RvbWVySWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tZXIpIGN1c3RvbWVyLmRldmljZUlkcy5wdXNoKGl0ZW0uaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5hYnJ1cHQoInJldHVybiIsIGl0ZW0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTIpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxMyk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZUl0ZW1PZklkOiBmdW5jdGlvbiByZW1vdmVJdGVtT2ZJZChjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50czQgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTUoKSB7CiAgICAgICAgICAgIHZhciBhcmc7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTUkKF9jb250ZXh0MTUpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGFyZyA9IF9hcmd1bWVudHM0Lmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czRbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHM0WzFdIDoge307CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJyZW1vdmVJdGVtQnlJZCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNCgpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBhcGksIGNvbnRlbnQsIGl0ZW0sIGN1c3RvbWVyLCBpdGVtczsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuREVMRVRFKCkudXJsKCJjdXN0b21lci9kZXZpY2UvcmVtb3ZlIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3duZXJDdXN0b21lcklkOiBhcmcub3duZXJDdXN0b21lcklkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWNlSWQ6IGFyZy5pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc2VuZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQxNC5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYXBpVGhlbkNvbnRlbnQoYXBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBJdGVtQ3VzdG9tZXJEZXZpY2UoU3RvcmVzKS5mcm9tRGF0YShjb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXIgPSBTdG9yZXMuY3VzdG9tZXIuZ2V0dGVycy5jdXN0b21lcnMuZmluZChmdW5jdGlvbiAoY3VzdG9tZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VzdG9tZXIuaWQgPT09IGl0ZW0ub3duZXJDdXN0b21lcklkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXIuZGV2aWNlSWRzID0gY3VzdG9tZXIuZGV2aWNlSWRzLmZpbHRlcihmdW5jdGlvbiAoZGV2aWNlSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGV2aWNlSWQgIT09IGl0ZW0uaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IGNvbnRleHQuc3RhdGUuaXRlbXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChleGlzdGluZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZy5pZCAhPT0gaXRlbS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJpdGVtcyIsIGl0ZW1zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoImxhc3RNb2RpZmllZCIsIERhdGUubm93KCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIGl0ZW0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTQpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxNSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIHVwZGF0ZVNwZWNpZmljYXRpb25zT2ZJZDogZnVuY3Rpb24gdXBkYXRlU3BlY2lmaWNhdGlvbnNPZklkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzNSA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNygpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNyQoX2NvbnRleHQxNykgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTcucHJldiA9IF9jb250ZXh0MTcubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czUubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzNVsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czVbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICBfaWQ6IF9pZCwKICAgICAgICAgICAgICAgICAgICAgIHNwZWNpZmljYXRpb25zOiBzcGVjaWZpY2F0aW9ucwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJ1cGRhdGVTcGVjaWZpY2F0aW9uc09mSWQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTYoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgX2lkLCBzcGVjaWZpY2F0aW9ucywgYXBpLCBjb250ZW50LCBpdGVtOwoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTYkKF9jb250ZXh0MTYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTYucHJldiA9IF9jb250ZXh0MTYubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaWQgPSBhcmcuX2lkLCBzcGVjaWZpY2F0aW9ucyA9IGFyZy5zcGVjaWZpY2F0aW9uczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QucmVxdWVzdCgpLlBVVCgpLnVybCgiY3VzdG9tZXIvZGV2aWNlL3VwZGF0ZS9zcGVjaWZpY2F0aW9ucyIpLmJvZHkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZDogX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lmaWNhdGlvbnM6IHNwZWNpZmljYXRpb25zCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDE2LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGlUaGVuQ29udGVudChhcGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbmV3IEl0ZW1DdXN0b21lckRldmljZShTdG9yZXMpLmZyb21EYXRhKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gdXBkYXRlVGhlbkl0ZW0oY29udGV4dCwgaXRlbS5pZCwgZnVuY3Rpb24gKGl0ZW1Ob3cpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbU5vdy5zcGVjaWZpY2F0aW9ucyA9IGl0ZW0uc3BlY2lmaWNhdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5hYnJ1cHQoInJldHVybiIsIGl0ZW0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxNik7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTE3KTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgdXBkYXRlRGVzY3JpcHRpb25PZklkOiBmdW5jdGlvbiB1cGRhdGVEZXNjcmlwdGlvbk9mSWQoY29udGV4dCkgewogICAgICAgICAgdmFyIF9hcmd1bWVudHM2ID0gYXJndW1lbnRzOwogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE5KCkgewogICAgICAgICAgICB2YXIgYXJnOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE5JChfY29udGV4dDE5KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxOS5wcmV2ID0gX2NvbnRleHQxOS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBhcmcgPSBfYXJndW1lbnRzNi5sZW5ndGggPiAxICYmIF9hcmd1bWVudHM2WzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzNlsxXSA6IHsKICAgICAgICAgICAgICAgICAgICAgIF9pZDogX2lkLAogICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOS5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoInVwZGF0ZURlc2NyaXB0aW9uT2ZJZCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOCgpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBfaWQsIGRlc2NyaXB0aW9uLCBhcGksIGNvbnRlbnQsIGl0ZW07CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOCQoX2NvbnRleHQxOCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxOC5wcmV2ID0gX2NvbnRleHQxOC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZCA9IGFyZy5faWQsIGRlc2NyaXB0aW9uID0gYXJnLmRlc2NyaXB0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuUFVUKCkudXJsKCJjdXN0b21lci9kZXZpY2UvdXBkYXRlL2Rlc2NyaXB0aW9uIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkOiBfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0MTguc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaVRoZW5Db250ZW50KGFwaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBuZXcgSXRlbUN1c3RvbWVyRGV2aWNlKFN0b3JlcykuZnJvbURhdGEoY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSB1cGRhdGVUaGVuSXRlbShjb250ZXh0LCBpdGVtLmlkLCBmdW5jdGlvbiAoaXRlbU5vdykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtTm93LmRlc2NyaXB0aW9uID0gaXRlbS5kZXNjcmlwdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LmFicnVwdCgicmV0dXJuIiwgaXRlbSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTE4KTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOS5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMTkpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBkZXZpY2VTdG9yZTsKICB9Cn07"},{"version":3,"sources":["C:/dev/freshnet-v2/vue/src/stores/store.device.js"],"names":["DataLoader","CollectionUpdater","Processor","Vuex","ApiHost","ItemCustomerDevice","apiThenContent","api","error","getError","friendlyError","getErrorFriendly","Error","getContent","updateThenItem","context","id","callback","items","state","item","find","commit","Date","now","getItemOfId","processor","acquire","dispatch","getItemsOfIds","ids","U","isArray","results","map","init","Stores","deviceStore","Store","lastModified","dataLoader","timeout","loadData","request","url","send","content","contents","Array","fromData","setData","data","getData","getters","mutations","time","isLoading","actions","refresh","doTimeout","getItems","addItem","arg","toData","POST","body","onId","getItem","customer","customers","ownerCustomerId","deviceIds","push","removeItemOfId","DELETE","deviceId","filter","existing","updateSpecificationsOfId","_id","specifications","PUT","itemNow","updateDescriptionOfId","description"],"mappings":"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","sourcesContent":["import DataLoader from \"./tools/DataLoader\";\r\nimport CollectionUpdater from \"./tools/CollectionUpdater\";\r\nimport Processor from \"./tools/Processor.js\";\r\n\r\nimport Vuex from \"vuex\";\r\nimport ApiHost from \"@/host/ApiHost.js\";\r\nimport ItemCustomerDevice from \"../items/CustomerDevice.js\";\r\n\r\nconst apiThenContent = (api) => {\r\n\tlet error = api.getError();\r\n\tlet friendlyError = api.getErrorFriendly();\r\n\r\n\tif (error) throw new Error(error);\r\n\tif (friendlyError) throw new Error(friendlyError);\r\n\treturn api.getContent();\r\n};\r\nconst updateThenItem = (context, id, callback) => {\r\n\tconst items = context.state.items;\r\n\tconst item = items.find((item) => item.id === id);\r\n\tcallback(item);\r\n\tcontext.commit(\"items\", items);\r\n\tcontext.commit(\"lastModified\", Date.now());\r\n\treturn item;\r\n};\r\nconst getItemOfId = async (context, id = \"\") => {\r\n\treturn context.state.processor.acquire(\"getItemOfId\", async () => {\r\n\t\tif (typeof id !== \"string\") return null;\r\n\t\tconst items = await context.dispatch(\"getItems\");\r\n\t\tconst item = items.find((item) => item.id === id);\r\n\t\treturn item ? item : null;\r\n\t});\r\n};\r\nconst getItemsOfIds = async (context, ids = []) => {\r\n\treturn context.state.processor.acquire(\"getItemsOfIds\", async () => {\r\n\t\tif (!U.isArray(ids)) return [];\r\n\r\n\t\tconst items = await context.dispatch(\"getItems\");\r\n\t\tconst results = ids.map((id) => {\r\n\t\t\tconst item = items.find((item) => item.id === id);\r\n\t\t\treturn item ? item : null;\r\n\t\t});\r\n\t\treturn results;\r\n\t});\r\n};\r\n\r\nexport default {\r\n\tinit(Stores) {\r\n\t\tconst deviceStore = new Vuex.Store({\r\n\t\t\tstate: {\r\n\t\t\t\tlastModified: 0,\r\n\t\t\t\tdataLoader: new DataLoader({ timeout: 1000 * 60 * 10 }) // 10min\r\n\t\t\t\t\t.processor(() => deviceStore.state.processor)\r\n\t\t\t\t\t.loadData(async () => {\r\n\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t.url(\"customer/device/list\")\r\n\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\tlet content = apiThenContent(api);\r\n\t\t\t\t\t\tlet contents = Array.isArray(content) ? content : [];\r\n\t\t\t\t\t\tlet items = contents.map((content) => {\r\n\t\t\t\t\t\t\treturn new ItemCustomerDevice(Stores).fromData(content);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn items;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.setData((data) => {\r\n\t\t\t\t\t\tdeviceStore.commit(\"items\", Array.isArray(data) ? data : []);\r\n\t\t\t\t\t\tdeviceStore.commit(\"lastModified\", Date.now());\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.getData(() => deviceStore.getters.items),\r\n\t\t\t\titems: [],\r\n\t\t\t\tprocessor: new Processor(),\r\n\t\t\t},\r\n\t\t\tmutations: {\r\n\t\t\t\tlastModified: (state, time) => (state.lastModified = time),\r\n\t\t\t\titems: (state, items) => (state.items = items),\r\n\t\t\t},\r\n\t\t\tgetters: {\r\n\t\t\t\tlastModified: (state) => state.lastModified,\r\n\t\t\t\tisLoading: (state) => state.processor.isLoading(),\r\n\t\t\t\titems: (state) => state.items,\r\n\t\t\t},\r\n\t\t\tactions: {\r\n\t\t\t\tasync refresh(context) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"refresh\", async () => {\r\n\t\t\t\t\t\tcontext.state.dataLoader.doTimeout();\r\n\t\t\t\t\t\tawait context.dispatch(\"getItems\");\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync getItems(context) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"getItems\", async () => {\r\n\t\t\t\t\t\treturn context.state.dataLoader.data();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tasync getItemOfId(context, id = \"\") {\r\n\t\t\t\t\treturn getItemOfId(context, id);\r\n\t\t\t\t},\r\n\t\t\t\tasync getItemsOfIds(context, ids = []) {\r\n\t\t\t\t\treturn getItemsOfIds(context, ids);\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync addItem(context, arg = {}) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"addItem\", async () => {\r\n\t\t\t\t\t\tlet data = new ItemCustomerDevice(Stores).fromData(arg).toData();\r\n\t\t\t\t\t\tdelete data.id;\r\n\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t.POST()\r\n\t\t\t\t\t\t\t.url(\"customer/device/add\")\r\n\t\t\t\t\t\t\t.body({ content: data })\r\n\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\tlet content = apiThenContent(api);\r\n\t\t\t\t\t\tlet item = new ItemCustomerDevice(Stores).fromData(content);\r\n\t\t\t\t\t\titem = new CollectionUpdater(context)\r\n\t\t\t\t\t\t\t.onId((item) => item.id)\r\n\t\t\t\t\t\t\t.getItem(item);\r\n\t\t\t\t\t\tlet customer = Stores.customer.getters.customers.find(\r\n\t\t\t\t\t\t\t(customer) => {\r\n\t\t\t\t\t\t\t\treturn customer.id === item.ownerCustomerId;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif (customer) customer.deviceIds.push(item.id);\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tasync removeItemOfId(context, arg = {}) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"removeItemById\", async () => {\r\n\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t.DELETE()\r\n\t\t\t\t\t\t\t.url(\"customer/device/remove\")\r\n\t\t\t\t\t\t\t.body({\r\n\t\t\t\t\t\t\t\tcontent: {\r\n\t\t\t\t\t\t\t\t\townerCustomerId: arg.ownerCustomerId,\r\n\t\t\t\t\t\t\t\t\tdeviceId: arg.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\tlet content = apiThenContent(api);\r\n\t\t\t\t\t\tlet item = new ItemCustomerDevice(Stores).fromData(content);\r\n\t\t\t\t\t\tlet customer = Stores.customer.getters.customers.find(\r\n\t\t\t\t\t\t\t(customer) => {\r\n\t\t\t\t\t\t\t\treturn customer.id === item.ownerCustomerId;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tcustomer.deviceIds = customer.deviceIds.filter((deviceId) => {\r\n\t\t\t\t\t\t\treturn deviceId !== item.id;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tlet items = context.state.items;\r\n\t\t\t\t\t\titems = items.filter((existing) => existing.id !== item.id);\r\n\t\t\t\t\t\tcontext.commit(\"items\", items);\r\n\t\t\t\t\t\tcontext.commit(\"lastModified\", Date.now());\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync updateSpecificationsOfId(context, arg = { _id, specifications }) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\r\n\t\t\t\t\t\t\"updateSpecificationsOfId\",\r\n\t\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\t\tlet { _id, specifications } = arg;\r\n\t\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t\t.PUT()\r\n\t\t\t\t\t\t\t\t.url(\"customer/device/update/specifications\")\r\n\t\t\t\t\t\t\t\t.body({ content: { _id, specifications } })\r\n\t\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\t\tlet content = apiThenContent(api);\r\n\t\t\t\t\t\t\tlet item = new ItemCustomerDevice(Stores).fromData(content);\r\n\t\t\t\t\t\t\titem = updateThenItem(context, item.id, (itemNow) => {\r\n\t\t\t\t\t\t\t\treturn (itemNow.specifications = item.specifications);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tasync updateDescriptionOfId(context, arg = { _id, description }) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\r\n\t\t\t\t\t\t\"updateDescriptionOfId\",\r\n\t\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\t\tlet { _id, description } = arg;\r\n\t\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t\t.PUT()\r\n\t\t\t\t\t\t\t\t.url(\"customer/device/update/description\")\r\n\t\t\t\t\t\t\t\t.body({ content: { _id, description } })\r\n\t\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\t\tlet content = apiThenContent(api);\r\n\t\t\t\t\t\t\tlet item = new ItemCustomerDevice(Stores).fromData(content);\r\n\t\t\t\t\t\t\titem = updateThenItem(context, item.id, (itemNow) => {\r\n\t\t\t\t\t\t\t\treturn (itemNow.description = item.description);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\treturn deviceStore;\r\n\t},\r\n};\r\n"]}]}