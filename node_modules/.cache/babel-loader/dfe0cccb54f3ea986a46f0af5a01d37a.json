{"remainingRequest":"C:\\dev\\freshnet-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-vue\\src\\stores\\store.device.js","dependencies":[{"path":"C:\\dev\\freshnet-vue\\src\\stores\\store.device.js","mtime":1666953101741},{"path":"C:\\dev\\freshnet-vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZcXGZyZXNobmV0LXZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgRGF0YUxvYWRlciBmcm9tICIuL3Rvb2xzL0RhdGFMb2FkZXIiOwppbXBvcnQgQ29sbGVjdGlvblVwZGF0ZXIgZnJvbSAiLi90b29scy9Db2xsZWN0aW9uVXBkYXRlciI7CmltcG9ydCBQcm9jZXNzb3IgZnJvbSAiLi90b29scy9Qcm9jZXNzb3IuanMiOwppbXBvcnQgVnVleCBmcm9tICJ2dWV4IjsKaW1wb3J0IEFwaUhvc3QgZnJvbSAiQC9ob3N0L0FwaUhvc3QuanMiOwppbXBvcnQgSXRlbUN1c3RvbWVyRGV2aWNlIGZyb20gIi4uL2l0ZW1zL0N1c3RvbWVyRGV2aWNlLmpzIjsKCnZhciBhcGlUaGVuQ29udGVudCA9IGZ1bmN0aW9uIGFwaVRoZW5Db250ZW50KGFwaSkgewogIHZhciBlcnJvciA9IGFwaS5nZXRFcnJvcigpOwogIHZhciBmcmllbmRseUVycm9yID0gYXBpLmdldEVycm9yRnJpZW5kbHkoKTsKICBpZiAoZXJyb3IpIHRocm93IG5ldyBFcnJvcihlcnJvcik7CiAgaWYgKGZyaWVuZGx5RXJyb3IpIHRocm93IG5ldyBFcnJvcihmcmllbmRseUVycm9yKTsKICByZXR1cm4gYXBpLmdldENvbnRlbnQoKTsKfTsKCnZhciB1cGRhdGVUaGVuSXRlbSA9IGZ1bmN0aW9uIHVwZGF0ZVRoZW5JdGVtKGNvbnRleHQsIGlkLCBjYWxsYmFjaykgewogIHZhciBpdGVtcyA9IGNvbnRleHQuc3RhdGUuaXRlbXM7CiAgdmFyIGl0ZW0gPSBpdGVtcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS5pZCA9PT0gaWQ7CiAgfSk7CiAgY2FsbGJhY2soaXRlbSk7CiAgY29udGV4dC5jb21taXQoIml0ZW1zIiwgaXRlbXMpOwogIGNvbnRleHQuY29tbWl0KCJsYXN0TW9kaWZpZWQiLCBEYXRlLm5vdygpKTsKICByZXR1cm4gaXRlbTsKfTsKCnZhciBfZ2V0SXRlbU9mSWQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihjb250ZXh0KSB7CiAgICB2YXIgaWQsCiAgICAgICAgX2FyZ3MyID0gYXJndW1lbnRzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaWQgPSBfYXJnczIubGVuZ3RoID4gMSAmJiBfYXJnczJbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmdzMlsxXSA6ICIiOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgiZ2V0SXRlbU9mSWQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICAgIHZhciBpdGVtcywgaXRlbTsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgaWQgIT09ICJzdHJpbmciKSkgewogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbnVsbCk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlzcGF0Y2goImdldEl0ZW1zIik7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkID09PSBpZDsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgaXRlbSA/IGl0ZW0gOiBudWxsKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGdldEl0ZW1PZklkKF94KSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBfZ2V0SXRlbXNPZklkcyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChjb250ZXh0KSB7CiAgICB2YXIgaWRzLAogICAgICAgIF9hcmdzNCA9IGFyZ3VtZW50czsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlkcyA9IF9hcmdzNC5sZW5ndGggPiAxICYmIF9hcmdzNFsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3M0WzFdIDogW107CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJnZXRJdGVtc09mSWRzIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICAgICAgdmFyIGl0ZW1zLCByZXN1bHRzOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICBpZiAoVS5pc0FycmF5KGlkcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgW10pOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiZ2V0SXRlbXMiKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSBpZHMubWFwKGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSA/IGl0ZW0gOiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgcmVzdWx0cyk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTQpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGdldEl0ZW1zT2ZJZHMoX3gyKSB7CiAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7CgpleHBvcnQgZGVmYXVsdCB7CiAgaW5pdDogZnVuY3Rpb24gaW5pdChTdG9yZXMpIHsKICAgIHZhciBkZXZpY2VTdG9yZSA9IG5ldyBWdWV4LlN0b3JlKHsKICAgICAgc3RhdGU6IHsKICAgICAgICBsYXN0TW9kaWZpZWQ6IDAsCiAgICAgICAgZGF0YUxvYWRlcjogbmV3IERhdGFMb2FkZXIoewogICAgICAgICAgdGltZW91dDogMTAwMCAqIDYwICogMTAKICAgICAgICB9KSAvLyAxMG1pbgogICAgICAgIC5wcm9jZXNzb3IoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLnN0YXRlLnByb2Nlc3NvcjsKICAgICAgICB9KS5sb2FkRGF0YSggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgICB2YXIgYXBpLCBjb250ZW50LCBjb250ZW50cywgaXRlbXM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS51cmwoImN1c3RvbWVyL2RldmljZS9saXN0Iikuc2VuZCgpOwoKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGlUaGVuQ29udGVudChhcGkpOwogICAgICAgICAgICAgICAgICBjb250ZW50cyA9IEFycmF5LmlzQXJyYXkoY29udGVudCkgPyBjb250ZW50IDogW107CiAgICAgICAgICAgICAgICAgIGl0ZW1zID0gY29udGVudHMubWFwKGZ1bmN0aW9uIChjb250ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJdGVtQ3VzdG9tZXJEZXZpY2UoU3RvcmVzKS5mcm9tRGF0YShjb250ZW50KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCBpdGVtcyk7CgogICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgICAgfSkpKS5zZXREYXRhKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBkZXZpY2VTdG9yZS5jb21taXQoIml0ZW1zIiwgQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbXSk7CiAgICAgICAgICBkZXZpY2VTdG9yZS5jb21taXQoImxhc3RNb2RpZmllZCIsIERhdGUubm93KCkpOwogICAgICAgIH0pLmdldERhdGEoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLmdldHRlcnMuaXRlbXM7CiAgICAgICAgfSksCiAgICAgICAgaXRlbXM6IFtdLAogICAgICAgIHByb2Nlc3NvcjogbmV3IFByb2Nlc3NvcigpCiAgICAgIH0sCiAgICAgIG11dGF0aW9uczogewogICAgICAgIGxhc3RNb2RpZmllZDogZnVuY3Rpb24gbGFzdE1vZGlmaWVkKHN0YXRlLCB0aW1lKSB7CiAgICAgICAgICByZXR1cm4gc3RhdGUubGFzdE1vZGlmaWVkID0gdGltZTsKICAgICAgICB9LAogICAgICAgIGl0ZW1zOiBmdW5jdGlvbiBpdGVtcyhzdGF0ZSwgX2l0ZW1zKSB7CiAgICAgICAgICByZXR1cm4gc3RhdGUuaXRlbXMgPSBfaXRlbXM7CiAgICAgICAgfQogICAgICB9LAogICAgICBnZXR0ZXJzOiB7CiAgICAgICAgbGFzdE1vZGlmaWVkOiBmdW5jdGlvbiBsYXN0TW9kaWZpZWQoc3RhdGUpIHsKICAgICAgICAgIHJldHVybiBzdGF0ZS5sYXN0TW9kaWZpZWQ7CiAgICAgICAgfSwKICAgICAgICBpc0xvYWRpbmc6IGZ1bmN0aW9uIGlzTG9hZGluZyhzdGF0ZSkgewogICAgICAgICAgcmV0dXJuIHN0YXRlLnByb2Nlc3Nvci5pc0xvYWRpbmcoKTsKICAgICAgICB9LAogICAgICAgIGl0ZW1zOiBmdW5jdGlvbiBpdGVtcyhzdGF0ZSkgewogICAgICAgICAgcmV0dXJuIHN0YXRlLml0ZW1zOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYWN0aW9uczogewogICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goY29udGV4dCkgewogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoInJlZnJlc2giLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3RhdGUuZGF0YUxvYWRlci5kb1RpbWVvdXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiZ2V0SXRlbXMiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgZ2V0SXRlbXM6IGZ1bmN0aW9uIGdldEl0ZW1zKGNvbnRleHQpIHsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KCkgewogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJnZXRJdGVtcyIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUuZGF0YUxvYWRlci5kYXRhKCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICBnZXRJdGVtT2ZJZDogZnVuY3Rpb24gZ2V0SXRlbU9mSWQoY29udGV4dCkgewogICAgICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgICAgIHZhciBpZDsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgaWQgPSBfYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50c1sxXSA6ICIiOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgX2dldEl0ZW1PZklkKGNvbnRleHQsIGlkKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTEwKTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgZ2V0SXRlbXNPZklkczogZnVuY3Rpb24gZ2V0SXRlbXNPZklkcyhjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50czIgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoKSB7CiAgICAgICAgICAgIHZhciBpZHM7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGlkcyA9IF9hcmd1bWVudHMyLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czJbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHMyWzFdIDogW107CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCBfZ2V0SXRlbXNPZklkcyhjb250ZXh0LCBpZHMpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMTEpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICBhZGRJdGVtOiBmdW5jdGlvbiBhZGRJdGVtKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzMyA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMygpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czMubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzM1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czNbMV0gOiB7fTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoImFkZEl0ZW0iLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSwgYXBpLCBjb250ZW50LCBpdGVtLCBjdXN0b21lcjsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbmV3IEl0ZW1DdXN0b21lckRldmljZShTdG9yZXMpLmZyb21EYXRhKGFyZykudG9EYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBkYXRhLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuUE9TVCgpLnVybCgiY3VzdG9tZXIvZGV2aWNlL2FkZCIpLmJvZHkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc2VuZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQxMi5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYXBpVGhlbkNvbnRlbnQoYXBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBJdGVtQ3VzdG9tZXJEZXZpY2UoU3RvcmVzKS5mcm9tRGF0YShjb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBDb2xsZWN0aW9uVXBkYXRlcihjb250ZXh0KS5vbklkKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldEl0ZW0oaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyID0gU3RvcmVzLmN1c3RvbWVyLmdldHRlcnMuY3VzdG9tZXJzLmZpbmQoZnVuY3Rpb24gKGN1c3RvbWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1c3RvbWVyLmlkID09PSBpdGVtLm93bmVyQ3VzdG9tZXJJZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21lcikgY3VzdG9tZXIuZGV2aWNlSWRzLnB1c2goaXRlbS5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIiwgaXRlbSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMik7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTEzKTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlSXRlbU9mSWQ6IGZ1bmN0aW9uIHJlbW92ZUl0ZW1PZklkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzNCA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNSgpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNSQoX2NvbnRleHQxNSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTUucHJldiA9IF9jb250ZXh0MTUubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czQubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzNFsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czRbMV0gOiB7fTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoInJlbW92ZUl0ZW1CeUlkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGFwaSwgY29udGVudCwgaXRlbSwgY3VzdG9tZXIsIGl0ZW1zOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNCQoX2NvbnRleHQxNCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5ERUxFVEUoKS51cmwoImN1c3RvbWVyL2RldmljZS9yZW1vdmUiKS5ib2R5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lckN1c3RvbWVySWQ6IGFyZy5vd25lckN1c3RvbWVySWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VJZDogYXJnLmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDE0LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGlUaGVuQ29udGVudChhcGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbmV3IEl0ZW1DdXN0b21lckRldmljZShTdG9yZXMpLmZyb21EYXRhKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lciA9IFN0b3Jlcy5jdXN0b21lci5nZXR0ZXJzLmN1c3RvbWVycy5maW5kKGZ1bmN0aW9uIChjdXN0b21lcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21lci5pZCA9PT0gaXRlbS5vd25lckN1c3RvbWVySWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lci5kZXZpY2VJZHMgPSBjdXN0b21lci5kZXZpY2VJZHMuZmlsdGVyKGZ1bmN0aW9uIChkZXZpY2VJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXZpY2VJZCAhPT0gaXRlbS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gY29udGV4dC5zdGF0ZS5pdGVtczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGV4aXN0aW5nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nLmlkICE9PSBpdGVtLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoIml0ZW1zIiwgaXRlbXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgibGFzdE1vZGlmaWVkIiwgRGF0ZS5ub3coKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LmFicnVwdCgicmV0dXJuIiwgaXRlbSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxNCk7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTE1KTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgdXBkYXRlU3BlY2lmaWNhdGlvbnNPZklkOiBmdW5jdGlvbiB1cGRhdGVTcGVjaWZpY2F0aW9uc09mSWQoY29udGV4dCkgewogICAgICAgICAgdmFyIF9hcmd1bWVudHM1ID0gYXJndW1lbnRzOwogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE3KCkgewogICAgICAgICAgICB2YXIgYXJnOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE3JChfY29udGV4dDE3KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNy5wcmV2ID0gX2NvbnRleHQxNy5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBhcmcgPSBfYXJndW1lbnRzNS5sZW5ndGggPiAxICYmIF9hcmd1bWVudHM1WzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzNVsxXSA6IHsKICAgICAgICAgICAgICAgICAgICAgIF9pZDogX2lkLAogICAgICAgICAgICAgICAgICAgICAgc3BlY2lmaWNhdGlvbnM6IHNwZWNpZmljYXRpb25zCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoInVwZGF0ZVNwZWNpZmljYXRpb25zT2ZJZCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNigpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBfaWQsIHNwZWNpZmljYXRpb25zLCBhcGksIGNvbnRlbnQsIGl0ZW07CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNiQoX2NvbnRleHQxNikgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNi5wcmV2ID0gX2NvbnRleHQxNi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZCA9IGFyZy5faWQsIHNwZWNpZmljYXRpb25zID0gYXJnLnNwZWNpZmljYXRpb25zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuUFVUKCkudXJsKCJjdXN0b21lci9kZXZpY2UvdXBkYXRlL3NwZWNpZmljYXRpb25zIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkOiBfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVjaWZpY2F0aW9uczogc3BlY2lmaWNhdGlvbnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0MTYuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaVRoZW5Db250ZW50KGFwaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBuZXcgSXRlbUN1c3RvbWVyRGV2aWNlKFN0b3JlcykuZnJvbURhdGEoY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSB1cGRhdGVUaGVuSXRlbShjb250ZXh0LCBpdGVtLmlkLCBmdW5jdGlvbiAoaXRlbU5vdykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtTm93LnNwZWNpZmljYXRpb25zID0gaXRlbS5zcGVjaWZpY2F0aW9uczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdCgicmV0dXJuIiwgaXRlbSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTYuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTE2KTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMTcpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVEZXNjcmlwdGlvbk9mSWQ6IGZ1bmN0aW9uIHVwZGF0ZURlc2NyaXB0aW9uT2ZJZChjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50czYgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTkoKSB7CiAgICAgICAgICAgIHZhciBhcmc7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTkkKF9jb250ZXh0MTkpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE5LnByZXYgPSBfY29udGV4dDE5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGFyZyA9IF9hcmd1bWVudHM2Lmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czZbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHM2WzFdIDogewogICAgICAgICAgICAgICAgICAgICAgX2lkOiBfaWQsCiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgidXBkYXRlRGVzY3JpcHRpb25PZklkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE4KCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIF9pZCwgZGVzY3JpcHRpb24sIGFwaSwgY29udGVudCwgaXRlbTsKCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE4JChfY29udGV4dDE4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE4LnByZXYgPSBfY29udGV4dDE4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkID0gYXJnLl9pZCwgZGVzY3JpcHRpb24gPSBhcmcuZGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5QVVQoKS51cmwoImN1c3RvbWVyL2RldmljZS91cGRhdGUvZGVzY3JpcHRpb24iKS5ib2R5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaWQ6IF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc2VuZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQxOC5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYXBpVGhlbkNvbnRlbnQoYXBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBJdGVtQ3VzdG9tZXJEZXZpY2UoU3RvcmVzKS5mcm9tRGF0YShjb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IHVwZGF0ZVRoZW5JdGVtKGNvbnRleHQsIGl0ZW0uaWQsIGZ1bmN0aW9uIChpdGVtTm93KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1Ob3cuZGVzY3JpcHRpb24gPSBpdGVtLmRlc2NyaXB0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguYWJydXB0KCJyZXR1cm4iLCBpdGVtKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTgpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxOSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGRldmljZVN0b3JlOwogIH0KfTs="},{"version":3,"sources":["C:/dev/freshnet-vue/src/stores/store.device.js"],"names":["DataLoader","CollectionUpdater","Processor","Vuex","ApiHost","ItemCustomerDevice","apiThenContent","api","error","getError","friendlyError","getErrorFriendly","Error","getContent","updateThenItem","context","id","callback","items","state","item","find","commit","Date","now","getItemOfId","processor","acquire","dispatch","getItemsOfIds","ids","U","isArray","results","map","init","Stores","deviceStore","Store","lastModified","dataLoader","timeout","loadData","request","url","send","content","contents","Array","fromData","setData","data","getData","getters","mutations","time","isLoading","actions","refresh","doTimeout","getItems","addItem","arg","toData","POST","body","onId","getItem","customer","customers","ownerCustomerId","deviceIds","push","removeItemOfId","DELETE","deviceId","filter","existing","updateSpecificationsOfId","_id","specifications","PUT","itemNow","updateDescriptionOfId","description"],"mappings":"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","sourcesContent":["import DataLoader from \"./tools/DataLoader\";\r\nimport CollectionUpdater from \"./tools/CollectionUpdater\";\r\nimport Processor from \"./tools/Processor.js\";\r\n\r\nimport Vuex from \"vuex\";\r\nimport ApiHost from \"@/host/ApiHost.js\";\r\nimport ItemCustomerDevice from \"../items/CustomerDevice.js\";\r\n\r\nconst apiThenContent = (api) => {\r\n\tlet error = api.getError();\r\n\tlet friendlyError = api.getErrorFriendly();\r\n\r\n\tif (error) throw new Error(error);\r\n\tif (friendlyError) throw new Error(friendlyError);\r\n\treturn api.getContent();\r\n};\r\nconst updateThenItem = (context, id, callback) => {\r\n\tconst items = context.state.items;\r\n\tconst item = items.find((item) => item.id === id);\r\n\tcallback(item);\r\n\tcontext.commit(\"items\", items);\r\n\tcontext.commit(\"lastModified\", Date.now());\r\n\treturn item;\r\n};\r\nconst getItemOfId = async (context, id = \"\") => {\r\n\treturn context.state.processor.acquire(\"getItemOfId\", async () => {\r\n\t\tif (typeof id !== \"string\") return null;\r\n\t\tconst items = await context.dispatch(\"getItems\");\r\n\t\tconst item = items.find((item) => item.id === id);\r\n\t\treturn item ? item : null;\r\n\t});\r\n};\r\nconst getItemsOfIds = async (context, ids = []) => {\r\n\treturn context.state.processor.acquire(\"getItemsOfIds\", async () => {\r\n\t\tif (!U.isArray(ids)) return [];\r\n\r\n\t\tconst items = await context.dispatch(\"getItems\");\r\n\t\tconst results = ids.map((id) => {\r\n\t\t\tconst item = items.find((item) => item.id === id);\r\n\t\t\treturn item ? item : null;\r\n\t\t});\r\n\t\treturn results;\r\n\t});\r\n};\r\n\r\nexport default {\r\n\tinit(Stores) {\r\n\t\tconst deviceStore = new Vuex.Store({\r\n\t\t\tstate: {\r\n\t\t\t\tlastModified: 0,\r\n\t\t\t\tdataLoader: new DataLoader({ timeout: 1000 * 60 * 10 }) // 10min\r\n\t\t\t\t\t.processor(() => deviceStore.state.processor)\r\n\t\t\t\t\t.loadData(async () => {\r\n\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t.url(\"customer/device/list\")\r\n\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\tlet content = apiThenContent(api);\r\n\t\t\t\t\t\tlet contents = Array.isArray(content) ? content : [];\r\n\t\t\t\t\t\tlet items = contents.map((content) => {\r\n\t\t\t\t\t\t\treturn new ItemCustomerDevice(Stores).fromData(content);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn items;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.setData((data) => {\r\n\t\t\t\t\t\tdeviceStore.commit(\"items\", Array.isArray(data) ? data : []);\r\n\t\t\t\t\t\tdeviceStore.commit(\"lastModified\", Date.now());\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.getData(() => deviceStore.getters.items),\r\n\t\t\t\titems: [],\r\n\t\t\t\tprocessor: new Processor(),\r\n\t\t\t},\r\n\t\t\tmutations: {\r\n\t\t\t\tlastModified: (state, time) => (state.lastModified = time),\r\n\t\t\t\titems: (state, items) => (state.items = items),\r\n\t\t\t},\r\n\t\t\tgetters: {\r\n\t\t\t\tlastModified: (state) => state.lastModified,\r\n\t\t\t\tisLoading: (state) => state.processor.isLoading(),\r\n\t\t\t\titems: (state) => state.items,\r\n\t\t\t},\r\n\t\t\tactions: {\r\n\t\t\t\tasync refresh(context) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"refresh\", async () => {\r\n\t\t\t\t\t\tcontext.state.dataLoader.doTimeout();\r\n\t\t\t\t\t\tawait context.dispatch(\"getItems\");\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync getItems(context) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"getItems\", async () => {\r\n\t\t\t\t\t\treturn context.state.dataLoader.data();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tasync getItemOfId(context, id = \"\") {\r\n\t\t\t\t\treturn getItemOfId(context, id);\r\n\t\t\t\t},\r\n\t\t\t\tasync getItemsOfIds(context, ids = []) {\r\n\t\t\t\t\treturn getItemsOfIds(context, ids);\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync addItem(context, arg = {}) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"addItem\", async () => {\r\n\t\t\t\t\t\tlet data = new ItemCustomerDevice(Stores).fromData(arg).toData();\r\n\t\t\t\t\t\tdelete data.id;\r\n\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t.POST()\r\n\t\t\t\t\t\t\t.url(\"customer/device/add\")\r\n\t\t\t\t\t\t\t.body({ content: data })\r\n\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\tlet content = apiThenContent(api);\r\n\t\t\t\t\t\tlet item = new ItemCustomerDevice(Stores).fromData(content);\r\n\t\t\t\t\t\titem = new CollectionUpdater(context)\r\n\t\t\t\t\t\t\t.onId((item) => item.id)\r\n\t\t\t\t\t\t\t.getItem(item);\r\n\t\t\t\t\t\tlet customer = Stores.customer.getters.customers.find(\r\n\t\t\t\t\t\t\t(customer) => {\r\n\t\t\t\t\t\t\t\treturn customer.id === item.ownerCustomerId;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif (customer) customer.deviceIds.push(item.id);\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tasync removeItemOfId(context, arg = {}) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"removeItemById\", async () => {\r\n\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t.DELETE()\r\n\t\t\t\t\t\t\t.url(\"customer/device/remove\")\r\n\t\t\t\t\t\t\t.body({\r\n\t\t\t\t\t\t\t\tcontent: {\r\n\t\t\t\t\t\t\t\t\townerCustomerId: arg.ownerCustomerId,\r\n\t\t\t\t\t\t\t\t\tdeviceId: arg.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\tlet content = apiThenContent(api);\r\n\t\t\t\t\t\tlet item = new ItemCustomerDevice(Stores).fromData(content);\r\n\t\t\t\t\t\tlet customer = Stores.customer.getters.customers.find(\r\n\t\t\t\t\t\t\t(customer) => {\r\n\t\t\t\t\t\t\t\treturn customer.id === item.ownerCustomerId;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tcustomer.deviceIds = customer.deviceIds.filter((deviceId) => {\r\n\t\t\t\t\t\t\treturn deviceId !== item.id;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tlet items = context.state.items;\r\n\t\t\t\t\t\titems = items.filter((existing) => existing.id !== item.id);\r\n\t\t\t\t\t\tcontext.commit(\"items\", items);\r\n\t\t\t\t\t\tcontext.commit(\"lastModified\", Date.now());\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync updateSpecificationsOfId(context, arg = { _id, specifications }) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\r\n\t\t\t\t\t\t\"updateSpecificationsOfId\",\r\n\t\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\t\tlet { _id, specifications } = arg;\r\n\t\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t\t.PUT()\r\n\t\t\t\t\t\t\t\t.url(\"customer/device/update/specifications\")\r\n\t\t\t\t\t\t\t\t.body({ content: { _id, specifications } })\r\n\t\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\t\tlet content = apiThenContent(api);\r\n\t\t\t\t\t\t\tlet item = new ItemCustomerDevice(Stores).fromData(content);\r\n\t\t\t\t\t\t\titem = updateThenItem(context, item.id, (itemNow) => {\r\n\t\t\t\t\t\t\t\treturn (itemNow.specifications = item.specifications);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tasync updateDescriptionOfId(context, arg = { _id, description }) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\r\n\t\t\t\t\t\t\"updateDescriptionOfId\",\r\n\t\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\t\tlet { _id, description } = arg;\r\n\t\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t\t.PUT()\r\n\t\t\t\t\t\t\t\t.url(\"customer/device/update/description\")\r\n\t\t\t\t\t\t\t\t.body({ content: { _id, description } })\r\n\t\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\t\tlet content = apiThenContent(api);\r\n\t\t\t\t\t\t\tlet item = new ItemCustomerDevice(Stores).fromData(content);\r\n\t\t\t\t\t\t\titem = updateThenItem(context, item.id, (itemNow) => {\r\n\t\t\t\t\t\t\t\treturn (itemNow.description = item.description);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\treturn deviceStore;\r\n\t},\r\n};\r\n"]}]}