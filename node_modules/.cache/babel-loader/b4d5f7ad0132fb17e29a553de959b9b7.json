{"remainingRequest":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-v2\\vue\\src\\stores\\store.user.js","dependencies":[{"path":"C:\\dev\\freshnet-v2\\vue\\src\\stores\\store.user.js","mtime":1666953105748},{"path":"C:\\dev\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCBWdWV4IGZyb20gInZ1ZXgiOwppbXBvcnQgQXBpSG9zdCBmcm9tICIuLi9ob3N0L0FwaUhvc3QuanMiOwppbXBvcnQgSXRlbVVzZXIgZnJvbSAiLi4vaXRlbXMvVXNlci5qcyI7CmltcG9ydCBEYXRhTG9hZGVyIGZyb20gIi4vdG9vbHMvRGF0YUxvYWRlciI7CmltcG9ydCBQcm9jZXNzb3IgZnJvbSAiLi90b29scy9Qcm9jZXNzb3IuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgaW5pdDogZnVuY3Rpb24gaW5pdChTdG9yZXMpIHsKICAgIHZhciBsb2dpblN0b3JlID0gU3RvcmVzLmxvZ2luOwogICAgdmFyIHN0b3JlID0gbmV3IFZ1ZXguU3RvcmUoewogICAgICBzdGF0ZTogewogICAgICAgIGxhc3RNb2RpZmllZDogMCwKICAgICAgICBkYXRhTG9hZGVyOiBuZXcgRGF0YUxvYWRlcih7CiAgICAgICAgICB0aW1lb3V0OiAxMDAwICogNQogICAgICAgIH0pIC8vIDVzZWMKICAgICAgICAucHJvY2Vzc29yKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5wcm9jZXNzb3I7CiAgICAgICAgfSkubG9hZERhdGEoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICB2YXIgdXNlciwgYXBpLCBjb250ZW50czsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dpblN0b3JlLmRpc3BhdGNoKCJnZXRVc2VyIik7CgogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICB1c2VyID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICAgIGlmICghKCF1c2VyIHx8ICF1c2VyLmlzVHlwZUFkbWluKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpOwoKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS51cmwoInVzZXJzIikuc2VuZCgpOwoKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgY29udGVudHMgPSBhcGkuZ2V0Q29udGVudCgpOwogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBjb250ZW50cy5tYXAoZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEl0ZW1Vc2VyKFN0b3JlcykuZnJvbURhdGEoZGF0YSk7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgIH0pKSkuc2V0RGF0YShmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgc3RvcmUuY29tbWl0KCJpdGVtcyIsIEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW10pOwogICAgICAgICAgc3RvcmUuY29tbWl0KCJsYXN0TW9kaWZpZWQiLCBEYXRlLm5vdygpKTsKICAgICAgICB9KS5nZXREYXRhKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzLml0ZW1zOwogICAgICAgIH0pLAogICAgICAgIGl0ZW1zOiBbXSwKICAgICAgICBwcm9jZXNzb3I6IG5ldyBQcm9jZXNzb3IoKQogICAgICB9LAogICAgICBtdXRhdGlvbnM6IHsKICAgICAgICBsYXN0TW9kaWZpZWQ6IGZ1bmN0aW9uIGxhc3RNb2RpZmllZChzdGF0ZSwgdGltZSkgewogICAgICAgICAgcmV0dXJuIHN0YXRlLmxhc3RNb2RpZmllZCA9IHRpbWU7CiAgICAgICAgfSwKICAgICAgICBpdGVtczogZnVuY3Rpb24gaXRlbXMoc3RhdGUsIF9pdGVtcykgewogICAgICAgICAgc3RhdGUuaXRlbXMgPSBBcnJheS5pc0FycmF5KF9pdGVtcykgPyBfaXRlbXMgOiBbXTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdldHRlcnM6IHsKICAgICAgICBsYXN0TW9kaWZpZWQ6IGZ1bmN0aW9uIGxhc3RNb2RpZmllZChzdGF0ZSkgewogICAgICAgICAgcmV0dXJuIHN0YXRlLmxhc3RNb2RpZmllZDsKICAgICAgICB9LAogICAgICAgIGlzTG9hZGluZzogZnVuY3Rpb24gaXNMb2FkaW5nKHN0YXRlKSB7CiAgICAgICAgICByZXR1cm4gc3RhdGUucHJvY2Vzc29yLmlzTG9hZGluZygpOwogICAgICAgIH0sCiAgICAgICAgdG9rZW46IGZ1bmN0aW9uIHRva2VuKCkgewogICAgICAgICAgcmV0dXJuIGxvZ2luU3RvcmUuZ2V0dGVycy50b2tlbjsKICAgICAgICB9LAogICAgICAgIGl0ZW1zOiBmdW5jdGlvbiBpdGVtcyhzdGF0ZSkgewogICAgICAgICAgcmV0dXJuIHN0YXRlLml0ZW1zLm1hcChmdW5jdGlvbiAodXNlcikgewogICAgICAgICAgICByZXR1cm4gdXNlcjsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYWN0aW9uczogewogICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goY29udGV4dCkgewogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoInJlZnJlc2giLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3RhdGUuZGF0YUxvYWRlci5kb1RpbWVvdXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiZ2V0VXNlcnMiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgZ2V0VXNlcnM6IGZ1bmN0aW9uIGdldFVzZXJzKGNvbnRleHQpIHsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJnZXRVc2VycyIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5zdGF0ZS5kYXRhTG9hZGVyLmRhdGEoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDQuc2VudCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIGdldFVzZXJCeVVzZXJuYW1lOiBmdW5jdGlvbiBnZXRVc2VyQnlVc2VybmFtZShjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgICAgICB2YXIgdXNlcm5hbWU7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWUgPSBfYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50c1sxXSA6ICIiOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJnZXRVc2VyQnlVc2VybmFtZSIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJzOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiZ2V0VXNlcnMiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJzID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCB1c2Vycy5maW5kKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXIudXNlcm5hbWUgPT09IHVzZXJuYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIGFkZFVzZXI6IGZ1bmN0aW9uIGFkZFVzZXIoY29udGV4dCkgewogICAgICAgICAgdmFyIF9hcmd1bWVudHMyID0gYXJndW1lbnRzOwogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgICAgICAgIHZhciBhcmc7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czIubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzMlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czJbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmROZXc6IHBhc3N3b3JkTmV3LAogICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRSZXBlYXQ6IHBhc3N3b3JkUmVwZWF0CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgiYWRkVXNlciIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIsIGFwaSwgY29udGVudCwgbmV3VXNlciwgdXNlcnM7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dpblN0b3JlLmRpc3BhdGNoKCJnZXRVc2VyIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyID0gX2NvbnRleHQ4LnNlbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISghdXNlciAmJiAhdXNlci5pc1R5cGVBZG1pbigpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS51cmwoInVzZXJzL3VzZXIiKS5QT1NUKCkuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IGFyZy51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBhcmcubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZE5ldzogYXJnLnBhc3N3b3JkTmV3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkUmVwZWF0OiBhcmcucGFzc3dvcmRSZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc2VuZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQ4LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGkuZ2V0Q29udGVudCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdVc2VyID0gbmV3IEl0ZW1Vc2VyKFN0b3JlcykuZnJvbURhdGEoY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJzID0gY29udGV4dC5nZXR0ZXJzLml0ZW1zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2Vycy5wdXNoKG5ld1VzZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgiaXRlbXMiLCB1c2Vycyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJsYXN0TW9kaWZpZWQiLCBEYXRlLm5vdygpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIG5ld1VzZXIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlVXNlckJ5VXNlcm5hbWU6IGZ1bmN0aW9uIHJlbW92ZVVzZXJCeVVzZXJuYW1lKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzMyA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMSgpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czMubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzM1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czNbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgicmVtb3ZlVXNlckJ5VXNlcm5hbWUiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciwgYXBpLCBjb250ZW50LCB1c2VyczsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9naW5TdG9yZS5kaXNwYXRjaCgiZ2V0VXNlciIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9IF9jb250ZXh0MTAuc2VudDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCF1c2VyICYmICF1c2VyLmlzVHlwZUFkbWluKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuREVMRVRFKCkudXJsKCJ1c2Vycy91c2VyIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IGFyZy51c2VybmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDEwLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGkuZ2V0Q29udGVudCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoY29udGVudCAhPT0gIm9rIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcnMgPSBjb250ZXh0LmdldHRlcnMuaXRlbXMuZmlsdGVyKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXIudXNlcm5hbWUgIT09IGFyZy51c2VybmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJpdGVtcyIsIHVzZXJzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoImxhc3RNb2RpZmllZCIsIERhdGUubm93KCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoInJldHVybiIsIHRydWUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIHVwZGF0ZVR5cGVPZlVzZXJCeVVzZXJuYW1lOiBmdW5jdGlvbiB1cGRhdGVUeXBlT2ZVc2VyQnlVc2VybmFtZShjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50czQgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMoKSB7CiAgICAgICAgICAgIHZhciBhcmc7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGFyZyA9IF9hcmd1bWVudHM0Lmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czRbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHM0WzFdIDogewogICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgICAgICAgICAgICAgICAgICAgdXNlclR5cGU6IHVzZXJUeXBlCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoInVwZGF0ZVR5cGVPZlVzZXJCeVVzZXJuYW1lIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIsIF91c2VybmFtZSwgX3VzZXJUeXBlLCBhcGksIGNvbnRlbnQsIHVzZXJDaGFuZ2UsIHVzZXJzOwoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLnByZXYgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9naW5TdG9yZS5kaXNwYXRjaCgiZ2V0VXNlciIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9IF9jb250ZXh0MTIuc2VudDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCF1c2VyICYmICF1c2VyLmlzVHlwZUFkbWluKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdXNlcm5hbWUgPSBhcmcudXNlcm5hbWUsIF91c2VyVHlwZSA9IGFyZy51c2VyVHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QucmVxdWVzdCgpLnVybCgidXNlcnMvdXNlciIpLlBVVCgpLmJvZHkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBfdXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlclR5cGU6IF91c2VyVHlwZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDEyLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGkuZ2V0Q29udGVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyQ2hhbmdlID0gbmV3IEl0ZW1Vc2VyKFN0b3JlcykuZnJvbURhdGEoY29udGVudCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNlckNoYW5nZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VycyA9IGNvbnRleHQuZ2V0dGVycy5pdGVtcy5tYXAoZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlci51c2VybmFtZSA9PT0gdXNlckNoYW5nZS51c2VybmFtZSA/IHVzZXJDaGFuZ2UgOiB1c2VyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoIml0ZW1zIiwgdXNlcnMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgibGFzdE1vZGlmaWVkIiwgRGF0ZS5ub3coKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIiwgdXNlckNoYW5nZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5wcmV2ID0gMjA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIudDAgPSBfY29udGV4dDEyWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgiaXRlbXMiLCBbXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJsYXN0TW9kaWZpZWQiLCBEYXRlLm5vdygpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQxMi50MDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTEyLCBudWxsLCBbWzAsIDIwXV0pOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxMyk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHN0b3JlOwogIH0KfTs="},{"version":3,"sources":["C:/dev/freshnet-v2/vue/src/stores/store.user.js"],"names":["Vuex","ApiHost","ItemUser","DataLoader","Processor","init","Stores","loginStore","login","store","Store","state","lastModified","dataLoader","timeout","processor","loadData","dispatch","user","isTypeAdmin","Error","request","url","send","api","contents","getContent","map","data","fromData","setData","commit","Array","isArray","Date","now","getData","getters","items","mutations","time","isLoading","token","actions","refresh","context","acquire","doTimeout","getUsers","getUserByUsername","username","users","find","addUser","arg","name","passwordNew","passwordRepeat","POST","body","content","newUser","push","removeUserByUsername","DELETE","filter","updateTypeOfUserByUsername","userType","PUT","userChange"],"mappings":"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","sourcesContent":["import Vuex from \"vuex\";\r\nimport ApiHost from \"../host/ApiHost.js\";\r\nimport ItemUser from \"../items/User.js\";\r\nimport DataLoader from \"./tools/DataLoader\";\r\nimport Processor from \"./tools/Processor.js\";\r\n\r\nexport default {\r\n\tinit(Stores) {\r\n\t\tconst loginStore = Stores.login;\r\n\r\n\t\tconst store = new Vuex.Store({\r\n\t\t\tstate: {\r\n\t\t\t\tlastModified: 0,\r\n\t\t\t\tdataLoader: new DataLoader({ timeout: 1000 * 5 }) // 5sec\r\n\t\t\t\t\t.processor(() => store.state.processor)\r\n\t\t\t\t\t.loadData(async () => {\r\n\t\t\t\t\t\tconst user = await loginStore.dispatch(\"getUser\");\r\n\t\t\t\t\t\tif (!user || !user.isTypeAdmin()) throw new Error();\r\n\t\t\t\t\t\tconst api = await ApiHost.request().url(\"users\").send();\r\n\t\t\t\t\t\tconst contents = api.getContent();\r\n\t\t\t\t\t\treturn contents.map((data) => new ItemUser(Stores).fromData(data));\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.setData((data) => {\r\n\t\t\t\t\t\tstore.commit(\"items\", Array.isArray(data) ? data : []);\r\n\t\t\t\t\t\tstore.commit(\"lastModified\", Date.now());\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.getData(() => store.getters.items),\r\n\t\t\t\titems: [],\r\n\t\t\t\tprocessor: new Processor(),\r\n\t\t\t},\r\n\t\t\tmutations: {\r\n\t\t\t\tlastModified: (state, time) => (state.lastModified = time),\r\n\t\t\t\titems: (state, items) => {\r\n\t\t\t\t\tstate.items = Array.isArray(items) ? items : [];\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgetters: {\r\n\t\t\t\tlastModified: (state) => state.lastModified,\r\n\t\t\t\tisLoading: (state) => state.processor.isLoading(),\r\n\t\t\t\ttoken: () => loginStore.getters.token,\r\n\t\t\t\titems: (state) => state.items.map((user) => user),\r\n\t\t\t},\r\n\t\t\tactions: {\r\n\t\t\t\tasync refresh(context) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"refresh\", async () => {\r\n\t\t\t\t\t\tcontext.state.dataLoader.doTimeout();\r\n\t\t\t\t\t\tawait context.dispatch(\"getUsers\");\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync getUsers(context) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"getUsers\", async () => {\r\n\t\t\t\t\t\treturn await context.state.dataLoader.data();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tasync getUserByUsername(context, username = \"\") {\r\n\t\t\t\t\treturn context.state.processor.acquire(\r\n\t\t\t\t\t\t\"getUserByUsername\",\r\n\t\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\t\tconst users = await context.dispatch(\"getUsers\");\r\n\t\t\t\t\t\t\treturn users.find((user) => user.username === username);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tasync addUser(\r\n\t\t\t\t\tcontext,\r\n\t\t\t\t\targ = { username, name, passwordNew, passwordRepeat },\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"addUser\", async () => {\r\n\t\t\t\t\t\tlet user = await loginStore.dispatch(\"getUser\");\r\n\r\n\t\t\t\t\t\tif (!user && !user.isTypeAdmin()) throw new Error();\r\n\r\n\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t.url(\"users/user\")\r\n\t\t\t\t\t\t\t.POST()\r\n\t\t\t\t\t\t\t.body({\r\n\t\t\t\t\t\t\t\tusername: arg.username,\r\n\t\t\t\t\t\t\t\tname: arg.name,\r\n\t\t\t\t\t\t\t\tpasswordNew: arg.passwordNew,\r\n\t\t\t\t\t\t\t\tpasswordRepeat: arg.passwordRepeat,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.send();\r\n\r\n\t\t\t\t\t\tlet content = api.getContent();\r\n\t\t\t\t\t\tif (!content) throw new Error();\r\n\t\t\t\t\t\tconst newUser = new ItemUser(Stores).fromData(content);\r\n\t\t\t\t\t\tconst users = context.getters.items;\r\n\t\t\t\t\t\tusers.push(newUser);\r\n\t\t\t\t\t\tcontext.commit(\"items\", users);\r\n\t\t\t\t\t\tcontext.commit(\"lastModified\", Date.now());\r\n\t\t\t\t\t\treturn newUser;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tasync removeUserByUsername(context, arg = { username }) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\r\n\t\t\t\t\t\t\"removeUserByUsername\",\r\n\t\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\t\tlet user = await loginStore.dispatch(\"getUser\");\r\n\r\n\t\t\t\t\t\t\tif (!user && !user.isTypeAdmin()) throw new Error();\r\n\r\n\t\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t\t.DELETE()\r\n\t\t\t\t\t\t\t\t.url(\"users/user\")\r\n\t\t\t\t\t\t\t\t.body({ username: arg.username })\r\n\t\t\t\t\t\t\t\t.send();\r\n\r\n\t\t\t\t\t\t\tlet content = api.getContent();\r\n\t\t\t\t\t\t\tif (content !== \"ok\") throw new Error();\r\n\t\t\t\t\t\t\tlet users = context.getters.items.filter((user) => {\r\n\t\t\t\t\t\t\t\treturn user.username !== arg.username;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tcontext.commit(\"items\", users);\r\n\t\t\t\t\t\t\tcontext.commit(\"lastModified\", Date.now());\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tasync updateTypeOfUserByUsername(\r\n\t\t\t\t\tcontext,\r\n\t\t\t\t\targ = { username, userType },\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\r\n\t\t\t\t\t\t\"updateTypeOfUserByUsername\",\r\n\t\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tlet user = await loginStore.dispatch(\"getUser\");\r\n\r\n\t\t\t\t\t\t\t\tif (!user && !user.isTypeAdmin()) throw new Error();\r\n\r\n\t\t\t\t\t\t\t\tlet { username, userType } = arg;\r\n\r\n\t\t\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t\t\t.url(\"users/user\")\r\n\t\t\t\t\t\t\t\t\t.PUT()\r\n\t\t\t\t\t\t\t\t\t.body({ username, userType })\r\n\t\t\t\t\t\t\t\t\t.send();\r\n\r\n\t\t\t\t\t\t\t\tlet content = api.getContent();\r\n\t\t\t\t\t\t\t\tlet userChange = new ItemUser(Stores).fromData(content);\r\n\t\t\t\t\t\t\t\tif (!userChange) throw new Error();\r\n\t\t\t\t\t\t\t\tlet users = context.getters.items.map((user) => {\r\n\t\t\t\t\t\t\t\t\treturn user.username === userChange.username\r\n\t\t\t\t\t\t\t\t\t\t? userChange\r\n\t\t\t\t\t\t\t\t\t\t: user;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tcontext.commit(\"items\", users);\r\n\t\t\t\t\t\t\t\tcontext.commit(\"lastModified\", Date.now());\r\n\t\t\t\t\t\t\t\treturn userChange;\r\n\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\tcontext.commit(\"items\", []);\r\n\t\t\t\t\t\t\t\tcontext.commit(\"lastModified\", Date.now());\r\n\t\t\t\t\t\t\t\tthrow error;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\treturn store;\r\n\t},\r\n};\r\n"]}]}