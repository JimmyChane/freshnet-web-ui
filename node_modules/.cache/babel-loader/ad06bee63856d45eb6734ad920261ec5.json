{"remainingRequest":"C:\\dev\\freshnet-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-vue\\src\\items\\Image.js","dependencies":[{"path":"C:\\dev\\freshnet-vue\\src\\items\\Image.js","mtime":1668339827343},{"path":"C:\\dev\\freshnet-vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZcXGZyZXNobmV0LXZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzpcXGRldlxcZnJlc2huZXQtdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzpcXGRldlxcZnJlc2huZXQtdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQzpcXGRldlxcZnJlc2huZXQtdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxkZWZpbmVQcm9wZXJ0eS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCBBcGlIb3N0IGZyb20gIkAvaG9zdC9BcGlIb3N0LmpzIjsKaW1wb3J0IE1vZHVsZUltYWdlIGZyb20gIi4vZGF0YS9JbWFnZS5qcyI7Cgp2YXIgZ2V0Q29sb3JzID0gcmVxdWlyZSgiZ2V0LWltYWdlLWNvbG9ycyIpOyAvLyBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9nZXQtaW1hZ2UtY29sb3JzCgoKdmFyIEltYWdlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBJbWFnZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbWFnZSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtZXRob2QiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicGF0aCIsIHZvaWQgMCk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoSW1hZ2UsIFt7CiAgICBrZXk6ICJmcm9tRGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZnJvbURhdGEoZGF0YSkgewogICAgICBkYXRhID0gbmV3IE1vZHVsZUltYWdlKGRhdGEpOwogICAgICB0aGlzLm1ldGhvZCA9IGRhdGEubWV0aG9kOwogICAgICB0aGlzLnBhdGggPSBkYXRhLnBhdGg7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogInRvRGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9EYXRhKCkgewogICAgICByZXR1cm4gbmV3IE1vZHVsZUltYWdlKHsKICAgICAgICBtZXRob2Q6IHRoaXMubWV0aG9kLAogICAgICAgIHBhdGg6IHRoaXMucGF0aAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0b0NvdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b0NvdW50KHN0cnMpIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgfSwgewogICAga2V5OiAidG9VcmwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRvVXJsKCkgewogICAgICB2YXIgb3B0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7CiAgICAgICAgd2lkdGg6IDAsCiAgICAgICAgaGVpZ2h0OiAwCiAgICAgIH07CiAgICAgIHZhciBfb3B0aW9uJHdpZHRoID0gb3B0aW9uLndpZHRoLAogICAgICAgICAgd2lkdGggPSBfb3B0aW9uJHdpZHRoID09PSB2b2lkIDAgPyAwIDogX29wdGlvbiR3aWR0aCwKICAgICAgICAgIF9vcHRpb24kaGVpZ2h0ID0gb3B0aW9uLmhlaWdodCwKICAgICAgICAgIGhlaWdodCA9IF9vcHRpb24kaGVpZ2h0ID09PSB2b2lkIDAgPyAwIDogX29wdGlvbiRoZWlnaHQ7CiAgICAgIHZhciBtZXRob2QgPSB0aGlzLm1ldGhvZDsKICAgICAgdmFyIHBhdGggPSB0aGlzLnBhdGg7CgogICAgICBpZiAobWV0aG9kICYmIHBhdGgpIHsKICAgICAgICBpZiAobWV0aG9kID09PSBJbWFnZS5NZXRob2QuTG9jYWwpIHJldHVybiAiIi5jb25jYXQoQXBpSG9zdC5vcmlnaW4sICIvIikuY29uY2F0KHBhdGgpOwogICAgICAgIGlmIChtZXRob2QgPT09IEltYWdlLk1ldGhvZC5MaW5rKSByZXR1cm4gcGF0aDsKCiAgICAgICAgaWYgKG1ldGhvZCA9PT0gSW1hZ2UuTWV0aG9kLlN0b3JhZ2VJbWFnZSkgewogICAgICAgICAgdmFyIHByZWZpeCA9ICIvYXBpL2ltYWdlL25hbWUvIjsKICAgICAgICAgIHZhciBuYW1lID0gcGF0aC5zdWJzdHJpbmcocHJlZml4Lmxlbmd0aCwgcGF0aC5sZW5ndGgpOwogICAgICAgICAgcmV0dXJuIEFwaUhvc3QuaW1nRmlsZS5uYW1lKG5hbWUsIHsKICAgICAgICAgICAgd2lkdGg6IHdpZHRoLAogICAgICAgICAgICBoZWlnaHQ6IGhlaWdodAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gIiI7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmV0Y2hDb2xvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2ZldGNoQ29sb3IgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHBhbGV0dGVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldENvbG9ycyh0aGlzLnRvVXJsKHsKICAgICAgICAgICAgICAgICAgd2lkdGg6IDIwCiAgICAgICAgICAgICAgICB9KSwgewogICAgICAgICAgICAgICAgICBjb3VudDogMQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHBhbGV0dGVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHBhbGV0dGVzWzBdKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGZldGNoQ29sb3IoKSB7CiAgICAgICAgcmV0dXJuIF9mZXRjaENvbG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmZXRjaENvbG9yOwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gSW1hZ2U7Cn0oKTsKCl9kZWZpbmVQcm9wZXJ0eShJbWFnZSwgIk1ldGhvZCIsIE1vZHVsZUltYWdlLk1ldGhvZCk7CgpleHBvcnQgZGVmYXVsdCBJbWFnZTs="},{"version":3,"sources":["C:/dev/freshnet-vue/src/items/Image.js"],"names":["ApiHost","ModuleImage","getColors","require","Image","data","method","path","strs","option","width","height","Method","Local","origin","Link","StorageImage","prefix","name","substring","length","imgFile","toUrl","count","palettes"],"mappings":";;;;;;;AAAA,OAAOA,OAAP,MAAoB,mBAApB;AACA,OAAOC,WAAP,MAAwB,iBAAxB;;AAEA,IAAMC,SAAS,GAAGC,OAAO,CAAC,kBAAD,CAAzB,C,CAA+C;;;IAEzCC,K;;;;;;;;;;;WAML,kBAASC,IAAT,EAAe;AACdA,MAAAA,IAAI,GAAG,IAAIJ,WAAJ,CAAgBI,IAAhB,CAAP;AACA,WAAKC,MAAL,GAAcD,IAAI,CAACC,MAAnB;AACA,WAAKC,IAAL,GAAYF,IAAI,CAACE,IAAjB;AACA,aAAO,IAAP;AACA;;;WACD,kBAAS;AACR,aAAO,IAAIN,WAAJ,CAAgB;AACtBK,QAAAA,MAAM,EAAE,KAAKA,MADS;AAEtBC,QAAAA,IAAI,EAAE,KAAKA;AAFW,OAAhB,CAAP;AAIA;;;WACD,iBAAQC,IAAR,EAAc;AACb,aAAO,CAAP;AACA;;;WACD,iBAAwC;AAAA,UAAlCC,MAAkC,uEAAzB;AAAEC,QAAAA,KAAK,EAAE,CAAT;AAAYC,QAAAA,MAAM,EAAE;AAApB,OAAyB;AACvC,0BAAgCF,MAAhC,CAAMC,KAAN;AAAA,UAAMA,KAAN,8BAAc,CAAd;AAAA,2BAAgCD,MAAhC,CAAiBE,MAAjB;AAAA,UAAiBA,MAAjB,+BAA0B,CAA1B;AACA,UAAIL,MAAM,GAAG,KAAKA,MAAlB;AACA,UAAIC,IAAI,GAAG,KAAKA,IAAhB;;AAEA,UAAID,MAAM,IAAIC,IAAd,EAAoB;AACnB,YAAID,MAAM,KAAKF,KAAK,CAACQ,MAAN,CAAaC,KAA5B,EAAmC,iBAAUb,OAAO,CAACc,MAAlB,cAA4BP,IAA5B;AACnC,YAAID,MAAM,KAAKF,KAAK,CAACQ,MAAN,CAAaG,IAA5B,EAAkC,OAAOR,IAAP;;AAClC,YAAID,MAAM,KAAKF,KAAK,CAACQ,MAAN,CAAaI,YAA5B,EAA0C;AACzC,cAAMC,MAAM,GAAG,kBAAf;AACA,cAAMC,IAAI,GAAGX,IAAI,CAACY,SAAL,CAAeF,MAAM,CAACG,MAAtB,EAA8Bb,IAAI,CAACa,MAAnC,CAAb;AACA,iBAAOpB,OAAO,CAACqB,OAAR,CAAgBH,IAAhB,CAAqBA,IAArB,EAA2B;AAAER,YAAAA,KAAK,EAALA,KAAF;AAASC,YAAAA,MAAM,EAANA;AAAT,WAA3B,CAAP;AACA;AACD;;AACD,aAAO,EAAP;AACA;;;;gFAED;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACwBT,SAAS,CAAC,KAAKoB,KAAL,CAAW;AAAEZ,kBAAAA,KAAK,EAAE;AAAT,iBAAX,CAAD,EAA4B;AAAEa,kBAAAA,KAAK,EAAE;AAAT,iBAA5B,CADjC;;AAAA;AACOC,gBAAAA,QADP;AAAA,iDAEQA,QAAQ,CAAC,CAAD,CAFhB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;;;gBAtCKpB,K,YACWH,WAAW,CAACW,M;;AA2C7B,eAAeR,KAAf","sourcesContent":["import ApiHost from \"@/host/ApiHost.js\";\r\nimport ModuleImage from \"./data/Image.js\";\r\n\r\nconst getColors = require(\"get-image-colors\"); // https://www.npmjs.com/package/get-image-colors\r\n\r\nclass Image {\r\n\tstatic Method = ModuleImage.Method;\r\n\r\n\tmethod;\r\n\tpath;\r\n\r\n\tfromData(data) {\r\n\t\tdata = new ModuleImage(data);\r\n\t\tthis.method = data.method;\r\n\t\tthis.path = data.path;\r\n\t\treturn this;\r\n\t}\r\n\ttoData() {\r\n\t\treturn new ModuleImage({\r\n\t\t\tmethod: this.method,\r\n\t\t\tpath: this.path,\r\n\t\t});\r\n\t}\r\n\ttoCount(strs) {\r\n\t\treturn 0;\r\n\t}\r\n\ttoUrl(option = { width: 0, height: 0 }) {\r\n\t\tlet { width = 0, height = 0 } = option;\r\n\t\tlet method = this.method;\r\n\t\tlet path = this.path;\r\n\r\n\t\tif (method && path) {\r\n\t\t\tif (method === Image.Method.Local) return `${ApiHost.origin}/${path}`;\r\n\t\t\tif (method === Image.Method.Link) return path;\r\n\t\t\tif (method === Image.Method.StorageImage) {\r\n\t\t\t\tconst prefix = \"/api/image/name/\";\r\n\t\t\t\tconst name = path.substring(prefix.length, path.length);\r\n\t\t\t\treturn ApiHost.imgFile.name(name, { width, height });\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tasync fetchColor() {\r\n\t\tconst palettes = await getColors(this.toUrl({ width: 20 }), { count: 1 });\r\n\t\treturn palettes[0];\r\n\t}\r\n}\r\n\r\nexport default Image;\r\n"]}]}