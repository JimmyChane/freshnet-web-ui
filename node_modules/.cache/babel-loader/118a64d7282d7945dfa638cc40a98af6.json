{"remainingRequest":"C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\development\\freshnet-v2\\vue\\src\\stores\\components\\Processor.js","dependencies":[{"path":"C:\\development\\freshnet-v2\\vue\\src\\stores\\components\\Processor.js","mtime":1663674576173},{"path":"C:\\development\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxkZWZpbmVQcm9wZXJ0eS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwoKdmFyIFByb2Nlc3NvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUHJvY2Vzc29yKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb2Nlc3Nvcik7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJsb2FkaW5ncyIsIFtdKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInF1ZXVlcyIsIFtdKTsKICB9CgogIF9jcmVhdGVDbGFzcyhQcm9jZXNzb3IsIFt7CiAgICBrZXk6ICJhY3F1aXJlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhY3F1aXJlKGtleSwgY2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIHJ1biA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICAgICAgdmFyIHJlc3VsdCwgaW5kZXgsIF9pbmRleDsKCiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzTG9hZGluZyhrZXkpKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgc2V0VGltZW91dChydW4sIDIwMCkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmdzLnB1c2goa2V5KTsKCiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7CgogICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgICBpbmRleCA9IF90aGlzLmxvYWRpbmdzLmluZGV4T2Yoa2V5KTsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkgX3RoaXMubG9hZGluZ3Muc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgICAgICBfaW5kZXggPSBfdGhpcy5sb2FkaW5ncy5pbmRleE9mKGtleSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKF9pbmRleCA+IC0xKSBfdGhpcy5sb2FkaW5ncy5zcGxpY2UoX2luZGV4LCAxKTsKICAgICAgICAgICAgICAgICAgICByZWplY3QoX2NvbnRleHQudDApOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1szLCAxMl1dKTsKICAgICAgICAgIH0pKTsKCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gcnVuKCkgewogICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KCk7CgogICAgICAgIHJ1bigpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0xvYWRpbmciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzTG9hZGluZyhrZXkpIHsKICAgICAgaWYgKHR5cGVvZiBrZXkgIT09ICJzdHJpbmciKSByZXR1cm4gdGhpcy5sb2FkaW5ncy5sZW5ndGggPiAwOwogICAgICByZXR1cm4gISF0aGlzLmxvYWRpbmdzLmZpbmQoZnVuY3Rpb24gKGxvYWRpbmcpIHsKICAgICAgICByZXR1cm4gbG9hZGluZyA9PT0ga2V5OwogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBQcm9jZXNzb3I7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IFByb2Nlc3Nvcjs="},{"version":3,"sources":["C:/development/freshnet-v2/vue/src/stores/components/Processor.js"],"names":["Processor","key","callback","Promise","resolve","reject","run","isLoading","setTimeout","loadings","push","result","index","indexOf","splice","length","find","loading"],"mappings":";;;;;;;;;IAAMA,S;AAKH,uBAAc;AAAA;;AAAA,sCAJH,EAIG;;AAAA,oCAFL,EAEK;AAAE;;;;WAEhB,iBAAQC,GAAR,EAAaC,QAAb,EAAuB;AAAA;;AACpB,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACrC,YAAMC,GAAG;AAAA,6EAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,yBACL,KAAI,CAACC,SAAL,CAAeN,GAAf,CADK;AAAA;AAAA;AAAA;;AAAA,qDACuBO,UAAU,CAACF,GAAD,EAAM,GAAN,CADjC;;AAAA;AAGT,oBAAA,KAAI,CAACG,QAAL,CAAcC,IAAd,CAAmBT,GAAnB;;AAHS;AAAA;AAAA,2BAKeC,QAAQ,EALvB;;AAAA;AAKAS,oBAAAA,MALA;AAMAC,oBAAAA,KANA,GAMQ,KAAI,CAACH,QAAL,CAAcI,OAAd,CAAsBZ,GAAtB,CANR;AAON,wBAAIW,KAAK,GAAG,CAAC,CAAb,EAAgB,KAAI,CAACH,QAAL,CAAcK,MAAd,CAAqBF,KAArB,EAA4B,CAA5B;AAChBR,oBAAAA,OAAO,CAACO,MAAD,CAAP;AARM;AAAA;;AAAA;AAAA;AAAA;AAUAC,oBAAAA,MAVA,GAUQ,KAAI,CAACH,QAAL,CAAcI,OAAd,CAAsBZ,GAAtB,CAVR;AAWN,wBAAIW,MAAK,GAAG,CAAC,CAAb,EAAgB,KAAI,CAACH,QAAL,CAAcK,MAAd,CAAqBF,MAArB,EAA4B,CAA5B;AAChBP,oBAAAA,MAAM,aAAN;;AAZM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAH;;AAAA,0BAAHC,GAAG;AAAA;AAAA;AAAA,WAAT;;AAeAA,QAAAA,GAAG;AACL,OAjBM,CAAP;AAkBF;;;WAED,mBAAUL,GAAV,EAAe;AACZ,UAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B,OAAO,KAAKQ,QAAL,CAAcM,MAAd,GAAuB,CAA9B;AAC7B,aAAO,CAAC,CAAC,KAAKN,QAAL,CAAcO,IAAd,CAAmB,UAACC,OAAD;AAAA,eAAaA,OAAO,KAAKhB,GAAzB;AAAA,OAAnB,CAAT;AACF;;;;;;AAGJ,eAAeD,SAAf","sourcesContent":["class Processor {\r\n   loadings = [];\r\n\r\n   queues = [];\r\n\r\n   constructor() {}\r\n\r\n   acquire(key, callback) {\r\n      return new Promise((resolve, reject) => {\r\n         const run = async () => {\r\n            if (this.isLoading(key)) return setTimeout(run, 200);\r\n\r\n            this.loadings.push(key);\r\n            try {\r\n               const result = await callback();\r\n               const index = this.loadings.indexOf(key);\r\n               if (index > -1) this.loadings.splice(index, 1);\r\n               resolve(result);\r\n            } catch (error) {\r\n               const index = this.loadings.indexOf(key);\r\n               if (index > -1) this.loadings.splice(index, 1);\r\n               reject(error);\r\n            }\r\n         };\r\n         run();\r\n      });\r\n   }\r\n\r\n   isLoading(key) {\r\n      if (typeof key !== \"string\") return this.loadings.length > 0;\r\n      return !!this.loadings.find((loading) => loading === key);\r\n   }\r\n}\r\n\r\nexport default Processor;\r\n"]}]}