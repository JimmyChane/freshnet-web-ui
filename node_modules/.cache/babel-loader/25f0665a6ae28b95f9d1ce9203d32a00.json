{"remainingRequest":"C:\\development\\freshnet-v2\\vue\\node_modules\\thread-loader\\dist\\cjs.js!C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\development\\freshnet-v2\\vue\\src\\items\\Product.js","dependencies":[{"path":"C:\\development\\freshnet-v2\\vue\\src\\items\\Product.js","mtime":1663416193323},{"path":"C:\\development\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1662650934417},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFx0eXBlb2YuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX2NsYXNzUHJpdmF0ZU1ldGhvZEluaXRTcGVjIGZyb20gIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWMuanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgX2NsYXNzUHJpdmF0ZU1ldGhvZEdldCBmcm9tICJDOlxcZGV2ZWxvcG1lbnRcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNsYXNzUHJpdmF0ZU1ldGhvZEdldC5qcyI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICJDOlxcZGV2ZWxvcG1lbnRcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcY2xhc3NDYWxsQ2hlY2suanMiOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgX2NsYXNzU3RhdGljUHJpdmF0ZUZpZWxkU3BlY0dldCBmcm9tICJDOlxcZGV2ZWxvcG1lbnRcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNsYXNzU3RhdGljUHJpdmF0ZUZpZWxkU3BlY0dldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLndlYWstc2V0LmpzIjsKaW1wb3J0IE1vZHVsZVByb2R1Y3QgZnJvbSAiQC8uLi8uLi9leHByZXNzL2RhdGFfc3RydWN0dXJlcy9Qcm9kdWN0LmpzIjsKaW1wb3J0IE1vZHVsZVN0b2NrIGZyb20gIkAvLi4vLi4vZXhwcmVzcy9kYXRhX3N0cnVjdHVyZXMvUHJvZHVjdFN0b2NrLmpzIjsKaW1wb3J0IE1vZHVsZUJ1bmRsZSBmcm9tICJALy4uLy4uL2V4cHJlc3MvZGF0YV9zdHJ1Y3R1cmVzL1Byb2R1Y3RCdW5kbGUuanMiOwppbXBvcnQgSW1hZ2UgZnJvbSAiLi9JbWFnZS5qcyI7CmltcG9ydCBCcmFuZCBmcm9tICIuL0JyYW5kLmpzIjsKaW1wb3J0IENhdGVnb3J5IGZyb20gIi4vQ2F0ZWdvcnkuanMiOwppbXBvcnQgUHJvZHVjdFNwZWNUeXBlIGZyb20gIi4vUHJvZHVjdFNwZWNUeXBlLmpzIjsKaW1wb3J0IFByb2R1Y3RTcGVjQ29udGVudCBmcm9tICIuL1Byb2R1Y3RTcGVjQ29udGVudC5qcyI7CmltcG9ydCBQcm9kdWN0UHJpY2UgZnJvbSAiLi9Qcm9kdWN0UHJpY2UuanMiOwppbXBvcnQgSXRlbVNlYXJjaGVyIGZyb20gIi4vSXRlbVNlYXJjaGVyLmpzIjsKdmFyIHRleHRDb250YWlucyA9IEl0ZW1TZWFyY2hlci50ZXh0Q29udGFpbnM7Cgp2YXIgUHJvZHVjdFVpID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBQcm9kdWN0VWkoaXRlbSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb2R1Y3RVaSk7CgogICAgdGhpcy5pdGVtID0gaXRlbTsKICB9CgogIF9jcmVhdGVDbGFzcyhQcm9kdWN0VWksIFt7CiAgICBrZXk6ICJzdG9ja0xhYmVscyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3RvY2tMYWJlbHMoKSB7CiAgICAgIHZhciBsYWJlbHMgPSBbXTsKICAgICAgaWYgKHRoaXMuaXRlbS5pc1ByaWNlUHJvbW90aW9uKCkpIGxhYmVscy5wdXNoKHsKICAgICAgICBuYW1lOiAicHJvbW90aW9uIiwKICAgICAgICB0ZXh0OiAiUHJvbW90aW9uIiwKICAgICAgICBjb2xvcjogIiNGRjhBMDAiCiAgICAgIH0pOwogICAgICBpZiAoIXRoaXMuaXRlbS5pc1N0b2NrQXZhaWxhYmxlKCkpIGxhYmVscy5wdXNoKHsKICAgICAgICBuYW1lOiAib3V0T2ZTdG9jayIsCiAgICAgICAgdGV4dDogIk91dCBvZiBTdG9jayIsCiAgICAgICAgY29sb3I6ICIjRkY0QjMzIgogICAgICB9KTsKICAgICAgaWYgKHRoaXMuaXRlbS5pc1N0b2NrU2Vjb25kSGFuZCgpKSBsYWJlbHMucHVzaCh7CiAgICAgICAgbmFtZTogInNlY29uZEhhbmQiLAogICAgICAgIHRleHQ6ICJTZWNvbmQgSGFuZCIsCiAgICAgICAgY29sb3I6ICIjMjQ5Njk2IgogICAgICB9KTsKICAgICAgcmV0dXJuIGxhYmVsczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzcGVjTGFiZWxzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzcGVjTGFiZWxzKCkgewogICAgICB2YXIgc3BlY2lmaWNhdGlvbnMgPSB0aGlzLml0ZW0uc3BlY2lmaWNhdGlvbnM7CiAgICAgIHJldHVybiBzcGVjaWZpY2F0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW1TcGVjKSB7CiAgICAgICAgdmFyIF9pdGVtU3BlYyR0eXBlOwoKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoX2NsYXNzU3RhdGljUHJpdmF0ZUZpZWxkU3BlY0dldChQcm9kdWN0VWksIFByb2R1Y3RVaSwgX3NwZWMpKS5pbmNsdWRlcyhpdGVtU3BlYyA9PT0gbnVsbCB8fCBpdGVtU3BlYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtU3BlYyR0eXBlID0gaXRlbVNwZWMudHlwZSkgPT09IG51bGwgfHwgX2l0ZW1TcGVjJHR5cGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtU3BlYyR0eXBlLmtleSk7CiAgICAgIH0pLm1hcChmdW5jdGlvbiAoaXRlbVNwZWMpIHsKICAgICAgICB2YXIgY29tcGFyZXMgPSBfY2xhc3NTdGF0aWNQcml2YXRlRmllbGRTcGVjR2V0KFByb2R1Y3RVaSwgUHJvZHVjdFVpLCBfc3BlYylbaXRlbVNwZWMudHlwZS5rZXldOwoKICAgICAgICB2YXIgY29udGVudCA9IGl0ZW1TcGVjLmNvbnRlbnQudG9Mb3dlckNhc2UoKTsKCiAgICAgICAgaWYgKGl0ZW1TcGVjLnR5cGUua2V5ID09PSBQcm9kdWN0U3BlY1R5cGUuS2V5LlByb2Nlc3NvciB8fCBpdGVtU3BlYy50eXBlLmtleSA9PT0gUHJvZHVjdFNwZWNUeXBlLktleS5SYW0gfHwgaXRlbVNwZWMudHlwZS5rZXkgPT09IFByb2R1Y3RTcGVjVHlwZS5LZXkuU3RvcmFnZSkgewogICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfT2JqZWN0JGtleXMgPSBPYmplY3Qua2V5cyhjb21wYXJlcyk7IF9pIDwgX09iamVjdCRrZXlzLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICB2YXIgY29tcGFyZVR5cGUgPSBfT2JqZWN0JGtleXNbX2ldOwoKICAgICAgICAgICAgaWYgKCFjb250ZW50LmluY2x1ZGVzKGNvbXBhcmVUeXBlKSkgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoY29tcGFyZXNbY29tcGFyZVR5cGVdKSwKICAgICAgICAgICAgICAgIF9zdGVwOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgdmFyIGNvbXBhcmUgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5pbmNsdWRlcyhjb21wYXJlKSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICIiLmNvbmNhdChjb21wYXJlVHlwZSkuY29uY2F0KGNvbXBhcmUpLAogICAgICAgICAgICAgICAgICAgIHRleHQ6ICIiLmNvbmNhdChjb21wYXJlVHlwZSwgIiAiKS5jb25jYXQoY29tcGFyZSkudG9VcHBlckNhc2UoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogX2NsYXNzU3RhdGljUHJpdmF0ZUZpZWxkU3BlY0dldChQcm9kdWN0VWksIFByb2R1Y3RVaSwgX2NvbG9yKVtpdGVtU3BlYy50eXBlLmtleV0KICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGl0ZW1TcGVjLnR5cGUua2V5ID09PSBQcm9kdWN0U3BlY1R5cGUuS2V5LlNpemUpIHsKICAgICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoY29tcGFyZXMpLAogICAgICAgICAgICAgIF9zdGVwMjsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICAgIHZhciBfY29tcGFyZSA9IF9zdGVwMi52YWx1ZTsKCiAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoX2NvbXBhcmUpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICBuYW1lOiBfY29tcGFyZSwKICAgICAgICAgICAgICAgICAgdGV4dDogIiIuY29uY2F0KF9jb21wYXJlLCAiXCIiKSwKICAgICAgICAgICAgICAgICAgY29sb3I6IF9jbGFzc1N0YXRpY1ByaXZhdGVGaWVsZFNwZWNHZXQoUHJvZHVjdFVpLCBQcm9kdWN0VWksIF9jb2xvcilbaXRlbVNwZWMudHlwZS5rZXldCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChpdGVtU3BlYy50eXBlLmtleSA9PT0gUHJvZHVjdFNwZWNUeXBlLktleS5SZXNvbHV0aW9uIHx8IGl0ZW1TcGVjLnR5cGUua2V5ID09PSBQcm9kdWN0U3BlY1R5cGUuS2V5LkRpc3BsYXkpIHsKICAgICAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoY29tcGFyZXMpLAogICAgICAgICAgICAgIF9zdGVwMzsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgICAgIHZhciBfY29tcGFyZTIgPSBfc3RlcDMudmFsdWU7CgogICAgICAgICAgICAgIGlmIChjb250ZW50LmluY2x1ZGVzKF9jb21wYXJlMikpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIG5hbWU6IF9jb21wYXJlMiwKICAgICAgICAgICAgICAgICAgdGV4dDogIiIuY29uY2F0KF9jb21wYXJlMikudG9VcHBlckNhc2UoKSwKICAgICAgICAgICAgICAgICAgY29sb3I6IF9jbGFzc1N0YXRpY1ByaXZhdGVGaWVsZFNwZWNHZXQoUHJvZHVjdFVpLCBQcm9kdWN0VWksIF9jb2xvcilbaXRlbVNwZWMudHlwZS5rZXldCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2l0ZXJhdG9yMy5mKCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoaXRlbVNwZWMudHlwZS5rZXkgPT09IFByb2R1Y3RTcGVjVHlwZS5LZXkuR3JhcGhpYykgewogICAgICAgICAgdmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihjb21wYXJlcy5tYXAoZnVuY3Rpb24gKGNvbXBhcmUpIHsKICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmU7CiAgICAgICAgICB9KS5yZXZlcnNlKCkpLAogICAgICAgICAgICAgIF9zdGVwNDsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICAgICAgICAgIHZhciBfY29tcGFyZTMgPSBfc3RlcDQudmFsdWU7CgogICAgICAgICAgICAgIGlmIChjb250ZW50LmluY2x1ZGVzKF9jb21wYXJlMykpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIG5hbWU6IF9jb21wYXJlMywKICAgICAgICAgICAgICAgICAgdGV4dDogIiIuY29uY2F0KF9jb21wYXJlMykudG9VcHBlckNhc2UoKSwKICAgICAgICAgICAgICAgICAgY29sb3I6IF9jbGFzc1N0YXRpY1ByaXZhdGVGaWVsZFNwZWNHZXQoUHJvZHVjdFVpLCBQcm9kdWN0VWksIF9jb2xvcilbaXRlbVNwZWMudHlwZS5rZXldCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjQuZShlcnIpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2l0ZXJhdG9yNC5mKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW1TcGVjKSB7CiAgICAgICAgcmV0dXJuIGl0ZW1TcGVjOwogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBQcm9kdWN0VWk7Cn0oKTsKCnZhciBfc3BlYyA9IHsKICB3cml0YWJsZTogdHJ1ZSwKICB2YWx1ZTogewogICAgcHJvY2Vzc29yOiB7CiAgICAgIGludGVsOiBbImk5IiwgImk3IiwgImk1IiwgImkzIiwgImNlbGVyb24iLCAicGVudGl1bSJdLAogICAgICBhbWQ6IFsicnl6ZW4gNyIsICJyeXplbiA1IiwgInJ5emVuIDMiLCAiYWx0aG9uIHNpbHZlciJdCiAgICB9LAogICAgcmFtOiB7CiAgICAgIGRkcjM6IFsiMTZnYiIsICI4Z2IiLCAiN2diIiwgIjZnYiIsICI1Z2IiLCAiNGdiIiwgIjNnYiIsICIyZ2IiXSwKICAgICAgZGRyNDogWyIxNmdiIiwgIjhnYiIsICI3Z2IiLCAiNmdiIiwgIjVnYiIsICI0Z2IiLCAiM2diIiwgIjJnYiJdCiAgICB9LAogICAgc2l6ZTogWyIxNS42IiwgIjE0IiwgIjEzIiwgIjEzLjEiLCAiMTEuNSJdLAogICAgcmVzb2x1dGlvbjogWyJmdWxsIGhkIiwgImZoZCIsICJoZCJdLAogICAgZGlzcGxheTogWyJmdWxsIGhkIiwgImZoZCIsICJoZCJdLAogICAgc3RvcmFnZTogewogICAgICBzc2Q6IFsiMXRiIiwgIjEwMDBnYiIsICI1MTJnYiIsICI0ODBnYiIsICIyNTZnYiIsICIyNDBnYiIsICIxMjhnYiIsICIxMjBnYiJdLAogICAgICBoZGQ6IFsiNHRiIiwgIjQwMDBnYiIsICIydGIiLCAiMjAwMGdiIiwgIjF0YiIsICIxMDAwZ2IiLCAiNjQwZ2IiLCAiNTAwZ2IiLCAiMzIwZ2IiLCAiMjUwZ2IiXQogICAgfSwKICAgIGdyYXBoaWM6IFsiaW50ZWwgaGQiLCAiaW50ZWwgdWhkIiwgImludGVsIGlyaXMgeGUiLCAiaW50ZWwgaXJpcyBwbHVzIiwgIm52aWRpYSBnZWZvcmNlIGd0eCIsICJudmlkaWEgZ2Vmb3JjZSBydHgiLCAibnZpZGlhIGd0eCIsICJudmlkaWEgcnR4IiwgImFtZCByYWRlb24iXQogIH0KfTsKdmFyIF9jb2xvciA9IHsKICB3cml0YWJsZTogdHJ1ZSwKICB2YWx1ZTogewogICAgcHJvY2Vzc29yOiAiIzI3NkVCMCIsCiAgICByYW06ICIjMjQ5Njk2IiwKICAgIHNpemU6ICIjM0I5NTExIiwKICAgIHJlc29sdXRpb246ICIjQTExMzU3IiwKICAgIGRpc3BsYXk6ICIjQTExMzU3IiwKICAgIHN0b3JhZ2U6ICIjMjc2RUIwIgogIH0KfTsKCnZhciBfY29tcGFyZUF2YWlsYWJsZSA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha1NldCgpOwoKdmFyIF9jb21wYXJlSW1hZ2UgPSAvKiNfX1BVUkVfXyovbmV3IFdlYWtTZXQoKTsKCnZhciBfY29tcGFyZVByb21vdGlvbnMgPSAvKiNfX1BVUkVfXyovbmV3IFdlYWtTZXQoKTsKCnZhciBfY29tcGFyZVByaWNlcyA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha1NldCgpOwoKdmFyIF9jb21wYXJlU2Vjb25kSGFuZCA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha1NldCgpOwoKdmFyIFByb2R1Y3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFByb2R1Y3QoX2lkKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvZHVjdCk7CgogICAgX2NsYXNzUHJpdmF0ZU1ldGhvZEluaXRTcGVjKHRoaXMsIF9jb21wYXJlU2Vjb25kSGFuZCk7CgogICAgX2NsYXNzUHJpdmF0ZU1ldGhvZEluaXRTcGVjKHRoaXMsIF9jb21wYXJlUHJpY2VzKTsKCiAgICBfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWModGhpcywgX2NvbXBhcmVQcm9tb3Rpb25zKTsKCiAgICBfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWModGhpcywgX2NvbXBhcmVJbWFnZSk7CgogICAgX2NsYXNzUHJpdmF0ZU1ldGhvZEluaXRTcGVjKHRoaXMsIF9jb21wYXJlQXZhaWxhYmxlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInN0b2NrIiwgTW9kdWxlU3RvY2sudHJpbSh7fSkpOwoKICAgIHRoaXMuZGF0YSA9IHsKICAgICAgX2lkOiBfaWQKICAgIH07CiAgfQoKICBfY3JlYXRlQ2xhc3MoUHJvZHVjdCwgW3sKICAgIGtleTogImNvbXBhcmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBhcmUoaXRlbSkgewogICAgICB2YXIgdmFsdWUgPSAwOwogICAgICBpZiAoIXZhbHVlKSB2YWx1ZSA9IF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX2NvbXBhcmVBdmFpbGFibGUsIF9jb21wYXJlQXZhaWxhYmxlMikuY2FsbCh0aGlzLCBpdGVtKTsKICAgICAgaWYgKCF2YWx1ZSkgdmFsdWUgPSBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9jb21wYXJlUHJvbW90aW9ucywgX2NvbXBhcmVQcm9tb3Rpb25zMikuY2FsbCh0aGlzLCBpdGVtKTsKICAgICAgaWYgKCF2YWx1ZSkgdmFsdWUgPSBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9jb21wYXJlU2Vjb25kSGFuZCwgX2NvbXBhcmVTZWNvbmRIYW5kMikuY2FsbCh0aGlzLCBpdGVtKTsKICAgICAgaWYgKCF2YWx1ZSkgdmFsdWUgPSBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9jb21wYXJlSW1hZ2UsIF9jb21wYXJlSW1hZ2UyKS5jYWxsKHRoaXMsIGl0ZW0pOwogICAgICBpZiAoIXZhbHVlKSB2YWx1ZSA9IF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX2NvbXBhcmVQcmljZXMsIF9jb21wYXJlUHJpY2VzMikuY2FsbCh0aGlzLCBpdGVtKTsKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogIH0sIHsKICAgIGtleTogInNlYXJjaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKHRleHQpIHsKICAgICAgdmFyIHJlc3VsdCA9IHsKICAgICAgICBrZXl3b3JkOiB0ZXh0LAogICAgICAgIHNwbGl0ZWRLZXl3b3JkczogdHlwZW9mIHRleHQgPT0gInN0cmluZyIgPyB0ZXh0LnRvTG93ZXJDYXNlKCkuc3BsaXQoL1tccyxdKy8pLmZpbHRlcihmdW5jdGlvbiAodGV4dCkgewogICAgICAgICAgcmV0dXJuIHRleHQ7CiAgICAgICAgfSkgOiBbXSwKICAgICAgICBpdGVtOiB0aGlzLAogICAgICAgIHByaWNlTWF0Y2hlZENvdW50OiBmdW5jdGlvbiBwcmljZU1hdGNoZWRDb3VudCgpIHsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0sCiAgICAgICAgbWF0Y2hlZENvdW50OiBmdW5jdGlvbiBtYXRjaGVkQ291bnQoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtLnNlYXJjaF92Mih0aGlzLnNwbGl0ZWRLZXl3b3Jkcyk7CiAgICAgICAgfQogICAgICB9OwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogInNlYXJjaF92MiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoX3YyKHRleHRzKSB7CiAgICAgIHZhciBicmFuZCA9IHRoaXMuYnJhbmQsCiAgICAgICAgICBjYXRlZ29yeSA9IHRoaXMuY2F0ZWdvcnksCiAgICAgICAgICBzcGVjaWZpY2F0aW9ucyA9IHRoaXMuc3BlY2lmaWNhdGlvbnM7CiAgICAgIHZhciBjb3VudCA9IDA7CgogICAgICB2YXIgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRleHRzKSwKICAgICAgICAgIF9zdGVwNTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I1LnMoKTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciB0ZXh0ID0gX3N0ZXA1LnZhbHVlOwogICAgICAgICAgY291bnQgKz0gdGV4dENvbnRhaW5zKCJwcm9kdWN0IiwgdGV4dCkgPyAxIDogMDsKICAgICAgICAgIGNvdW50ICs9IHRleHRDb250YWlucyh0aGlzLnRpdGxlLCB0ZXh0KSA/IDEgOiAwOwogICAgICAgICAgY291bnQgKz0gdGV4dENvbnRhaW5zKHRoaXMuZGVzY3JpcHRpb24sIHRleHQpID8gMSA6IDA7CiAgICAgICAgICBjb3VudCArPSBicmFuZCAmJiB0ZXh0Q29udGFpbnMoYnJhbmQudGl0bGUsIHRleHQpID8gMSA6IDA7CiAgICAgICAgICBjb3VudCArPSBjYXRlZ29yeSAmJiB0ZXh0Q29udGFpbnMoY2F0ZWdvcnkudGl0bGUsIHRleHQpID8gMSA6IDA7CgogICAgICAgICAgdmFyIF9pdGVyYXRvcjYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihzcGVjaWZpY2F0aW9ucyksCiAgICAgICAgICAgICAgX3N0ZXA2OwoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNi5zKCk7ICEoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgdmFyIHNwZWNDb250ZW50ID0gX3N0ZXA2LnZhbHVlOwogICAgICAgICAgICAgIHZhciB0eXBlID0gc3BlY0NvbnRlbnQudHlwZSwKICAgICAgICAgICAgICAgICAgY29udGVudCA9IHNwZWNDb250ZW50LmNvbnRlbnQ7CiAgICAgICAgICAgICAgY291bnQgKz0gdHlwZSAmJiB0ZXh0Q29udGFpbnModHlwZS50aXRsZSwgdGV4dCkgPyAxIDogMDsKICAgICAgICAgICAgICBjb3VudCArPSB0ZXh0Q29udGFpbnMoY29udGVudCwgdGV4dCkgPyAxIDogMDsKICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjYuZShlcnIpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2l0ZXJhdG9yNi5mKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I1LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I1LmYoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNvdW50OwogICAgfQogIH0sIHsKICAgIGtleTogInVpIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1aSgpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9kdWN0VWkodGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNQcmljZVByb21vdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNQcmljZVByb21vdGlvbigpIHsKICAgICAgdmFyIHByaWNlID0gdGhpcy5nZXRQcmljZSgpOwogICAgICBpZiAoIXByaWNlKSByZXR1cm4gZmFsc2U7CiAgICAgIHZhciBub3JtYWxWYWx1ZSA9IHByaWNlLm5vcm1hbCA/IHByaWNlLm5vcm1hbC5nZXRWYWx1ZSgpIDogMDsKICAgICAgdmFyIHByb21vdGlvblZhbHVlID0gcHJpY2Uubm9ybWFsID8gcHJpY2UucHJvbW90aW9uLmdldFZhbHVlKCkgOiAwOwogICAgICByZXR1cm4gbm9ybWFsVmFsdWUgPiAwICYmIHByb21vdGlvblZhbHVlID4gMCAmJiBub3JtYWxWYWx1ZSA+IHByb21vdGlvblZhbHVlOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFN0b2NrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTdG9jaygpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RvY2s7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNTdG9ja0F2YWlsYWJsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNTdG9ja0F2YWlsYWJsZSgpIHsKICAgICAgdmFyIHN0b2NrID0gdGhpcy5zdG9jazsKICAgICAgcmV0dXJuIHN0b2NrID8gc3RvY2suaXNBdmFpbGFibGUgOiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImlzU3RvY2tTZWNvbmRIYW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc1N0b2NrU2Vjb25kSGFuZCgpIHsKICAgICAgdmFyIHN0b2NrID0gdGhpcy5zdG9jazsKICAgICAgcmV0dXJuIHN0b2NrID8gc3RvY2suaXNTZWNvbmRIYW5kIDogZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0SWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldElkKCkgewogICAgICByZXR1cm4gdGhpcy5kYXRhLl9pZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRUaXRsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGl0bGUoKSB7CiAgICAgIHJldHVybiB0aGlzLmRhdGEudGl0bGU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0QnJhbmRJZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QnJhbmRJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuZGF0YS5icmFuZElkOwogICAgfQogIH0sIHsKICAgIGtleTogImdldENhdGVnb3J5SWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENhdGVnb3J5SWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRhdGEuY2F0ZWdvcnlJZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXREZXNjcmlwdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmRhdGEuZGVzY3JpcHRpb247CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0UHJpY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFByaWNlKCkgewogICAgICByZXR1cm4gdGhpcy5kYXRhLnByaWNlOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEltYWdlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW1hZ2VzKCkgewogICAgICByZXR1cm4gdGhpcy5kYXRhLmltYWdlcy5tYXAoZnVuY3Rpb24gKGltYWdlKSB7CiAgICAgICAgcmV0dXJuIGltYWdlOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRJbWFnZVRodW1ibmFpbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW1hZ2VUaHVtYm5haWwoKSB7CiAgICAgIHJldHVybiB0aGlzLmltYWdlcy5sZW5ndGggPyB0aGlzLmltYWdlc1swXSA6IG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0U3BlY2lmaWNhdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNwZWNpZmljYXRpb25zKCkgewogICAgICByZXR1cm4gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuZGF0YS5zcGVjaWZpY2F0aW9ucyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0R2lmdHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEdpZnRzKCkgewogICAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh0aGlzLmRhdGEuZ2lmdHMpID8gdGhpcy5kYXRhLmdpZnRzLm1hcChmdW5jdGlvbiAoZ2lmdCkgewogICAgICAgIHJldHVybiBnaWZ0OwogICAgICB9KSA6IFtdOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEJ1bmRsZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEJ1bmRsZXMoKSB7CiAgICAgIHJldHVybiAoQXJyYXkuaXNBcnJheSh0aGlzLmRhdGEuYnVuZGxlcykgPyB0aGlzLmRhdGEuYnVuZGxlcyA6IFtdKS5tYXAoZnVuY3Rpb24gKGJ1bmRsZSkgewogICAgICAgIHJldHVybiBidW5kbGU7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFRpdGxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUaXRsZSgpIHsKICAgICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICIiOwogICAgICB0aGlzLmRhdGEudGl0bGUgPSB0eXBlb2YgZGF0YSA9PSAic3RyaW5nIiA/IGRhdGEudHJpbSgpIDogIiI7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0QnJhbmRJZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QnJhbmRJZChicmFuZElkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmRhdGEuYnJhbmRJZCA9IGJyYW5kSWQ7CiAgICAgIFByb2R1Y3QuQnJhbmRTdG9yZS5kaXNwYXRjaCgiZ2V0SXRlbXMiKS50aGVuKGZ1bmN0aW9uIChicmFuZHMpIHsKICAgICAgICBfdGhpcy5kYXRhLmJyYW5kID0gYnJhbmRzLmZpbmQoZnVuY3Rpb24gKGJyYW5kKSB7CiAgICAgICAgICByZXR1cm4gYnJhbmQuX2lkID09PSBicmFuZElkOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRDYXRlZ29yeUlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDYXRlZ29yeUlkKGNhdGVnb3J5SWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmRhdGEuY2F0ZWdvcnlJZCA9IGNhdGVnb3J5SWQ7CiAgICAgIFByb2R1Y3QuUHJvZHVjdFN0b3JlLmRpc3BhdGNoKCJnZXRQcm9kdWN0Q2F0ZWdvcnlCeUNhdGVnb3J5SUQiLCB7CiAgICAgICAgaWQ6IGNhdGVnb3J5SWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAoY2F0ZWdvcnkpIHsKICAgICAgICBfdGhpczIuZGF0YS5jYXRlZ29yeSA9IGNhdGVnb3J5OwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXREZXNjcmlwdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGVzY3JpcHRpb24oKSB7CiAgICAgIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAiIjsKICAgICAgdGhpcy5kYXRhLmRlc2NyaXB0aW9uID0gdHlwZW9mIGRhdGEgPT0gInN0cmluZyIgPyBkYXRhLnRyaW0oKSA6ICIiOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFByaWNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRQcmljZShwcmljZSkgewogICAgICB2YXIgX3JlZiA9IHByaWNlID8gcHJpY2UgOiB7fSwKICAgICAgICAgIG5vcm1hbCA9IF9yZWYubm9ybWFsLAogICAgICAgICAgcHJvbW90aW9uID0gX3JlZi5wcm9tb3Rpb247CgogICAgICB0aGlzLmRhdGEucHJpY2UgPSB7CiAgICAgICAgbm9ybWFsOiBQcm9kdWN0UHJpY2UucGFyc2VTdHJpbmcobm9ybWFsID8gbm9ybWFsLnRvU3RyaW5nKCkgOiAiIiksCiAgICAgICAgcHJvbW90aW9uOiBQcm9kdWN0UHJpY2UucGFyc2VTdHJpbmcocHJvbW90aW9uID8gcHJvbW90aW9uLnRvU3RyaW5nKCkgOiAiIikKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRJbWFnZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEltYWdlcyhpbWFnZXMpIHsKICAgICAgdGhpcy5kYXRhLmltYWdlcyA9IGltYWdlcy5maWx0ZXIoZnVuY3Rpb24gKGltYWdlKSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiBpbWFnZS5tZXRob2QgPT09ICJzdHJpbmciICYmIHR5cGVvZiBpbWFnZS5wYXRoID09PSAic3RyaW5nIjsKICAgICAgfSkubWFwKGZ1bmN0aW9uIChpbWFnZSkgewogICAgICAgIHJldHVybiBJbWFnZS5pbXBvcnREYXRhKHsKICAgICAgICAgIG1ldGhvZDogaW1hZ2UubWV0aG9kLAogICAgICAgICAgcGF0aDogaW1hZ2UucGF0aAogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhZGRJbWFnZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEltYWdlcyhpbWFnZXMpIHsKICAgICAgdmFyIF90aGlzJGRhdGEkaW1hZ2VzOwoKICAgICAgKF90aGlzJGRhdGEkaW1hZ2VzID0gdGhpcy5kYXRhLmltYWdlcykucHVzaC5hcHBseShfdGhpcyRkYXRhJGltYWdlcywgX3RvQ29uc3VtYWJsZUFycmF5KGltYWdlcy5tYXAoZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gSW1hZ2UuaW1wb3J0RGF0YShkYXRhKTsKICAgICAgfSkpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW1vdmVJbWFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlSW1hZ2UoaW1hZ2UpIHsKICAgICAgdGhpcy5kYXRhLmltYWdlcyA9IHRoaXMuZGF0YS5pbWFnZXMuZmlsdGVyKGZ1bmN0aW9uICh0aGlzSW1hZ2UpIHsKICAgICAgICByZXR1cm4gdGhpc0ltYWdlLnBhdGggIT09IGltYWdlLnBhdGg7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFNwZWNpZmljYXRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTcGVjaWZpY2F0aW9ucygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgc3BlY2lmaWNhdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwogICAgICBpZiAoUHJvZHVjdFNwZWNDb250ZW50LlNwZWNpZmljYXRpb25TdG9yZSA9PT0gbnVsbCkgUHJvZHVjdFNwZWNDb250ZW50LlNwZWNpZmljYXRpb25TdG9yZSA9IFByb2R1Y3QuU3BlY2lmaWNhdGlvblN0b3JlOwogICAgICB0aGlzLmRhdGEuc3BlY2lmaWNhdGlvbnMgPSBBcnJheS5pc0FycmF5KHRoaXMuZGF0YS5zcGVjaWZpY2F0aW9ucykgPyB0aGlzLmRhdGEuc3BlY2lmaWNhdGlvbnMgOiBbXTsKICAgICAgc3BlY2lmaWNhdGlvbnMgPSBBcnJheS5pc0FycmF5KHNwZWNpZmljYXRpb25zKSA/IHNwZWNpZmljYXRpb25zIDogW107CiAgICAgIFByb21pc2UuYWxsKHNwZWNpZmljYXRpb25zLm1hcChmdW5jdGlvbiAoc3BlY2lmaWNhdGlvbikgewogICAgICAgIHJldHVybiBQcm9kdWN0U3BlY0NvbnRlbnQuaW1wb3J0RGF0YSh7CiAgICAgICAgICBrZXk6IHNwZWNpZmljYXRpb24udHlwZSwKICAgICAgICAgIGNvbnRlbnQ6IHNwZWNpZmljYXRpb24uY29udGVudAogICAgICAgIH0pOwogICAgICB9KSkudGhlbihmdW5jdGlvbiAoc3BlY2lmaWNhdGlvbnMpIHsKICAgICAgICBfdGhpczMuZGF0YS5zcGVjaWZpY2F0aW9ucyA9IEFycmF5LmlzQXJyYXkoc3BlY2lmaWNhdGlvbnMpID8gc3BlY2lmaWNhdGlvbnMgOiBbXTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYWRkU3BlY2lmaWNhdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkU3BlY2lmaWNhdGlvbihzcGVjaWZpY2F0aW9uKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgUHJvZHVjdFNwZWNDb250ZW50LmltcG9ydERhdGEoewogICAgICAgIGtleTogc3BlY2lmaWNhdGlvbi50eXBlLAogICAgICAgIGNvbnRlbnQ6IHNwZWNpZmljYXRpb24uY29udGVudAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChzcGVjKSB7CiAgICAgICAgX3RoaXM0LmRhdGEuc3BlY2lmaWNhdGlvbi5wdXNoKHNwZWMpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW1vdmVTcGVjaWZpY2F0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVTcGVjaWZpY2F0aW9uKHNwZWNpZmljYXRpb24pIHsKICAgICAgdGhpcy5kYXRhLnNwZWNpZmljYXRpb25zID0gdGhpcy5kYXRhLnNwZWNpZmljYXRpb25zLmZpbHRlcihmdW5jdGlvbiAodGhpc1NwZWNpZmljYXRpb24pIHsKICAgICAgICByZXR1cm4gISh0aGlzU3BlY2lmaWNhdGlvbi50eXBlID09PSBzcGVjaWZpY2F0aW9uLnR5cGUgJiYgdGhpc1NwZWNpZmljYXRpb24uY29udGVudCA9PT0gc3BlY2lmaWNhdGlvbi5jb250ZW50KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0QnVuZGxlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QnVuZGxlcygpIHsKICAgICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwogICAgICB0aGlzLmRhdGEuYnVuZGxlcyA9IChBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtdKS5tYXAoZnVuY3Rpb24gKGJ1bmRsZSkgewogICAgICAgIHJldHVybiBNb2R1bGVCdW5kbGUudHJpbShidW5kbGUpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhZGRCdW5kbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEJ1bmRsZShidW5kbGUpIHsKICAgICAgdGhpcy5kYXRhLmJ1bmRsZXMucHVzaChidW5kbGUpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbW92ZUJ1bmRsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQnVuZGxlKGJ1bmRsZSkgewogICAgICB0aGlzLmRhdGEuYnVuZGxlcyA9IHRoaXMuZGF0YS5idW5kbGVzLmZpbHRlcihmdW5jdGlvbiAodGhpc0J1bmRsZSkgewogICAgICAgIHJldHVybiB0aGlzQnVuZGxlLnRpdGxlICE9PSBidW5kbGUudGl0bGU7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEdpZnRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRHaWZ0cygpIHsKICAgICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwogICAgICB0aGlzLmRhdGEuZ2lmdHMgPSAoQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbXSkubWFwKGZ1bmN0aW9uIChnaWZ0KSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiBnaWZ0ID09ICJzdHJpbmciID8gZ2lmdC50cmltKCkgOiAiIjsKICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChnaWZ0KSB7CiAgICAgICAgcmV0dXJuIGdpZnQ7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImFkZEdpZnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEdpZnQoZ2lmdCkgewogICAgICB0aGlzLmRhdGEuZ2lmdHMucHVzaChnaWZ0KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW1vdmVHaWZ0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVHaWZ0KGdpZnQpIHsKICAgICAgdGhpcy5kYXRhLmdpZnRzID0gdGhpcy5kYXRhLmdpZnRzLmZpbHRlcihmdW5jdGlvbiAodGhpc0dpZnQpIHsKICAgICAgICByZXR1cm4gdGhpc0dpZnQgIT09IGdpZnQ7CiAgICAgIH0pOwogICAgfSAvLyBsZWdhY2llcwoKICB9LCB7CiAgICBrZXk6ICJfaWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldElkKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidGl0bGUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldFRpdGxlKCk7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0YSkgewogICAgICBpZiAoZGF0YSA9PT0gdm9pZCAwKSB7CiAgICAgICAgZGF0YSA9ICIiOwogICAgICB9CgogICAgICB0aGlzLnNldFRpdGxlKGRhdGEpOwogICAgfQogIH0sIHsKICAgIGtleTogImJyYW5kIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5kYXRhLmJyYW5kOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGEpIHsKICAgICAgaWYgKGRhdGEgPT09IHZvaWQgMCkgewogICAgICAgIGRhdGEgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5kYXRhLmJyYW5kID0gZGF0YSBpbnN0YW5jZW9mIEJyYW5kID8gZGF0YSA6IHVuZGVmaW5lZDsKICAgICAgdGhpcy5kYXRhLmJyYW5kSWQgPSBkYXRhID8gZGF0YS5faWQgOiAiIjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjYXRlZ29yeSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuZGF0YS5jYXRlZ29yeTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChkYXRhKSB7CiAgICAgIHRoaXMuZGF0YS5jYXRlZ29yeSA9IGRhdGEgaW5zdGFuY2VvZiBDYXRlZ29yeSA/IGRhdGEgOiB1bmRlZmluZWQ7CiAgICAgIHRoaXMuZGF0YS5jYXRlZ29yeUlkID0gZGF0YSA/IGRhdGEuX2lkIDogIiI7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVzY3JpcHRpb24iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldERlc2NyaXB0aW9uKCk7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0YSkgewogICAgICBpZiAoZGF0YSA9PT0gdm9pZCAwKSB7CiAgICAgICAgZGF0YSA9ICIiOwogICAgICB9CgogICAgICB0aGlzLnNldERlc2NyaXB0aW9uKGRhdGEpOwogICAgfQogIH0sIHsKICAgIGtleTogImltYWdlcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0SW1hZ2VzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic3BlY2lmaWNhdGlvbnMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldFNwZWNpZmljYXRpb25zKCk7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0YSkgewogICAgICBpZiAoZGF0YSA9PT0gdm9pZCAwKSB7CiAgICAgICAgZGF0YSA9IFtdOwogICAgICB9CgogICAgICB0aGlzLnNldFNwZWNpZmljYXRpb25zKGRhdGEpOwogICAgfQogIH0sIHsKICAgIGtleTogImdpZnRzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5nZXRHaWZ0cygpOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGEpIHsKICAgICAgaWYgKGRhdGEgPT09IHZvaWQgMCkgewogICAgICAgIGRhdGEgPSBbXTsKICAgICAgfQoKICAgICAgdGhpcy5zZXRHaWZ0cyhkYXRhKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJidW5kbGVzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5nZXRCdW5kbGVzKCk7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0YSkgewogICAgICBpZiAoZGF0YSA9PT0gdm9pZCAwKSB7CiAgICAgICAgZGF0YSA9IFtdOwogICAgICB9CgogICAgICB0aGlzLnNldEJ1bmRsZXMoZGF0YSk7CiAgICB9CiAgfV0sIFt7CiAgICBrZXk6ICJjb3B5SW5zdGFuY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvcHlJbnN0YW5jZShmcm9tKSB7CiAgICAgIHZhciBjb3B5ID0gbmV3IFByb2R1Y3QoKTsKICAgICAgY29weS5kYXRhLl9pZCA9IGZyb20uZGF0YS5faWQ7CiAgICAgIGNvcHkudGl0bGUgPSBmcm9tLnRpdGxlOwogICAgICBjb3B5LmRlc2NyaXB0aW9uID0gZnJvbS5kZXNjcmlwdGlvbjsKICAgICAgY29weS5naWZ0cyA9IGZyb20uZ2lmdHM7CiAgICAgIGNvcHkuYnVuZGxlcyA9IGZyb20uYnVuZGxlczsKICAgICAgY29weS5zdG9jayA9IGZyb20uc3RvY2sgPyBNb2R1bGVTdG9jay50cmltKGZyb20uc3RvY2spIDogTW9kdWxlU3RvY2sudHJpbSh7fSk7CiAgICAgIGNvcHkuaW1hZ2UgPSBmcm9tLmltYWdlOwogICAgICBjb3B5LmJyYW5kID0gZnJvbS5icmFuZDsKICAgICAgY29weS5jYXRlZ29yeSA9IGZyb20uY2F0ZWdvcnk7CiAgICAgIGNvcHkuc3BlY2lmaWNhdGlvbnMgPSBmcm9tLnNwZWNpZmljYXRpb25zOwogICAgICBjb3B5LnByaWNlID0gZnJvbS5wcmljZTsKICAgICAgcmV0dXJuIGNvcHk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaW1wb3J0RGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW1wb3J0RGF0YShkYXRhKSB7CiAgICAgIGRhdGEgPSBNb2R1bGVQcm9kdWN0LnRyaW0oZGF0YSk7CiAgICAgIGlmIChfdHlwZW9mKGRhdGEuaW1hZ2UpID09PSAib2JqZWN0IiAmJiBkYXRhLmltYWdlKSBkYXRhLmltYWdlcy5wdXNoKGRhdGEuaW1hZ2UpOwogICAgICB2YXIgcGFyc2UgPSBuZXcgUHJvZHVjdChkYXRhLl9pZCk7CiAgICAgIHBhcnNlLnNldFRpdGxlKGRhdGEudGl0bGUpOwogICAgICBwYXJzZS5zZXREZXNjcmlwdGlvbihkYXRhLmRlc2NyaXB0aW9uKTsKICAgICAgcGFyc2Uuc2V0R2lmdHMoZGF0YS5naWZ0cyk7CiAgICAgIHBhcnNlLnNldEJ1bmRsZXMoZGF0YS5idW5kbGVzKTsKICAgICAgcGFyc2Uuc2V0QnJhbmRJZChkYXRhLmJyYW5kSWQpOwogICAgICBwYXJzZS5zZXRDYXRlZ29yeUlkKGRhdGEuY2F0ZWdvcnlJZCk7CiAgICAgIHBhcnNlLnNldFNwZWNpZmljYXRpb25zKGRhdGEuc3BlY2lmaWNhdGlvbnMpOwogICAgICBwYXJzZS5zZXRJbWFnZXMoZGF0YS5pbWFnZXMpOwogICAgICBwYXJzZS5zZXRQcmljZShkYXRhLnByaWNlKTsKICAgICAgcGFyc2Uuc3RvY2sgPSBkYXRhLnN0b2NrOwogICAgICByZXR1cm4gcGFyc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiZXhwb3J0RnJvbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXhwb3J0RnJvbShpdGVtKSB7CiAgICAgIHZhciBzcGVjaWZpY2F0aW9uID0ge307CgogICAgICB2YXIgX2l0ZXJhdG9yNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGl0ZW0uc3BlY2lmaWNhdGlvbnMpLAogICAgICAgICAgX3N0ZXA3OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjcucygpOyAhKF9zdGVwNyA9IF9pdGVyYXRvcjcubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGl0ZW1TcGVjaWZpY2F0aW9uID0gX3N0ZXA3LnZhbHVlOwogICAgICAgICAgc3BlY2lmaWNhdGlvbltpdGVtU3BlY2lmaWNhdGlvbi50eXBlLmtleV0gPSBpdGVtU3BlY2lmaWNhdGlvbi5jb250ZW50OwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yNy5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yNy5mKCk7CiAgICAgIH0KCiAgICAgIHZhciBwcmljZSA9IGl0ZW0ucHJpY2UgPyBpdGVtLnByaWNlIDoge307CiAgICAgIHZhciBwcmljZVByb21vdGlvbiA9IHByaWNlLnByb21vdGlvbjsKICAgICAgdmFyIHByaWNlTm9ybWFsID0gcHJpY2Uubm9ybWFsOwogICAgICByZXR1cm4gewogICAgICAgIF9pZDogaXRlbS5faWQsCiAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUgPyBpdGVtLnRpdGxlIDogdW5kZWZpbmVkLAogICAgICAgIGRlc2NyaXB0aW9uOiBpdGVtLmRlc2NyaXB0aW9uID8gaXRlbS5kZXNjcmlwdGlvbiA6IHVuZGVmaW5lZCwKICAgICAgICBicmFuZElkOiBpdGVtLmJyYW5kID8gaXRlbS5icmFuZC5faWQgOiAiIiwKICAgICAgICBjYXRlZ29yeUlkOiBpdGVtLmNhdGVnb3J5ID8gaXRlbS5jYXRlZ29yeS5faWQgOiAiIiwKICAgICAgICBzdG9jazogTW9kdWxlU3RvY2sudHJpbShpdGVtLnN0b2NrKSwKICAgICAgICBnaWZ0czogaXRlbS5naWZ0cy5tYXAoZnVuY3Rpb24gKGdpZnQpIHsKICAgICAgICAgIHJldHVybiBnaWZ0OwogICAgICAgIH0pLAogICAgICAgIGJ1bmRsZXM6IGl0ZW0uYnVuZGxlcy5tYXAoZnVuY3Rpb24gKGJ1bmRsZSkgewogICAgICAgICAgcmV0dXJuIE1vZHVsZUJ1bmRsZS50cmltKGJ1bmRsZSk7CiAgICAgICAgfSksCiAgICAgICAgaW1hZ2U6IEltYWdlLmV4cG9ydEZyb20oaXRlbS5pbWFnZSksCiAgICAgICAgc3BlY2lmaWNhdGlvbjogc3BlY2lmaWNhdGlvbiwKICAgICAgICBwcmljZTogewogICAgICAgICAgbm9ybWFsOiBwcmljZVByb21vdGlvbiwKICAgICAgICAgIHByb21vdGlvbjogcHJpY2VOb3JtYWwKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUHJvZHVjdDsKfSgpOwoKZnVuY3Rpb24gX2NvbXBhcmVBdmFpbGFibGUyKGl0ZW0pIHsKICB2YXIgX3RoaXMkc3RvY2ssIF9pdGVtJHN0b2NrLCBfc3RvY2sxJGlzQXZhaWxhYmxlLCBfc3RvY2syJGlzQXZhaWxhYmxlOwoKICB2YXIgc3RvY2sxID0gKF90aGlzJHN0b2NrID0gdGhpcy5zdG9jaykgIT09IG51bGwgJiYgX3RoaXMkc3RvY2sgIT09IHZvaWQgMCA/IF90aGlzJHN0b2NrIDogewogICAgaXNBdmFpbGFibGU6IHRydWUsCiAgICBpc1NlY29uZEhhbmQ6IGZhbHNlCiAgfTsKICB2YXIgc3RvY2syID0gKF9pdGVtJHN0b2NrID0gaXRlbS5zdG9jaykgIT09IG51bGwgJiYgX2l0ZW0kc3RvY2sgIT09IHZvaWQgMCA/IF9pdGVtJHN0b2NrIDogewogICAgaXNBdmFpbGFibGU6IHRydWUsCiAgICBpc1NlY29uZEhhbmQ6IGZhbHNlCiAgfTsKICB2YXIgaXNBdmFpbGFibGUxID0gKF9zdG9jazEkaXNBdmFpbGFibGUgPSBzdG9jazEuaXNBdmFpbGFibGUpICE9PSBudWxsICYmIF9zdG9jazEkaXNBdmFpbGFibGUgIT09IHZvaWQgMCA/IF9zdG9jazEkaXNBdmFpbGFibGUgOiB0cnVlOwogIHZhciBpc0F2YWlsYWJsZTIgPSAoX3N0b2NrMiRpc0F2YWlsYWJsZSA9IHN0b2NrMi5pc0F2YWlsYWJsZSkgIT09IG51bGwgJiYgX3N0b2NrMiRpc0F2YWlsYWJsZSAhPT0gdm9pZCAwID8gX3N0b2NrMiRpc0F2YWlsYWJsZSA6IHRydWU7CiAgaWYgKGlzQXZhaWxhYmxlMSAmJiAhaXNBdmFpbGFibGUyKSByZXR1cm4gLTE7CiAgaWYgKCFpc0F2YWlsYWJsZTEgJiYgaXNBdmFpbGFibGUyKSByZXR1cm4gMTsKICByZXR1cm4gMDsKfQoKZnVuY3Rpb24gX2NvbXBhcmVJbWFnZTIoaXRlbSkgewogIHZhciBpbWFnZTEgPSB0aGlzLmltYWdlOwogIHZhciBpbWFnZTIgPSBpdGVtLmltYWdlOwogIGlmIChpbWFnZTEgJiYgIWltYWdlMikgcmV0dXJuIC0xOwogIGlmICghaW1hZ2UxICYmIGltYWdlMikgcmV0dXJuIDE7CiAgcmV0dXJuIDA7Cn0KCmZ1bmN0aW9uIF9jb21wYXJlUHJvbW90aW9uczIoaXRlbSkgewogIHZhciBwcmljZTEgPSB0aGlzLnByaWNlOwogIHZhciBwcmljZTIgPSBpdGVtLnByaWNlOwogIHZhciBwcm9tb3Rpb24xID0gcHJpY2UxICYmIHR5cGVvZiBwcmljZTEucHJvbW90aW9uID09PSAic3RyaW5nIiA/IHByaWNlMS5wcm9tb3Rpb24udHJpbSgpIDogIiI7CiAgdmFyIHByb21vdGlvbjIgPSBwcmljZTIgJiYgdHlwZW9mIHByaWNlMi5wcm9tb3Rpb24gPT09ICJzdHJpbmciID8gcHJpY2UyLnByb21vdGlvbi50cmltKCkgOiAiIjsKICB2YXIgaGFzUHJvbW90aW9uMSA9IHByb21vdGlvbjEubGVuZ3RoID4gMDsKICB2YXIgaGFzUHJvbW90aW9uMiA9IHByb21vdGlvbjIubGVuZ3RoID4gMDsKICBpZiAoaGFzUHJvbW90aW9uMSAmJiAhaGFzUHJvbW90aW9uMikgcmV0dXJuIC0xOwogIGlmICghaGFzUHJvbW90aW9uMSAmJiBoYXNQcm9tb3Rpb24yKSByZXR1cm4gMTsKICByZXR1cm4gMDsKfQoKZnVuY3Rpb24gX2NvbXBhcmVQcmljZXMyKGl0ZW0pIHsKICB2YXIgcHJpY2UxID0gdGhpcy5wcmljZTsKICB2YXIgcHJpY2UyID0gaXRlbS5wcmljZTsKICB2YXIgbm9ybWFsMSA9IHByaWNlMSAmJiB0eXBlb2YgcHJpY2UxLm5vcm1hbCA9PT0gInN0cmluZyIgPyBwcmljZTEubm9ybWFsLnRyaW0oKSA6ICIiOwogIHZhciBub3JtYWwyID0gcHJpY2UyICYmIHR5cGVvZiBwcmljZTIubm9ybWFsID09PSAic3RyaW5nIiA/IHByaWNlMi5ub3JtYWwudHJpbSgpIDogIiI7CiAgaWYgKCFub3JtYWwxICYmIG5vcm1hbDIpIHJldHVybiAxOwogIGlmIChub3JtYWwxICYmICFub3JtYWwyKSByZXR1cm4gLTE7CiAgaWYgKG5vcm1hbDEgPiBub3JtYWwyKSByZXR1cm4gLTE7CiAgaWYgKG5vcm1hbDEgPCBub3JtYWwyKSByZXR1cm4gMTsKICByZXR1cm4gMDsKfQoKZnVuY3Rpb24gX2NvbXBhcmVTZWNvbmRIYW5kMihpdGVtKSB7CiAgdmFyIF90aGlzJHN0b2NrMiwgX2l0ZW0kc3RvY2syLCBfc3RvY2sxJGlzU2Vjb25kSGFuZCwgX3N0b2NrMiRpc1NlY29uZEhhbmQ7CgogIHZhciBzdG9jazEgPSAoX3RoaXMkc3RvY2syID0gdGhpcy5zdG9jaykgIT09IG51bGwgJiYgX3RoaXMkc3RvY2syICE9PSB2b2lkIDAgPyBfdGhpcyRzdG9jazIgOiB7CiAgICBpc0F2YWlsYWJsZTogdHJ1ZSwKICAgIGlzU2Vjb25kSGFuZDogZmFsc2UKICB9OwogIHZhciBzdG9jazIgPSAoX2l0ZW0kc3RvY2syID0gaXRlbS5zdG9jaykgIT09IG51bGwgJiYgX2l0ZW0kc3RvY2syICE9PSB2b2lkIDAgPyBfaXRlbSRzdG9jazIgOiB7CiAgICBpc0F2YWlsYWJsZTogdHJ1ZSwKICAgIGlzU2Vjb25kSGFuZDogZmFsc2UKICB9OwogIHZhciBpc1NlY29uZEhhbmQxID0gKF9zdG9jazEkaXNTZWNvbmRIYW5kID0gc3RvY2sxLmlzU2Vjb25kSGFuZCkgIT09IG51bGwgJiYgX3N0b2NrMSRpc1NlY29uZEhhbmQgIT09IHZvaWQgMCA/IF9zdG9jazEkaXNTZWNvbmRIYW5kIDogZmFsc2U7CiAgdmFyIGlzU2Vjb25kSGFuZDIgPSAoX3N0b2NrMiRpc1NlY29uZEhhbmQgPSBzdG9jazIuaXNTZWNvbmRIYW5kKSAhPT0gbnVsbCAmJiBfc3RvY2syJGlzU2Vjb25kSGFuZCAhPT0gdm9pZCAwID8gX3N0b2NrMiRpc1NlY29uZEhhbmQgOiBmYWxzZTsKICBpZiAoaXNTZWNvbmRIYW5kMSAmJiAhaXNTZWNvbmRIYW5kMikgcmV0dXJuIDE7CiAgaWYgKCFpc1NlY29uZEhhbmQxICYmIGlzU2Vjb25kSGFuZDIpIHJldHVybiAtMTsKICByZXR1cm4gMDsKfQoKX2RlZmluZVByb3BlcnR5KFByb2R1Y3QsICJQcm9kdWN0U3RvcmUiLCBudWxsKTsKCl9kZWZpbmVQcm9wZXJ0eShQcm9kdWN0LCAiQnJhbmRTdG9yZSIsIG51bGwpOwoKX2RlZmluZVByb3BlcnR5KFByb2R1Y3QsICJTcGVjaWZpY2F0aW9uU3RvcmUiLCBudWxsKTsKCmV4cG9ydCBkZWZhdWx0IFByb2R1Y3Q7"},null]}