{"remainingRequest":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-v2\\vue\\src\\stores\\store.order.js","dependencies":[{"path":"C:\\dev\\freshnet-v2\\vue\\src\\stores\\store.order.js","mtime":1666953104916},{"path":"C:\\dev\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0IFZ1ZXggZnJvbSAidnVleCI7CmltcG9ydCBBcGlIb3N0IGZyb20gIkAvaG9zdC9BcGlIb3N0LmpzIjsKaW1wb3J0IE9yZGVyIGZyb20gIkAvaXRlbXMvT3JkZXIuanMiOwppbXBvcnQgT3JkZXJNb2R1bGUgZnJvbSAiQC8uLi8uLi9leHByZXNzL2RhdGFfc3RydWN0dXJlcy9PcmRlci5qcyI7CmltcG9ydCBEYXRhTG9hZGVyIGZyb20gIi4vdG9vbHMvRGF0YUxvYWRlciI7CmltcG9ydCBDb2xsZWN0aW9uVXBkYXRlciBmcm9tICIuL3Rvb2xzL0NvbGxlY3Rpb25VcGRhdGVyIjsKaW1wb3J0IFByb2Nlc3NvciBmcm9tICIuL3Rvb2xzL1Byb2Nlc3Nvci5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBpbml0OiBmdW5jdGlvbiBpbml0KFN0b3JlcykgewogICAgdmFyIHN0b3JlID0gbmV3IFZ1ZXguU3RvcmUoewogICAgICBzdGF0ZTogewogICAgICAgIGxhc3RNb2RpZmllZDogMCwKICAgICAgICBkYXRhTG9hZGVyOiBuZXcgRGF0YUxvYWRlcih7CiAgICAgICAgICB0aW1lb3V0OiAxMDAwICogNjAgKiAxMAogICAgICAgIH0pIC8vIDEwbWluCiAgICAgICAgLnByb2Nlc3NvcihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gc3RvcmUuc3RhdGUucHJvY2Vzc29yOwogICAgICAgIH0pLmxvYWREYXRhKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgdmFyIGFwaSwgZXJyb3IsIGNvbnRlbnQsIGNvbnRlbnRzLCBpdGVtczsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS51cmwoIm9yZGVyLyIpLnNlbmQoKTsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgIGVycm9yID0gYXBpLmdldEVycm9yKCk7CiAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGkuZ2V0Q29udGVudCgpOwoKICAgICAgICAgICAgICAgICAgaWYgKCFlcnJvcikgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpOwoKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgY29udGVudHMgPSBBcnJheS5pc0FycmF5KGNvbnRlbnQpID8gY29udGVudCA6IFtdOwogICAgICAgICAgICAgICAgICBpdGVtcyA9IGNvbnRlbnRzLm1hcChmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT3JkZXIoU3RvcmVzKS5mcm9tRGF0YShkYXRhKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGl0ZW1zKTsKCiAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgIH0pKSkuc2V0RGF0YShmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgc3RvcmUuY29tbWl0KCJpdGVtcyIsIEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW10pOwogICAgICAgICAgc3RvcmUuY29tbWl0KCJsYXN0TW9kaWZpZWQiLCBEYXRlLm5vdygpKTsKICAgICAgICB9KS5nZXREYXRhKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzLml0ZW1zOwogICAgICAgIH0pLAogICAgICAgIGl0ZW1zOiBbXSwKICAgICAgICBwcm9jZXNzb3I6IG5ldyBQcm9jZXNzb3IoKQogICAgICB9LAogICAgICBtdXRhdGlvbnM6IHsKICAgICAgICBsYXN0TW9kaWZpZWQ6IGZ1bmN0aW9uIGxhc3RNb2RpZmllZChzdGF0ZSwgdGltZSkgewogICAgICAgICAgcmV0dXJuIHN0YXRlLmxhc3RNb2RpZmllZCA9IHRpbWU7CiAgICAgICAgfSwKICAgICAgICBpdGVtczogZnVuY3Rpb24gaXRlbXMoc3RhdGUsIF9pdGVtcykgewogICAgICAgICAgcmV0dXJuIHN0YXRlLml0ZW1zID0gX2l0ZW1zOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2V0dGVyczogewogICAgICAgIGxhc3RNb2RpZmllZDogZnVuY3Rpb24gbGFzdE1vZGlmaWVkKHN0YXRlKSB7CiAgICAgICAgICByZXR1cm4gc3RhdGUubGFzdE1vZGlmaWVkOwogICAgICAgIH0sCiAgICAgICAgaXNMb2FkaW5nOiBmdW5jdGlvbiBpc0xvYWRpbmcoc3RhdGUpIHsKICAgICAgICAgIHJldHVybiBzdGF0ZS5wcm9jZXNzb3IuaXNMb2FkaW5nKCk7CiAgICAgICAgfSwKICAgICAgICBpdGVtczogZnVuY3Rpb24gaXRlbXMoc3RhdGUpIHsKICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHN0YXRlLml0ZW1zKSA/IHN0YXRlLml0ZW1zIDogW107CiAgICAgICAgfQogICAgICB9LAogICAgICBhY3Rpb25zOiB7CiAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaChjb250ZXh0KSB7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgicmVmcmVzaCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdGF0ZS5kYXRhTG9hZGVyLmRvVGltZW91dCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCJnZXRJdGVtcyIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICBnZXRJdGVtczogZnVuY3Rpb24gZ2V0SXRlbXMoY29udGV4dCkgewogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoImdldEl0ZW1zIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5kYXRhTG9hZGVyLmRhdGEoKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIGdldEdyb3Vwc0J5Q3VzdG9tZXI6IGZ1bmN0aW9uIGdldEdyb3Vwc0J5Q3VzdG9tZXIoY29udGV4dCkgewogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgICAgIHZhciBpdGVtcywgZ3JvdXBzOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiZ2V0SXRlbXMiKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgICAgICAgIGdyb3VwcyA9IGl0ZW1zLnJlZHVjZShmdW5jdGlvbiAoZ3JvdXBzLCBpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBncm91cHMuZmluZChmdW5jdGlvbiAoZ3JvdXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwLmN1c3RvbWVyLmlzRXF1YWwoaXRlbS5jdXN0b21lcik7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdyb3VwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwID0gewogICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyOiBpdGVtLmN1c3RvbWVyLAogICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBbXQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBncm91cHMucHVzaChncm91cCk7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgZ3JvdXAuaXRlbXMucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBncm91cHM7CiAgICAgICAgICAgICAgICAgICAgfSwgW10pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBncm91cHMpOwoKICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICBnZXRHcm91cHNCeVN0YXR1czogZnVuY3Rpb24gZ2V0R3JvdXBzQnlTdGF0dXMoY29udGV4dCkgewogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgICAgIHZhciBpdGVtcywgZ3JvdXBzOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiZ2V0SXRlbXMiKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IF9jb250ZXh0Ny5zZW50OwogICAgICAgICAgICAgICAgICAgIGdyb3VwcyA9IGl0ZW1zLnJlZHVjZShmdW5jdGlvbiAoZ3JvdXBzLCBpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBncm91cHMuZmluZChmdW5jdGlvbiAoZ3JvdXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwLnN0YXR1cyA9PT0gaXRlbS5zdGF0dXM7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdyb3VwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwID0gewogICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogaXRlbS5zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3Vwcy5wdXNoKGdyb3VwKTsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBncm91cC5pdGVtcy5wdXNoKGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwczsKICAgICAgICAgICAgICAgICAgICB9LCBbXSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIsIGdyb3Vwcyk7CgogICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIGFkZEl0ZW06IGZ1bmN0aW9uIGFkZEl0ZW0oY29udGV4dCkgewogICAgICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBhcmcgPSBfYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50c1sxXSA6IHsKICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJhZGRJdGVtIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSwgYXBpLCBlcnJvciwgY29udGVudCwgb3JkZXI7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gYXJnLmRhdGE7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIG51bGwpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuUE9TVCgpLnVybCgib3JkZXIvIikuYm9keShkYXRhKS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDguc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBhcGkuZ2V0RXJyb3IoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaS5nZXRDb250ZW50KCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIgPSBuZXcgT3JkZXIoKS5mcm9tRGF0YShjb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIgPSBuZXcgQ29sbGVjdGlvblVwZGF0ZXIoY29udGV4dCkub25JZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5nZXRJdGVtKG9yZGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIG9yZGVyKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlOSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZU9JdGVtT2ZJZDogZnVuY3Rpb24gcmVtb3ZlT0l0ZW1PZklkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzMiA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMSgpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czIubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzMlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czJbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICBpZDogaWQKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgicmVtb3ZlT0l0ZW1PZklkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGlkLCBhcGksIGVycm9yLCBpdGVtczsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA9IGFyZy5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QucmVxdWVzdCgpLkRFTEVURSgpLnVybCgib3JkZXIvIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0MTAuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBhcGkuZ2V0RXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gY29udGV4dC5zdGF0ZS5pdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZCAhPT0gaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgiaXRlbXMiLCBpdGVtcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJsYXN0TW9kaWZpZWQiLCBEYXRlLm5vdygpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTEwKTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMTEpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVTdGF0dXNPZklkOiBmdW5jdGlvbiB1cGRhdGVTdGF0dXNPZklkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzMyA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMygpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czMubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzM1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czNbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJ1cGRhdGVTdGF0dXNPZklkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGlkLCBzdGF0dXMsIGFwaSwgZXJyb3IsIG9yZGVyOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMi5wcmV2ID0gX2NvbnRleHQxMi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gYXJnLmlkLCBzdGF0dXMgPSBhcmcuc3RhdHVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuUFVUKCkudXJsKCJvcmRlci8iKS5ib2R5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc2VuZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQxMi5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGFwaS5nZXRFcnJvcigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIgPSBuZXcgQ29sbGVjdGlvblVwZGF0ZXIoY29udGV4dCkub25JZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5vblVwZGF0ZShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnN0YXR1cyA9IHN0YXR1czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZ2V0SXRlbUJ5SWQoaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5hYnJ1cHQoInJldHVybiIsIG9yZGVyKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTIpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxMyk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIHVwZGF0ZVRvUGVuZGluZ09mSWQ6IGZ1bmN0aW9uIHVwZGF0ZVRvUGVuZGluZ09mSWQoY29udGV4dCkgewogICAgICAgICAgdmFyIF9hcmd1bWVudHM0ID0gYXJndW1lbnRzOwogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KCkgewogICAgICAgICAgICB2YXIgaWQ7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE0LnByZXYgPSBfY29udGV4dDE0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGlkID0gX2FyZ3VtZW50czQubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzNFsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czRbMV0gOiAiIjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuZGlzcGF0Y2goInVwZGF0ZVN0YXR1c09mSWQiLCB7CiAgICAgICAgICAgICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IE9yZGVyTW9kdWxlLlN0YXR1cy5QZW5kaW5nCiAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxNCk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIHVwZGF0ZVRvQ29tcGxldGVkT2ZJZDogZnVuY3Rpb24gdXBkYXRlVG9Db21wbGV0ZWRPZklkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzNSA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNSgpIHsKICAgICAgICAgICAgdmFyIGlkOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNS5wcmV2ID0gX2NvbnRleHQxNS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBpZCA9IF9hcmd1bWVudHM1Lmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czVbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHM1WzFdIDogIiI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LmRpc3BhdGNoKCJ1cGRhdGVTdGF0dXNPZklkIiwgewogICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBPcmRlck1vZHVsZS5TdGF0dXMuQ29tcGxldGVkCiAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxNSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHN0b3JlOwogIH0KfTs="},{"version":3,"sources":["C:/dev/freshnet-v2/vue/src/stores/store.order.js"],"names":["Vuex","ApiHost","Order","OrderModule","DataLoader","CollectionUpdater","Processor","init","Stores","store","Store","state","lastModified","dataLoader","timeout","processor","loadData","request","url","send","api","error","getError","content","getContent","Error","contents","Array","isArray","items","map","data","fromData","setData","commit","Date","now","getData","getters","mutations","time","isLoading","actions","refresh","context","acquire","doTimeout","dispatch","getItems","getGroupsByCustomer","groups","reduce","item","group","find","customer","isEqual","push","getGroupsByStatus","status","addItem","arg","POST","body","order","onId","id","getItem","removeOItemOfId","DELETE","filter","updateStatusOfId","PUT","onUpdate","getItemById","updateToPendingOfId","Status","Pending","updateToCompletedOfId","Completed"],"mappings":"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","sourcesContent":["import Vuex from \"vuex\";\r\nimport ApiHost from \"@/host/ApiHost.js\";\r\nimport Order from \"@/items/Order.js\";\r\nimport OrderModule from \"@/../../express/data_structures/Order.js\";\r\n\r\nimport DataLoader from \"./tools/DataLoader\";\r\nimport CollectionUpdater from \"./tools/CollectionUpdater\";\r\nimport Processor from \"./tools/Processor.js\";\r\n\r\nexport default {\r\n\tinit(Stores) {\r\n\t\tconst store = new Vuex.Store({\r\n\t\t\tstate: {\r\n\t\t\t\tlastModified: 0,\r\n\t\t\t\tdataLoader: new DataLoader({ timeout: 1000 * 60 * 10 }) // 10min\r\n\t\t\t\t\t.processor(() => store.state.processor)\r\n\t\t\t\t\t.loadData(async () => {\r\n\t\t\t\t\t\tconst api = await ApiHost.request().url(\"order/\").send();\r\n\t\t\t\t\t\tconst error = api.getError();\r\n\t\t\t\t\t\tconst content = api.getContent();\r\n\t\t\t\t\t\tif (error) throw new Error(error);\r\n\t\t\t\t\t\tconst contents = Array.isArray(content) ? content : [];\r\n\t\t\t\t\t\tconst items = contents.map((data) => {\r\n\t\t\t\t\t\t\treturn new Order(Stores).fromData(data);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn items;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.setData((data) => {\r\n\t\t\t\t\t\tstore.commit(\"items\", Array.isArray(data) ? data : []);\r\n\t\t\t\t\t\tstore.commit(\"lastModified\", Date.now());\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.getData(() => store.getters.items),\r\n\t\t\t\titems: [],\r\n\t\t\t\tprocessor: new Processor(),\r\n\t\t\t},\r\n\t\t\tmutations: {\r\n\t\t\t\tlastModified: (state, time) => (state.lastModified = time),\r\n\t\t\t\titems: (state, items) => (state.items = items),\r\n\t\t\t},\r\n\t\t\tgetters: {\r\n\t\t\t\tlastModified: (state) => state.lastModified,\r\n\t\t\t\tisLoading: (state) => state.processor.isLoading(),\r\n\t\t\t\titems: (state) => (Array.isArray(state.items) ? state.items : []),\r\n\t\t\t},\r\n\t\t\tactions: {\r\n\t\t\t\tasync refresh(context) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"refresh\", async () => {\r\n\t\t\t\t\t\tcontext.state.dataLoader.doTimeout();\r\n\t\t\t\t\t\tawait context.dispatch(\"getItems\");\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync getItems(context) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"getItems\", async () => {\r\n\t\t\t\t\t\treturn context.state.dataLoader.data();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync getGroupsByCustomer(context) {\r\n\t\t\t\t\tconst items = await context.dispatch(\"getItems\");\r\n\t\t\t\t\tconst groups = items.reduce((groups, item) => {\r\n\t\t\t\t\t\tlet group = groups.find((group) => {\r\n\t\t\t\t\t\t\treturn group.customer.isEqual(item.customer);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (!group) {\r\n\t\t\t\t\t\t\tgroup = { customer: item.customer, items: [] };\r\n\t\t\t\t\t\t\tgroups.push(group);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgroup.items.push(item);\r\n\t\t\t\t\t\treturn groups;\r\n\t\t\t\t\t}, []);\r\n\r\n\t\t\t\t\treturn groups;\r\n\t\t\t\t},\r\n\t\t\t\tasync getGroupsByStatus(context) {\r\n\t\t\t\t\tconst items = await context.dispatch(\"getItems\");\r\n\t\t\t\t\tconst groups = items.reduce((groups, item) => {\r\n\t\t\t\t\t\tlet group = groups.find((group) => group.status === item.status);\r\n\r\n\t\t\t\t\t\tif (!group) {\r\n\t\t\t\t\t\t\tgroup = { status: item.status, items: [] };\r\n\t\t\t\t\t\t\tgroups.push(group);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgroup.items.push(item);\r\n\t\t\t\t\t\treturn groups;\r\n\t\t\t\t\t}, []);\r\n\r\n\t\t\t\t\treturn groups;\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync addItem(context, arg = { data }) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"addItem\", async () => {\r\n\t\t\t\t\t\tlet { data } = arg;\r\n\t\t\t\t\t\tif (!data) return null;\r\n\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t.POST()\r\n\t\t\t\t\t\t\t.url(\"order/\")\r\n\t\t\t\t\t\t\t.body(data)\r\n\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\tlet error = api.getError();\r\n\t\t\t\t\t\tlet content = api.getContent();\r\n\t\t\t\t\t\tif (error) throw new Error();\r\n\t\t\t\t\t\tlet order = new Order().fromData(content);\r\n\r\n\t\t\t\t\t\torder = new CollectionUpdater(context)\r\n\t\t\t\t\t\t\t.onId((item) => item.id)\r\n\t\t\t\t\t\t\t.getItem(order);\r\n\r\n\t\t\t\t\t\treturn order;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tasync removeOItemOfId(context, arg = { id }) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\r\n\t\t\t\t\t\t\"removeOItemOfId\",\r\n\t\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\t\tlet { id } = arg;\r\n\t\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t\t.DELETE()\r\n\t\t\t\t\t\t\t\t.url(\"order/\")\r\n\t\t\t\t\t\t\t\t.body({ id })\r\n\t\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\t\tlet error = api.getError();\r\n\t\t\t\t\t\t\tif (error) throw new Error();\r\n\t\t\t\t\t\t\tlet items = context.state.items.filter((item) => item.id !== id);\r\n\t\t\t\t\t\t\tcontext.commit(\"items\", items);\r\n\t\t\t\t\t\t\tcontext.commit(\"lastModified\", Date.now());\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tasync updateStatusOfId(context, arg = { id, status }) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\r\n\t\t\t\t\t\t\"updateStatusOfId\",\r\n\t\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\t\tlet { id, status } = arg;\r\n\t\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t\t.PUT()\r\n\t\t\t\t\t\t\t\t.url(\"order/\")\r\n\t\t\t\t\t\t\t\t.body({ id, status })\r\n\t\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\t\tlet error = api.getError();\r\n\t\t\t\t\t\t\tif (error) throw new Error();\r\n\r\n\t\t\t\t\t\t\tlet order = new CollectionUpdater(context)\r\n\t\t\t\t\t\t\t\t.onId((item) => item.id)\r\n\t\t\t\t\t\t\t\t.onUpdate((item) => (item.status = status))\r\n\t\t\t\t\t\t\t\t.getItemById(id);\r\n\r\n\t\t\t\t\t\t\treturn order;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tasync updateToPendingOfId(context, id = \"\") {\r\n\t\t\t\t\treturn context.dispatch(\"updateStatusOfId\", {\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tstatus: OrderModule.Status.Pending,\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tasync updateToCompletedOfId(context, id = \"\") {\r\n\t\t\t\t\treturn context.dispatch(\"updateStatusOfId\", {\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tstatus: OrderModule.Status.Completed,\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\treturn store;\r\n\t},\r\n};\r\n"]}]}