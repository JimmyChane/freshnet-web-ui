{"remainingRequest":"C:\\dev\\freshnet-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-vue\\src\\stores\\tools\\CollectionUpdater.js","dependencies":[{"path":"C:\\dev\\freshnet-vue\\src\\stores\\tools\\CollectionUpdater.js","mtime":1666953098434},{"path":"C:\\dev\\freshnet-vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9jbGFzc0NhbGxDaGVjayA9IHJlcXVpcmUoIkM6XFxkZXZcXGZyZXNobmV0LXZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGNsYXNzQ2FsbENoZWNrLmpzIikuZGVmYXVsdDsKCnZhciBfY3JlYXRlQ2xhc3MgPSByZXF1aXJlKCJDOlxcZGV2XFxmcmVzaG5ldC12dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxjcmVhdGVDbGFzcy5qcyIpLmRlZmF1bHQ7Cgp2YXIgX2NsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWMgPSByZXF1aXJlKCJDOlxcZGV2XFxmcmVzaG5ldC12dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxjbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjLmpzIikuZGVmYXVsdDsKCnZhciBfY2xhc3NQcml2YXRlRmllbGRHZXQgPSByZXF1aXJlKCJDOlxcZGV2XFxmcmVzaG5ldC12dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxjbGFzc1ByaXZhdGVGaWVsZEdldC5qcyIpLmRlZmF1bHQ7Cgp2YXIgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0ID0gcmVxdWlyZSgiQzpcXGRldlxcZnJlc2huZXQtdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcY2xhc3NQcml2YXRlRmllbGRTZXQuanMiKS5kZWZhdWx0OwoKdmFyIF9jb250ZXh0LCBfaXRlbUlkR2V0dGVyLCBfdXBkYXRlcjsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMud2Vhay1tYXAuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyIpOwoKbW9kdWxlLmV4cG9ydHMgPSAoX2NvbnRleHQgPSAvKiNfX1BVUkVfXyovbmV3IFdlYWtNYXAoKSwgX2l0ZW1JZEdldHRlciA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha01hcCgpLCBfdXBkYXRlciA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha01hcCgpLCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICJ1c2Ugc3RyaWN0IjsKCiAgZnVuY3Rpb24gQ29sbGVjdGlvblVwZGF0ZXIoY29udGV4dCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbGxlY3Rpb25VcGRhdGVyKTsKCiAgICBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYyh0aGlzLCBfY29udGV4dCwgewogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IHZvaWQgMAogICAgfSk7CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWModGhpcywgX2l0ZW1JZEdldHRlciwgewogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IHZvaWQgMAogICAgfSk7CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWModGhpcywgX3VwZGF0ZXIsIHsKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIHZhbHVlOiB2b2lkIDAKICAgIH0pOwoKICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfY29udGV4dCwgY29udGV4dCk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQ29sbGVjdGlvblVwZGF0ZXIsIFt7CiAgICBrZXk6ICJvbklkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbklkKGl0ZW1JZEdldHRlcikgewogICAgICBfY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX2l0ZW1JZEdldHRlciwgaXRlbUlkR2V0dGVyKTsKCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uVXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblVwZGF0ZSh1cGRhdGVyKSB7CiAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfdXBkYXRlciwgdXBkYXRlcik7CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRJdGVtIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJdGVtKGl0ZW1PY2N1cmVkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaXRlbXMgPSBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX2NvbnRleHQpLmdldHRlcnMuaXRlbXM7CgogICAgICB2YXIgZXhpc3RpbmdJdGVtID0gaXRlbXMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBfY2xhc3NQcml2YXRlRmllbGRHZXQoX3RoaXMsIF9pdGVtSWRHZXR0ZXIpLmNhbGwoX3RoaXMsIGl0ZW0pID09PSBfY2xhc3NQcml2YXRlRmllbGRHZXQoX3RoaXMsIF9pdGVtSWRHZXR0ZXIpLmNhbGwoX3RoaXMsIGl0ZW1PY2N1cmVkKTsKICAgICAgfSk7CgogICAgICBpZiAoZXhpc3RpbmdJdGVtKSB7CiAgICAgICAgaWYgKF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfdXBkYXRlcikpIHsKICAgICAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfdXBkYXRlcikuY2FsbCh0aGlzLCBleGlzdGluZ0l0ZW0sIGl0ZW1PY2N1cmVkKTsKCiAgICAgICAgICByZXR1cm4gZXhpc3RpbmdJdGVtOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgZXhpc3RpbmdJbmRleCA9IGl0ZW1zLmluZGV4T2YoZXhpc3RpbmdJdGVtKTsKICAgICAgICAgIGl0ZW1zW2V4aXN0aW5nSW5kZXhdID0gaXRlbU9jY3VyZWQ7CiAgICAgICAgICByZXR1cm4gaXRlbU9jY3VyZWQ7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGl0ZW1zLnB1c2goaXRlbU9jY3VyZWQpOwoKICAgICAgICBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX2NvbnRleHQpLmNvbW1pdCgiaXRlbXMiLCBpdGVtcyk7CgogICAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfY29udGV4dCkuY29tbWl0KCJsYXN0TW9kaWZpZWQiLCBEYXRlLm5vdygpKTsKCiAgICAgICAgcmV0dXJuIGl0ZW1PY2N1cmVkOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0SXRlbUJ5SWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW1CeUlkKGlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGl0ZW1zID0gX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9jb250ZXh0KS5nZXR0ZXJzLml0ZW1zOwoKICAgICAgdmFyIGV4aXN0aW5nSXRlbSA9IGl0ZW1zLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KF90aGlzMiwgX2l0ZW1JZEdldHRlcikuY2FsbChfdGhpczIsIGl0ZW0pID09PSBpZDsKICAgICAgfSk7CgogICAgICBpZiAoZXhpc3RpbmdJdGVtKSB7CiAgICAgICAgaWYgKF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfdXBkYXRlcikpIHsKICAgICAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfdXBkYXRlcikuY2FsbCh0aGlzLCBleGlzdGluZ0l0ZW0pOwoKICAgICAgICAgIHJldHVybiBleGlzdGluZ0l0ZW07CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9XSk7CgogIHJldHVybiBDb2xsZWN0aW9uVXBkYXRlcjsKfSgpKTs="},{"version":3,"sources":["C:/dev/freshnet-vue/src/stores/tools/CollectionUpdater.js"],"names":["module","exports","context","itemIdGetter","updater","itemOccured","items","getters","existingItem","find","item","existingIndex","indexOf","push","commit","Date","now","id"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAAA,MAAM,CAACC,OAAP;AAAA;;AAMC,6BAAYC,OAAZ,EAAqB;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AACpB,0CAAgBA,OAAhB;AACA;;AARF;AAAA;AAAA,WAUC,cAAKC,YAAL,EAAmB;AAClB,iDAAqBA,YAArB;;AACA,aAAO,IAAP;AACA;AAbF;AAAA;AAAA,WAcC,kBAASC,OAAT,EAAkB;AACjB,4CAAgBA,OAAhB;;AACA,aAAO,IAAP;AACA;AAjBF;AAAA;AAAA,WAmBC,iBAAQC,WAAR,EAAqB;AAAA;;AACpB,UAAMC,KAAK,GAAG,sCAAcC,OAAd,CAAsBD,KAApC;;AACA,UAAME,YAAY,GAAGF,KAAK,CAACG,IAAN,CACpB,UAACC,IAAD;AAAA,eAAU,sBAAA,KAAI,gBAAJ,MAAA,KAAI,EAAeA,IAAf,CAAJ,2BAA6B,KAA7B,sBAA6B,KAA7B,EAAgDL,WAAhD,CAAV;AAAA,OADoB,CAArB;;AAIA,UAAIG,YAAJ,EAAkB;AACjB,kCAAI,IAAJ,aAAmB;AAClB,2DAAcA,YAAd,EAA4BH,WAA5B;;AACA,iBAAOG,YAAP;AACA,SAHD,MAGO;AACN,cAAMG,aAAa,GAAGL,KAAK,CAACM,OAAN,CAAcJ,YAAd,CAAtB;AACAF,UAAAA,KAAK,CAACK,aAAD,CAAL,GAAuBN,WAAvB;AACA,iBAAOA,WAAP;AACA;AACD,OATD,MASO;AACNC,QAAAA,KAAK,CAACO,IAAN,CAAWR,WAAX;;AACA,8CAAcS,MAAd,CAAqB,OAArB,EAA8BR,KAA9B;;AACA,8CAAcQ,MAAd,CAAqB,cAArB,EAAqCC,IAAI,CAACC,GAAL,EAArC;;AACA,eAAOX,WAAP;AACA;AACD;AAxCF;AAAA;AAAA,WA0CC,qBAAYY,EAAZ,EAAgB;AAAA;;AACf,UAAMX,KAAK,GAAG,sCAAcC,OAAd,CAAsBD,KAApC;;AACA,UAAME,YAAY,GAAGF,KAAK,CAACG,IAAN,CAAW,UAACC,IAAD;AAAA,eAAU,sBAAA,MAAI,gBAAJ,MAAA,MAAI,EAAeA,IAAf,CAAJ,KAA6BO,EAAvC;AAAA,OAAX,CAArB;;AAEA,UAAIT,YAAJ,EAAkB;AACjB,kCAAI,IAAJ,aAAmB;AAClB,2DAAcA,YAAd;;AACA,iBAAOA,YAAP;AACA;AACD;;AACD,aAAO,IAAP;AACA;AArDF;;AAAA;AAAA","sourcesContent":["module.exports = class CollectionUpdater {\r\n\t#context;\r\n\r\n\t#itemIdGetter;\r\n\t#updater;\r\n\r\n\tconstructor(context) {\r\n\t\tthis.#context = context;\r\n\t}\r\n\r\n\tonId(itemIdGetter) {\r\n\t\tthis.#itemIdGetter = itemIdGetter;\r\n\t\treturn this;\r\n\t}\r\n\tonUpdate(updater) {\r\n\t\tthis.#updater = updater;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgetItem(itemOccured) {\r\n\t\tconst items = this.#context.getters.items;\r\n\t\tconst existingItem = items.find(\r\n\t\t\t(item) => this.#itemIdGetter(item) === this.#itemIdGetter(itemOccured),\r\n\t\t);\r\n\r\n\t\tif (existingItem) {\r\n\t\t\tif (this.#updater) {\r\n\t\t\t\tthis.#updater(existingItem, itemOccured);\r\n\t\t\t\treturn existingItem;\r\n\t\t\t} else {\r\n\t\t\t\tconst existingIndex = items.indexOf(existingItem);\r\n\t\t\t\titems[existingIndex] = itemOccured;\r\n\t\t\t\treturn itemOccured;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\titems.push(itemOccured);\r\n\t\t\tthis.#context.commit(\"items\", items);\r\n\t\t\tthis.#context.commit(\"lastModified\", Date.now());\r\n\t\t\treturn itemOccured;\r\n\t\t}\r\n\t}\r\n\r\n\tgetItemById(id) {\r\n\t\tconst items = this.#context.getters.items;\r\n\t\tconst existingItem = items.find((item) => this.#itemIdGetter(item) === id);\r\n\r\n\t\tif (existingItem) {\r\n\t\t\tif (this.#updater) {\r\n\t\t\t\tthis.#updater(existingItem);\r\n\t\t\t\treturn existingItem;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n};\r\n"]}]}