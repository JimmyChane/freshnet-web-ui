{"remainingRequest":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-v2\\vue\\src\\stores\\tools\\CollectionUpdater.js","dependencies":[{"path":"C:\\dev\\freshnet-v2\\vue\\src\\stores\\tools\\CollectionUpdater.js","mtime":1666953098434},{"path":"C:\\dev\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9jbGFzc0NhbGxDaGVjayA9IHJlcXVpcmUoIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxjbGFzc0NhbGxDaGVjay5qcyIpLmRlZmF1bHQ7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gcmVxdWlyZSgiQzpcXGRldlxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGNyZWF0ZUNsYXNzLmpzIikuZGVmYXVsdDsKCnZhciBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYyA9IHJlcXVpcmUoIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxjbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjLmpzIikuZGVmYXVsdDsKCnZhciBfY2xhc3NQcml2YXRlRmllbGRHZXQgPSByZXF1aXJlKCJDOlxcZGV2XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcY2xhc3NQcml2YXRlRmllbGRHZXQuanMiKS5kZWZhdWx0OwoKdmFyIF9jbGFzc1ByaXZhdGVGaWVsZFNldCA9IHJlcXVpcmUoIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxjbGFzc1ByaXZhdGVGaWVsZFNldC5qcyIpLmRlZmF1bHQ7Cgp2YXIgX2NvbnRleHQsIF9pdGVtSWRHZXR0ZXIsIF91cGRhdGVyOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy53ZWFrLW1hcC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIik7Cgptb2R1bGUuZXhwb3J0cyA9IChfY29udGV4dCA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha01hcCgpLCBfaXRlbUlkR2V0dGVyID0gLyojX19QVVJFX18qL25ldyBXZWFrTWFwKCksIF91cGRhdGVyID0gLyojX19QVVJFX18qL25ldyBXZWFrTWFwKCksIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgInVzZSBzdHJpY3QiOwoKICBmdW5jdGlvbiBDb2xsZWN0aW9uVXBkYXRlcihjb250ZXh0KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29sbGVjdGlvblVwZGF0ZXIpOwoKICAgIF9jbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjKHRoaXMsIF9jb250ZXh0LCB7CiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogdm9pZCAwCiAgICB9KTsKCiAgICBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYyh0aGlzLCBfaXRlbUlkR2V0dGVyLCB7CiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogdm9pZCAwCiAgICB9KTsKCiAgICBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYyh0aGlzLCBfdXBkYXRlciwgewogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IHZvaWQgMAogICAgfSk7CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9jb250ZXh0LCBjb250ZXh0KTsKICB9CgogIF9jcmVhdGVDbGFzcyhDb2xsZWN0aW9uVXBkYXRlciwgW3sKICAgIGtleTogIm9uSWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uSWQoaXRlbUlkR2V0dGVyKSB7CiAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfaXRlbUlkR2V0dGVyLCBpdGVtSWRHZXR0ZXIpOwoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAib25VcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uVXBkYXRlKHVwZGF0ZXIpIHsKICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF91cGRhdGVyLCB1cGRhdGVyKTsKCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEl0ZW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW0oaXRlbU9jY3VyZWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBpdGVtcyA9IF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfY29udGV4dCkuZ2V0dGVycy5pdGVtczsKCiAgICAgIHZhciBleGlzdGluZ0l0ZW0gPSBpdGVtcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIF9jbGFzc1ByaXZhdGVGaWVsZEdldChfdGhpcywgX2l0ZW1JZEdldHRlcikuY2FsbChfdGhpcywgaXRlbSkgPT09IF9jbGFzc1ByaXZhdGVGaWVsZEdldChfdGhpcywgX2l0ZW1JZEdldHRlcikuY2FsbChfdGhpcywgaXRlbU9jY3VyZWQpOwogICAgICB9KTsKCiAgICAgIGlmIChleGlzdGluZ0l0ZW0pIHsKICAgICAgICBpZiAoX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF91cGRhdGVyKSkgewogICAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF91cGRhdGVyKS5jYWxsKHRoaXMsIGV4aXN0aW5nSXRlbSwgaXRlbU9jY3VyZWQpOwoKICAgICAgICAgIHJldHVybiBleGlzdGluZ0l0ZW07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBleGlzdGluZ0luZGV4ID0gaXRlbXMuaW5kZXhPZihleGlzdGluZ0l0ZW0pOwogICAgICAgICAgaXRlbXNbZXhpc3RpbmdJbmRleF0gPSBpdGVtT2NjdXJlZDsKICAgICAgICAgIHJldHVybiBpdGVtT2NjdXJlZDsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaXRlbXMucHVzaChpdGVtT2NjdXJlZCk7CgogICAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfY29udGV4dCkuY29tbWl0KCJpdGVtcyIsIGl0ZW1zKTsKCiAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9jb250ZXh0KS5jb21taXQoImxhc3RNb2RpZmllZCIsIERhdGUubm93KCkpOwoKICAgICAgICByZXR1cm4gaXRlbU9jY3VyZWQ7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRJdGVtQnlJZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SXRlbUJ5SWQoaWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgaXRlbXMgPSBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX2NvbnRleHQpLmdldHRlcnMuaXRlbXM7CgogICAgICB2YXIgZXhpc3RpbmdJdGVtID0gaXRlbXMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBfY2xhc3NQcml2YXRlRmllbGRHZXQoX3RoaXMyLCBfaXRlbUlkR2V0dGVyKS5jYWxsKF90aGlzMiwgaXRlbSkgPT09IGlkOwogICAgICB9KTsKCiAgICAgIGlmIChleGlzdGluZ0l0ZW0pIHsKICAgICAgICBpZiAoX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF91cGRhdGVyKSkgewogICAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF91cGRhdGVyKS5jYWxsKHRoaXMsIGV4aXN0aW5nSXRlbSk7CgogICAgICAgICAgcmV0dXJuIGV4aXN0aW5nSXRlbTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIENvbGxlY3Rpb25VcGRhdGVyOwp9KCkpOw=="},{"version":3,"sources":["C:/dev/freshnet-v2/vue/src/stores/tools/CollectionUpdater.js"],"names":["module","exports","context","itemIdGetter","updater","itemOccured","items","getters","existingItem","find","item","existingIndex","indexOf","push","commit","Date","now","id"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAAA,MAAM,CAACC,OAAP;AAAA;;AAMC,6BAAYC,OAAZ,EAAqB;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AACpB,0CAAgBA,OAAhB;AACA;;AARF;AAAA;AAAA,WAUC,cAAKC,YAAL,EAAmB;AAClB,iDAAqBA,YAArB;;AACA,aAAO,IAAP;AACA;AAbF;AAAA;AAAA,WAcC,kBAASC,OAAT,EAAkB;AACjB,4CAAgBA,OAAhB;;AACA,aAAO,IAAP;AACA;AAjBF;AAAA;AAAA,WAmBC,iBAAQC,WAAR,EAAqB;AAAA;;AACpB,UAAMC,KAAK,GAAG,sCAAcC,OAAd,CAAsBD,KAApC;;AACA,UAAME,YAAY,GAAGF,KAAK,CAACG,IAAN,CACpB,UAACC,IAAD;AAAA,eAAU,sBAAA,KAAI,gBAAJ,MAAA,KAAI,EAAeA,IAAf,CAAJ,2BAA6B,KAA7B,sBAA6B,KAA7B,EAAgDL,WAAhD,CAAV;AAAA,OADoB,CAArB;;AAIA,UAAIG,YAAJ,EAAkB;AACjB,kCAAI,IAAJ,aAAmB;AAClB,2DAAcA,YAAd,EAA4BH,WAA5B;;AACA,iBAAOG,YAAP;AACA,SAHD,MAGO;AACN,cAAMG,aAAa,GAAGL,KAAK,CAACM,OAAN,CAAcJ,YAAd,CAAtB;AACAF,UAAAA,KAAK,CAACK,aAAD,CAAL,GAAuBN,WAAvB;AACA,iBAAOA,WAAP;AACA;AACD,OATD,MASO;AACNC,QAAAA,KAAK,CAACO,IAAN,CAAWR,WAAX;;AACA,8CAAcS,MAAd,CAAqB,OAArB,EAA8BR,KAA9B;;AACA,8CAAcQ,MAAd,CAAqB,cAArB,EAAqCC,IAAI,CAACC,GAAL,EAArC;;AACA,eAAOX,WAAP;AACA;AACD;AAxCF;AAAA;AAAA,WA0CC,qBAAYY,EAAZ,EAAgB;AAAA;;AACf,UAAMX,KAAK,GAAG,sCAAcC,OAAd,CAAsBD,KAApC;;AACA,UAAME,YAAY,GAAGF,KAAK,CAACG,IAAN,CAAW,UAACC,IAAD;AAAA,eAAU,sBAAA,MAAI,gBAAJ,MAAA,MAAI,EAAeA,IAAf,CAAJ,KAA6BO,EAAvC;AAAA,OAAX,CAArB;;AAEA,UAAIT,YAAJ,EAAkB;AACjB,kCAAI,IAAJ,aAAmB;AAClB,2DAAcA,YAAd;;AACA,iBAAOA,YAAP;AACA;AACD;;AACD,aAAO,IAAP;AACA;AArDF;;AAAA;AAAA","sourcesContent":["module.exports = class CollectionUpdater {\r\n\t#context;\r\n\r\n\t#itemIdGetter;\r\n\t#updater;\r\n\r\n\tconstructor(context) {\r\n\t\tthis.#context = context;\r\n\t}\r\n\r\n\tonId(itemIdGetter) {\r\n\t\tthis.#itemIdGetter = itemIdGetter;\r\n\t\treturn this;\r\n\t}\r\n\tonUpdate(updater) {\r\n\t\tthis.#updater = updater;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgetItem(itemOccured) {\r\n\t\tconst items = this.#context.getters.items;\r\n\t\tconst existingItem = items.find(\r\n\t\t\t(item) => this.#itemIdGetter(item) === this.#itemIdGetter(itemOccured),\r\n\t\t);\r\n\r\n\t\tif (existingItem) {\r\n\t\t\tif (this.#updater) {\r\n\t\t\t\tthis.#updater(existingItem, itemOccured);\r\n\t\t\t\treturn existingItem;\r\n\t\t\t} else {\r\n\t\t\t\tconst existingIndex = items.indexOf(existingItem);\r\n\t\t\t\titems[existingIndex] = itemOccured;\r\n\t\t\t\treturn itemOccured;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\titems.push(itemOccured);\r\n\t\t\tthis.#context.commit(\"items\", items);\r\n\t\t\tthis.#context.commit(\"lastModified\", Date.now());\r\n\t\t\treturn itemOccured;\r\n\t\t}\r\n\t}\r\n\r\n\tgetItemById(id) {\r\n\t\tconst items = this.#context.getters.items;\r\n\t\tconst existingItem = items.find((item) => this.#itemIdGetter(item) === id);\r\n\r\n\t\tif (existingItem) {\r\n\t\t\tif (this.#updater) {\r\n\t\t\t\tthis.#updater(existingItem);\r\n\t\t\t\treturn existingItem;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n};\r\n"]}]}