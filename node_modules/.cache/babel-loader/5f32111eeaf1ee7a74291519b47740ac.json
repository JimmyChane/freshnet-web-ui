{"remainingRequest":"C:\\development\\freshnet-v2\\vue\\node_modules\\thread-loader\\dist\\cjs.js!C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\development\\freshnet-v2\\vue\\src\\stores\\store.customer.js","dependencies":[{"path":"C:\\development\\freshnet-v2\\vue\\src\\stores\\store.customer.js","mtime":1663504444443},{"path":"C:\\development\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1662650934417},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZS5hbGwtc2V0dGxlZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgVnVleCBmcm9tICJ2dWV4IjsKaW1wb3J0IEFwaUhvc3QgZnJvbSAiQC9ob3N0L0FwaUhvc3QuanMiOwppbXBvcnQgRGF0YUxvYWRlciBmcm9tICIuL2NvbXBvbmVudHMvRGF0YUxvYWRlciI7CmltcG9ydCBDb2xsZWN0aW9uVXBkYXRlciBmcm9tICIuL2NvbXBvbmVudHMvQ29sbGVjdGlvblVwZGF0ZXIiOwppbXBvcnQgUHJvY2Vzc29yIGZyb20gIi4vY29tcG9uZW50cy9Qcm9jZXNzb3IuanMiOwppbXBvcnQgSXRlbUN1c3RvbWVyIGZyb20gIi4uL2l0ZW1zL0N1c3RvbWVyLmpzIjsKaW1wb3J0IEl0ZW1DdXN0b21lckRldmljZSBmcm9tICIuLi9pdGVtcy9DdXN0b21lckRldmljZS5qcyI7Cgp2YXIgYXBpVGhlbkNvbnRlbnQgPSBmdW5jdGlvbiBhcGlUaGVuQ29udGVudChhcGkpIHsKICB2YXIgZXJyb3IgPSBhcGkuZ2V0RXJyb3IoKTsKICB2YXIgZnJpZW5kbHlFcnJvciA9IGFwaS5nZXRFcnJvckZyaWVuZGx5KCk7CiAgaWYgKGVycm9yKSB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpOwogIGlmIChmcmllbmRseUVycm9yKSB0aHJvdyBuZXcgRXJyb3IoZnJpZW5kbHlFcnJvcik7CiAgcmV0dXJuIGFwaS5nZXRDb250ZW50KCk7Cn07Cgp2YXIgdXBkYXRlVGhlbkl0ZW0gPSBmdW5jdGlvbiB1cGRhdGVUaGVuSXRlbShjb250ZXh0LCBpZCwgY2FsbGJhY2spIHsKICB2YXIgaXRlbXMgPSBjb250ZXh0LnN0YXRlLml0ZW1zOwogIHZhciBpdGVtID0gaXRlbXMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIGl0ZW0uZ2V0SWQoKSA9PT0gaWQ7CiAgfSk7CiAgY2FsbGJhY2soaXRlbSk7CiAgY29udGV4dC5jb21taXQoIml0ZW1zIiwgaXRlbXMpOwogIHJldHVybiBpdGVtOwp9OwoKdmFyIF9nZXRJdGVtQnlJZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGNvbnRleHQpIHsKICAgIHZhciBpZCwKICAgICAgICBfYXJnczIgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZCA9IF9hcmdzMi5sZW5ndGggPiAxICYmIF9hcmdzMlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MyWzFdIDogIiI7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJnZXRJdGVtQnlJZCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICAgICAgdmFyIGl0ZW1zLCBpdGVtOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIGlmICghKHR5cGVvZiBpZCAhPT0gInN0cmluZyIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBudWxsKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiZ2V0SXRlbXMiKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW1zLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZ2V0SWQoKSA9PT0gaWQ7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGl0ZW0gPyBpdGVtIDogbnVsbCk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRJdGVtQnlJZChfeCkgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7Cgp2YXIgX2dldEl0ZW1zQnlJZHMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoY29udGV4dCkgewogICAgdmFyIGlkcywKICAgICAgICBfYXJnczQgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZHMgPSBfYXJnczQubGVuZ3RoID4gMSAmJiBfYXJnczRbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmdzNFsxXSA6IFtdOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgiZ2V0SXRlbXNCeUlkcyIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgICAgICAgIHZhciBpdGVtcywgcmVzdWx0czsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGlkcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgW10pOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiZ2V0SXRlbXMiKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSBpZHMubWFwKGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5nZXRJZCgpID09PSBpZDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtID8gaXRlbSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCByZXN1bHRzKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNCk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gZ2V0SXRlbXNCeUlkcyhfeDIpIHsKICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBjdXN0b21lclN0b3JlID0gbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiB7CiAgICBkYXRhTG9hZGVyOiBuZXcgRGF0YUxvYWRlcih7CiAgICAgIHRpbWVvdXQ6IDEwMDAgKiA2MCAqIDEwCiAgICB9KSAvLyAxMG1pbgogICAgLnByb2Nlc3NvcihmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBjdXN0b21lclN0b3JlLnN0YXRlLnByb2Nlc3NvcjsKICAgIH0pLmxvYWREYXRhKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgdmFyIGFwaSwgY29udGVudCwgY29udGVudHMsIGl0ZW1zOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkudXJsKCJjdXN0b21lci9saXN0Iikuc2VuZCgpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGlUaGVuQ29udGVudChhcGkpOwogICAgICAgICAgICAgIGNvbnRlbnRzID0gQXJyYXkuaXNBcnJheShjb250ZW50KSA/IGNvbnRlbnQgOiBbXTsKICAgICAgICAgICAgICBpdGVtcyA9IGNvbnRlbnRzLm1hcChmdW5jdGlvbiAoY29udGVudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJdGVtQ3VzdG9tZXIoY29udGVudCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIGl0ZW1zKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU1KTsKICAgIH0pKSkuc2V0RGF0YShmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gY3VzdG9tZXJTdG9yZS5jb21taXQoIml0ZW1zIiwgQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbXSk7CiAgICB9KS5nZXREYXRhKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGN1c3RvbWVyU3RvcmUuZ2V0dGVycy5pdGVtczsKICAgIH0pLAogICAgaXRlbXM6IFtdLAogICAgcHJvY2Vzc29yOiBuZXcgUHJvY2Vzc29yKCkKICB9LAogIG11dGF0aW9uczogewogICAgaXRlbXM6IGZ1bmN0aW9uIGl0ZW1zKHN0YXRlLCBfaXRlbXMpIHsKICAgICAgcmV0dXJuIHN0YXRlLml0ZW1zID0gX2l0ZW1zOwogICAgfQogIH0sCiAgZ2V0dGVyczogewogICAgaXNMb2FkaW5nOiBmdW5jdGlvbiBpc0xvYWRpbmcoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnByb2Nlc3Nvci5pc0xvYWRpbmcoKTsKICAgIH0sCiAgICBpdGVtczogZnVuY3Rpb24gaXRlbXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLml0ZW1zOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaChjb250ZXh0KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgicmVmcmVzaCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3RhdGUuZGF0YUxvYWRlci5kb1RpbWVvdXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlzcGF0Y2goImdldEl0ZW1zIik7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0SXRlbXM6IGZ1bmN0aW9uIGdldEl0ZW1zKGNvbnRleHQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJnZXRJdGVtcyIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLmRhdGFMb2FkZXIuZGF0YSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRJdGVtQnlJZDogZnVuY3Rpb24gZ2V0SXRlbUJ5SWQoY29udGV4dCkgewogICAgICB2YXIgaWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICIiOwogICAgICByZXR1cm4gX2dldEl0ZW1CeUlkKGNvbnRleHQsIGlkKTsKICAgIH0sCiAgICBnZXRJdGVtc0J5SWRzOiBmdW5jdGlvbiBnZXRJdGVtc0J5SWRzKGNvbnRleHQpIHsKICAgICAgdmFyIGlkcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107CiAgICAgIHJldHVybiBfZ2V0SXRlbXNCeUlkcyhjb250ZXh0LCBpZHMpOwogICAgfSwKICAgIHJlbW92ZUl0ZW1CeUlkOiBmdW5jdGlvbiByZW1vdmVJdGVtQnlJZChjb250ZXh0KSB7CiAgICAgIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoKSB7CiAgICAgICAgdmFyIGFyZzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGFyZyA9IF9hcmd1bWVudHMubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzWzFdIDogewogICAgICAgICAgICAgICAgICBfaWQ6IF9pZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgicmVtb3ZlSXRlbUJ5SWQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfaWQsIGFwaSwgY29udGVudCwgaXRlbSwgaXRlbXM7CgogICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBfaWQgPSBhcmcuX2lkOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QucmVxdWVzdCgpLkRFTEVURSgpLnVybCgiY3VzdG9tZXIvcmVtb3ZlIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZDogX2lkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc2VuZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0MTAuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYXBpVGhlbkNvbnRlbnQoYXBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbmV3IEl0ZW1DdXN0b21lcihjb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IGNvbnRleHQuc3RhdGUuaXRlbXMuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5nZXRJZCgpICE9PSBpdGVtLmdldElkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoIml0ZW1zIiwgaXRlbXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgaXRlbSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTEwKTsKICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGFkZEl0ZW06IGZ1bmN0aW9uIGFkZEl0ZW0oY29udGV4dCkgewogICAgICB2YXIgX2FyZ3VtZW50czIgPSBhcmd1bWVudHM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMygpIHsKICAgICAgICB2YXIgYXJnOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czIubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzMlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czJbMV0gOiB7fTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgiYWRkSXRlbSIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMigpIHsKICAgICAgICAgICAgICAgICAgdmFyIGRhdGEsIGFwaSwgY29udGVudCwgaXRlbTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBJdGVtQ3VzdG9tZXIoYXJnKS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBkYXRhLl9pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5QT1NUKCkudXJsKCJjdXN0b21lci9hZGQiKS5ib2R5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQxMi5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGlUaGVuQ29udGVudChhcGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBuZXcgSXRlbUN1c3RvbWVyKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBuZXcgQ29sbGVjdGlvblVwZGF0ZXIoY29udGV4dCkub25JZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZ2V0SWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5nZXRJdGVtKGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIiwgaXRlbSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTEyKTsKICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHVwZGF0ZU5hbWVQaG9uZU51bWJlck9mSXRlbUlkOiBmdW5jdGlvbiB1cGRhdGVOYW1lUGhvbmVOdW1iZXJPZkl0ZW1JZChjb250ZXh0KSB7CiAgICAgIHZhciBfYXJndW1lbnRzMyA9IGFyZ3VtZW50czsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE1KCkgewogICAgICAgIHZhciBhcmc7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNSQoX2NvbnRleHQxNSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBhcmcgPSBfYXJndW1lbnRzMy5sZW5ndGggPiAxICYmIF9hcmd1bWVudHMzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzM1sxXSA6IHsKICAgICAgICAgICAgICAgICAgX2lkOiBfaWQsCiAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBwaG9uZU51bWJlcgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgidXBkYXRlTmFtZVBob25lTnVtYmVyT2ZJdGVtSWQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTQoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfaWQsIG5hbWUsIHBob25lTnVtYmVyLCBhcGksIGNvbnRlbnQsIGl0ZW07CgogICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE0JChfY29udGV4dDE0KSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBfaWQgPSBhcmcuX2lkLCBuYW1lID0gYXJnLm5hbWUsIHBob25lTnVtYmVyID0gYXJnLnBob25lTnVtYmVyOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QucmVxdWVzdCgpLlBVVCgpLnVybCgiY3VzdG9tZXIvdXBkYXRlL25hbWVQaG9uZU51bWJlciIpLmJvZHkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaWQ6IF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lTnVtYmVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc2VuZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0MTQuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYXBpVGhlbkNvbnRlbnQoYXBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbmV3IEl0ZW1DdXN0b21lcihjb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbmV3IENvbGxlY3Rpb25VcGRhdGVyKGNvbnRleHQpLm9uSWQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmdldElkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkub25VcGRhdGUoZnVuY3Rpb24gKGl0ZW0xLCBpdGVtMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTEuc2V0TmFtZShpdGVtMi5nZXROYW1lKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTEuc2V0UGhvbmVOdW1iZXIoaXRlbTIuZ2V0UGhvbmVOdW1iZXIoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZ2V0SXRlbShpdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIGl0ZW0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxNCk7CiAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1cGRhdGVEZXNjcmlwdGlvbk9mSXRlbUlkOiBmdW5jdGlvbiB1cGRhdGVEZXNjcmlwdGlvbk9mSXRlbUlkKGNvbnRleHQpIHsKICAgICAgdmFyIF9hcmd1bWVudHM0ID0gYXJndW1lbnRzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTcoKSB7CiAgICAgICAgdmFyIGFyZzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE3JChfY29udGV4dDE3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTcucHJldiA9IF9jb250ZXh0MTcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGFyZyA9IF9hcmd1bWVudHM0Lmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czRbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHM0WzFdIDogewogICAgICAgICAgICAgICAgICBfaWQ6IF9pZCwKICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJ1cGRhdGVEZXNjcmlwdGlvbk9mSXRlbUlkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE2KCkgewogICAgICAgICAgICAgICAgICB2YXIgX2lkLCBkZXNjcmlwdGlvbiwgYXBpLCBjb250ZW50LCBpdGVtOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNiQoX2NvbnRleHQxNikgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTYucHJldiA9IF9jb250ZXh0MTYubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkID0gYXJnLl9pZCwgZGVzY3JpcHRpb24gPSBhcmcuZGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuUFVUKCkudXJsKCJjdXN0b21lci91cGRhdGUvZGVzY3JpcHRpb24iKS5ib2R5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkOiBfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDE2LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaVRoZW5Db250ZW50KGFwaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBJdGVtQ3VzdG9tZXIoY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBDb2xsZWN0aW9uVXBkYXRlcihjb250ZXh0KS5vbklkKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5nZXRJZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pLm9uVXBkYXRlKGZ1bmN0aW9uIChpdGVtMSwgaXRlbTIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0xLnNldERlc2NyaXB0aW9uKGl0ZW0yLmdldERlc2NyaXB0aW9uKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldEl0ZW0oaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTYuYWJydXB0KCJyZXR1cm4iLCBpdGVtKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTYpOwogICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE3KTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9KTsKdmFyIGRldmljZVN0b3JlID0gbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiB7CiAgICBkYXRhTG9hZGVyOiBuZXcgRGF0YUxvYWRlcih7CiAgICAgIHRpbWVvdXQ6IDEwMDAgKiA2MCAqIDEwCiAgICB9KSAvLyAxMG1pbgogICAgLnByb2Nlc3NvcihmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBkZXZpY2VTdG9yZS5zdGF0ZS5wcm9jZXNzb3I7CiAgICB9KS5sb2FkRGF0YSggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE4KCkgewogICAgICB2YXIgYXBpLCBjb250ZW50LCBjb250ZW50cywgaXRlbXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTgkKF9jb250ZXh0MTgpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDE4LnByZXYgPSBfY29udGV4dDE4Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QucmVxdWVzdCgpLnVybCgiY3VzdG9tZXIvZGV2aWNlL2xpc3QiKS5zZW5kKCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQxOC5zZW50OwogICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGlUaGVuQ29udGVudChhcGkpOwogICAgICAgICAgICAgIGNvbnRlbnRzID0gQXJyYXkuaXNBcnJheShjb250ZW50KSA/IGNvbnRlbnQgOiBbXTsKICAgICAgICAgICAgICBpdGVtcyA9IGNvbnRlbnRzLm1hcChmdW5jdGlvbiAoY29udGVudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJdGVtQ3VzdG9tZXJEZXZpY2UoY29udGVudCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguYWJydXB0KCJyZXR1cm4iLCBpdGVtcyk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTE4KTsKICAgIH0pKSkuc2V0RGF0YShmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gZGV2aWNlU3RvcmUuY29tbWl0KCJpdGVtcyIsIEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW10pOwogICAgfSkuZ2V0RGF0YShmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBkZXZpY2VTdG9yZS5nZXR0ZXJzLml0ZW1zOwogICAgfSksCiAgICBpdGVtczogW10sCiAgICBwcm9jZXNzb3I6IG5ldyBQcm9jZXNzb3IoKQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBpdGVtczogZnVuY3Rpb24gaXRlbXMoc3RhdGUsIF9pdGVtczIpIHsKICAgICAgcmV0dXJuIHN0YXRlLml0ZW1zID0gX2l0ZW1zMjsKICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIGlzTG9hZGluZzogZnVuY3Rpb24gaXNMb2FkaW5nKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5wcm9jZXNzb3IuaXNMb2FkaW5nKCk7CiAgICB9LAogICAgaXRlbXM6IGZ1bmN0aW9uIGl0ZW1zKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5pdGVtczsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goY29udGV4dCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjAoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMCQoX2NvbnRleHQyMCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIwLnByZXYgPSBfY29udGV4dDIwLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoInJlZnJlc2giLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTkoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTkkKF9jb250ZXh0MTkpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE5LnByZXYgPSBfY29udGV4dDE5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3RhdGUuZGF0YUxvYWRlci5kb1RpbWVvdXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCJnZXRJdGVtcyIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxOSk7CiAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMjApOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRJdGVtczogZnVuY3Rpb24gZ2V0SXRlbXMoY29udGV4dCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMiQoX2NvbnRleHQyMikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIyLnByZXYgPSBfY29udGV4dDIyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMi5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoImdldEl0ZW1zIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIxKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIxJChfY29udGV4dDIxKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMS5wcmV2ID0gX2NvbnRleHQyMS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMS5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUuZGF0YUxvYWRlci5kYXRhKCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyMSk7CiAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMjIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRJdGVtQnlJZDogZnVuY3Rpb24gZ2V0SXRlbUJ5SWQoY29udGV4dCkgewogICAgICB2YXIgaWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICIiOwogICAgICByZXR1cm4gX2dldEl0ZW1CeUlkKGNvbnRleHQsIGlkKTsKICAgIH0sCiAgICBnZXRJdGVtc0J5SWRzOiBmdW5jdGlvbiBnZXRJdGVtc0J5SWRzKGNvbnRleHQpIHsKICAgICAgdmFyIGlkcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107CiAgICAgIHJldHVybiBfZ2V0SXRlbXNCeUlkcyhjb250ZXh0LCBpZHMpOwogICAgfSwKICAgIHJlbW92ZUl0ZW1CeUlkOiBmdW5jdGlvbiByZW1vdmVJdGVtQnlJZChjb250ZXh0KSB7CiAgICAgIHZhciBfYXJndW1lbnRzNSA9IGFyZ3VtZW50czsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI0KCkgewogICAgICAgIHZhciBhcmc7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyNCQoX2NvbnRleHQyNCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI0LnByZXYgPSBfY29udGV4dDI0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBhcmcgPSBfYXJndW1lbnRzNS5sZW5ndGggPiAxICYmIF9hcmd1bWVudHM1WzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzNVsxXSA6IHt9OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjQuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJyZW1vdmVJdGVtQnlJZCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMygpIHsKICAgICAgICAgICAgICAgICAgdmFyIGFwaSwgY29udGVudCwgaXRlbSwgY3VzdG9tZXIsIGl0ZW1zOwogICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIzJChfY29udGV4dDIzKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMy5wcmV2ID0gX2NvbnRleHQyMy5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5ERUxFVEUoKS51cmwoImN1c3RvbWVyL2RldmljZS9yZW1vdmUiKS5ib2R5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3duZXJDdXN0b21lcklkOiBhcmcub3duZXJDdXN0b21lcklkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VJZDogYXJnLl9pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDIzLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaVRoZW5Db250ZW50KGFwaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBJdGVtQ3VzdG9tZXJEZXZpY2UoY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXIgPSBjdXN0b21lclN0b3JlLmdldHRlcnMuaXRlbXMuZmluZChmdW5jdGlvbiAoY3VzdG9tZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21lci5nZXRJZCgpID09PSBpdGVtLmdldE93bmVyQ3VzdG9tZXJJZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyLnNldERldmljZUlkcyhjdXN0b21lci5nZXREZXZpY2VJZHMoKS5maWx0ZXIoZnVuY3Rpb24gKGRldmljZUlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGV2aWNlSWQgIT09IGl0ZW0uZ2V0SWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBjb250ZXh0LnN0YXRlLml0ZW1zOwogICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChleGlzdGluZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nLmdldElkKCkgIT09IGl0ZW0uZ2V0SWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgiaXRlbXMiLCBpdGVtcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjMuYWJydXB0KCJyZXR1cm4iLCBpdGVtKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTIzKTsKICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGFkZEl0ZW06IGZ1bmN0aW9uIGFkZEl0ZW0oY29udGV4dCkgewogICAgICB2YXIgX2FyZ3VtZW50czYgPSBhcmd1bWVudHM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNigpIHsKICAgICAgICB2YXIgYXJnOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjYkKF9jb250ZXh0MjYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyNi5wcmV2ID0gX2NvbnRleHQyNi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czYubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzNlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czZbMV0gOiB7fTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI2LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgiYWRkSXRlbSIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNSgpIHsKICAgICAgICAgICAgICAgICAgdmFyIGRhdGEsIGFwaSwgY29udGVudCwgaXRlbSwgY3VzdG9tZXI7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjUkKF9jb250ZXh0MjUpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI1LnByZXYgPSBfY29udGV4dDI1Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgSXRlbUN1c3RvbWVyRGV2aWNlKGFyZykuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZGF0YS5faWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuUE9TVCgpLnVybCgiY3VzdG9tZXIvZGV2aWNlL2FkZCIpLmJvZHkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDI1LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaVRoZW5Db250ZW50KGFwaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBJdGVtQ3VzdG9tZXJEZXZpY2UoY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBDb2xsZWN0aW9uVXBkYXRlcihjb250ZXh0KS5vbklkKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5nZXRJZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldEl0ZW0oaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXIgPSBjdXN0b21lclN0b3JlLmdldHRlcnMuaXRlbXMuZmluZChmdW5jdGlvbiAoY3VzdG9tZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21lci5nZXRJZCgpID09PSBpdGVtLmdldE93bmVyQ3VzdG9tZXJJZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21lcikgY3VzdG9tZXIuZGV2aWNlSWRzLnB1c2goaXRlbS5nZXRJZCgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNS5hYnJ1cHQoInJldHVybiIsIGl0ZW0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjUpOwogICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTI2KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdXBkYXRlU3BlY2lmaWNhdGlvbnNPZkl0ZW1JZDogZnVuY3Rpb24gdXBkYXRlU3BlY2lmaWNhdGlvbnNPZkl0ZW1JZChjb250ZXh0KSB7CiAgICAgIHZhciBfYXJndW1lbnRzNyA9IGFyZ3VtZW50czsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI4KCkgewogICAgICAgIHZhciBhcmc7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyOCQoX2NvbnRleHQyOCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI4LnByZXYgPSBfY29udGV4dDI4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBhcmcgPSBfYXJndW1lbnRzNy5sZW5ndGggPiAxICYmIF9hcmd1bWVudHM3WzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzN1sxXSA6IHsKICAgICAgICAgICAgICAgICAgX2lkOiBfaWQsCiAgICAgICAgICAgICAgICAgIHNwZWNpZmljYXRpb25zOiBzcGVjaWZpY2F0aW9ucwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgidXBkYXRlU3BlY2lmaWNhdGlvbnNPZkl0ZW1JZCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNygpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9pZCwgc3BlY2lmaWNhdGlvbnMsIGFwaSwgY29udGVudCwgaXRlbTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjckKF9jb250ZXh0MjcpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI3LnByZXYgPSBfY29udGV4dDI3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIF9pZCA9IGFyZy5faWQsIHNwZWNpZmljYXRpb25zID0gYXJnLnNwZWNpZmljYXRpb25zOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjcubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QucmVxdWVzdCgpLlBVVCgpLnVybCgiY3VzdG9tZXIvZGV2aWNlL3VwZGF0ZS9zcGVjaWZpY2F0aW9ucyIpLmJvZHkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaWQ6IF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lmaWNhdGlvbnM6IHNwZWNpZmljYXRpb25zCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc2VuZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0Mjcuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYXBpVGhlbkNvbnRlbnQoYXBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbmV3IEl0ZW1DdXN0b21lckRldmljZShjb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gdXBkYXRlVGhlbkl0ZW0oY29udGV4dCwgaXRlbS5nZXRJZCgpLCBmdW5jdGlvbiAoaXRlbU5vdykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1Ob3cuc2V0U3BlY2lmaWNhdGlvbnMoaXRlbS5nZXRTcGVjaWZpY2F0aW9ucygpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNy5hYnJ1cHQoInJldHVybiIsIGl0ZW0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI3LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyNyk7CiAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMjgpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1cGRhdGVEZXNjcmlwdGlvbk9mSXRlbUlkOiBmdW5jdGlvbiB1cGRhdGVEZXNjcmlwdGlvbk9mSXRlbUlkKGNvbnRleHQpIHsKICAgICAgdmFyIF9hcmd1bWVudHM4ID0gYXJndW1lbnRzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMzAoKSB7CiAgICAgICAgdmFyIGFyZzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMwJChfY29udGV4dDMwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzAucHJldiA9IF9jb250ZXh0MzAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGFyZyA9IF9hcmd1bWVudHM4Lmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czhbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHM4WzFdIDogewogICAgICAgICAgICAgICAgICBfaWQ6IF9pZCwKICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzAuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJ1cGRhdGVEZXNjcmlwdGlvbk9mSXRlbUlkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI5KCkgewogICAgICAgICAgICAgICAgICB2YXIgX2lkLCBkZXNjcmlwdGlvbiwgYXBpLCBjb250ZW50LCBpdGVtOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyOSQoX2NvbnRleHQyOSkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjkucHJldiA9IF9jb250ZXh0MjkubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkID0gYXJnLl9pZCwgZGVzY3JpcHRpb24gPSBhcmcuZGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyOS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuUFVUKCkudXJsKCJjdXN0b21lci9kZXZpY2UvdXBkYXRlL2Rlc2NyaXB0aW9uIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZDogX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQyOS5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGlUaGVuQ29udGVudChhcGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBuZXcgSXRlbUN1c3RvbWVyRGV2aWNlKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSB1cGRhdGVUaGVuSXRlbShjb250ZXh0LCBpdGVtLmdldElkKCksIGZ1bmN0aW9uIChpdGVtTm93KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbU5vdy5zZXREZXNjcmlwdGlvbihpdGVtLmdldERlc2NyaXB0aW9uKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI5LmFicnVwdCgicmV0dXJuIiwgaXRlbSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mjkuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTI5KTsKICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzMCk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IHsKICBpbml0OiBmdW5jdGlvbiBpbml0KFN0b3JlcykgewogICAgcmV0dXJuIG5ldyBWdWV4LlN0b3JlKHsKICAgICAgZ2V0dGVyczogewogICAgICAgIGlzTG9hZGluZzogZnVuY3Rpb24gaXNMb2FkaW5nKCkgewogICAgICAgICAgcmV0dXJuIGN1c3RvbWVyU3RvcmUuZ2V0dGVycy5pc0xvYWRpbmcgfHwgZGV2aWNlU3RvcmUuZ2V0dGVycy5pc0xvYWRpbmc7CiAgICAgICAgfSwKICAgICAgICBjdXN0b21lcnM6IGZ1bmN0aW9uIGN1c3RvbWVycygpIHsKICAgICAgICAgIHJldHVybiBjdXN0b21lclN0b3JlLmdldHRlcnMuaXRlbXM7CiAgICAgICAgfSwKICAgICAgICBkZXZpY2VzOiBmdW5jdGlvbiBkZXZpY2VzKCkgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLmdldHRlcnMuaXRlbXM7CiAgICAgICAgfQogICAgICB9LAogICAgICBhY3Rpb25zOiB7CiAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaCgpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbFNldHRsZWQoW2N1c3RvbWVyU3RvcmUuZGlzcGF0Y2goInJlZnJlc2giKSwgZGV2aWNlU3RvcmUuZGlzcGF0Y2goInJlZnJlc2giKV0pOwogICAgICAgIH0sCiAgICAgICAgZ2V0Q3VzdG9tZXJzOiBmdW5jdGlvbiBnZXRDdXN0b21lcnMoKSB7CiAgICAgICAgICByZXR1cm4gY3VzdG9tZXJTdG9yZS5kaXNwYXRjaCgiZ2V0SXRlbXMiKTsKICAgICAgICB9LAogICAgICAgIGFkZEN1c3RvbWVyOiBmdW5jdGlvbiBhZGRDdXN0b21lcihjb250ZXh0KSB7CiAgICAgICAgICB2YXIgYXJnID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgICAgIHJldHVybiBjdXN0b21lclN0b3JlLmRpc3BhdGNoKCJhZGRJdGVtIiwgYXJnKTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZUN1c3RvbWVyT2ZJZDogZnVuY3Rpb24gcmVtb3ZlQ3VzdG9tZXJPZklkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBhcmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHsKICAgICAgICAgICAgX2lkOiBfaWQKICAgICAgICAgIH07CiAgICAgICAgICByZXR1cm4gY3VzdG9tZXJTdG9yZS5kaXNwYXRjaCgicmVtb3ZlSXRlbUJ5SWQiLCBhcmcpOwogICAgICAgIH0sCiAgICAgICAgdXBkYXRlQ3VzdG9tZXJOYW1lUGhvbmVOdW1iZXJPZklkOiBmdW5jdGlvbiB1cGRhdGVDdXN0b21lck5hbWVQaG9uZU51bWJlck9mSWQoY29udGV4dCkgewogICAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogewogICAgICAgICAgICBfaWQ6IF9pZCwKICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lTnVtYmVyCiAgICAgICAgICB9OwogICAgICAgICAgcmV0dXJuIGN1c3RvbWVyU3RvcmUuZGlzcGF0Y2goInVwZGF0ZU5hbWVQaG9uZU51bWJlck9mSXRlbUlkIiwgYXJnKTsKICAgICAgICB9LAogICAgICAgIHVwZGF0ZUN1c3RvbWVyRGVzY3JpcHRpb25PZklkOiBmdW5jdGlvbiB1cGRhdGVDdXN0b21lckRlc2NyaXB0aW9uT2ZJZChjb250ZXh0KSB7CiAgICAgICAgICB2YXIgYXJnID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7CiAgICAgICAgICAgIF9pZDogX2lkLAogICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICBwaG9uZU51bWJlcjogcGhvbmVOdW1iZXIKICAgICAgICAgIH07CiAgICAgICAgICByZXR1cm4gY3VzdG9tZXJTdG9yZS5kaXNwYXRjaCgidXBkYXRlRGVzY3JpcHRpb25PZkl0ZW1JZCIsIGFyZyk7CiAgICAgICAgfSwKICAgICAgICBnZXREZXZpY2VzOiBmdW5jdGlvbiBnZXREZXZpY2VzKCkgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLmRpc3BhdGNoKCJnZXRJdGVtcyIpOwogICAgICAgIH0sCiAgICAgICAgZ2V0RGV2aWNlQnlJZDogZnVuY3Rpb24gZ2V0RGV2aWNlQnlJZChjb250ZXh0LCBpZCkgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLmRpc3BhdGNoKCJnZXRJdGVtQnlJZCIsIGlkKTsKICAgICAgICB9LAogICAgICAgIGdldERldmljZXNCeUlkczogZnVuY3Rpb24gZ2V0RGV2aWNlc0J5SWRzKGNvbnRleHQsIGlkcykgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLmRpc3BhdGNoKCJnZXRJdGVtc0J5SWRzIiwgaWRzKTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZURldmljZTogZnVuY3Rpb24gcmVtb3ZlRGV2aWNlKGNvbnRleHQsIGFyZykgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLmRpc3BhdGNoKCJyZW1vdmVJdGVtQnlJZCIsIGFyZyk7CiAgICAgICAgfSwKICAgICAgICBhZGREZXZpY2U6IGZ1bmN0aW9uIGFkZERldmljZShjb250ZXh0LCBhcmcpIHsKICAgICAgICAgIHJldHVybiBkZXZpY2VTdG9yZS5kaXNwYXRjaCgiYWRkSXRlbSIsIGFyZyk7CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVEZXZpY2VTcGVjaWZpY2F0aW9uczogZnVuY3Rpb24gdXBkYXRlRGV2aWNlU3BlY2lmaWNhdGlvbnMoY29udGV4dCwgYXJnKSB7CiAgICAgICAgICByZXR1cm4gZGV2aWNlU3RvcmUuZGlzcGF0Y2goInVwZGF0ZVNwZWNpZmljYXRpb25zT2ZJdGVtSWQiLCBhcmcpOwogICAgICAgIH0sCiAgICAgICAgdXBkYXRlRGV2aWNlRGVzY3JpcHRpb246IGZ1bmN0aW9uIHVwZGF0ZURldmljZURlc2NyaXB0aW9uKGNvbnRleHQsIGFyZykgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLmRpc3BhdGNoKCJ1cGRhdGVEZXNjcmlwdGlvbk9mSXRlbUlkIiwgYXJnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0KfTs="},null]}