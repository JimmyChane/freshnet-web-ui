{"remainingRequest":"C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\development\\freshnet-v2\\vue\\src\\stores\\store.service.js","dependencies":[{"path":"C:\\development\\freshnet-v2\\vue\\src\\stores\\store.service.js","mtime":1663504444451},{"path":"C:\\development\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOlxcZGV2ZWxvcG1lbnRcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXHRvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IFZ1ZXggZnJvbSAidnVleCI7CmltcG9ydCBTZXJ2aWNlTW9kdWxlIGZyb20gIkAvLi4vLi4vZXhwcmVzcy9kYXRhX3N0cnVjdHVyZXMvU2VydmljZS5qcyI7CmltcG9ydCBBcGlIb3N0IGZyb20gIkAvaG9zdC9BcGlIb3N0LmpzIjsKaW1wb3J0IFNlcnZpY2UgZnJvbSAiQC9pdGVtcy9TZXJ2aWNlLmpzIjsKaW1wb3J0IERhdGFMb2FkZXIgZnJvbSAiLi9jb21wb25lbnRzL0RhdGFMb2FkZXIiOwppbXBvcnQgQ29sbGVjdGlvblVwZGF0ZXIgZnJvbSAiLi9jb21wb25lbnRzL0NvbGxlY3Rpb25VcGRhdGVyIjsKaW1wb3J0IFByb2Nlc3NvciBmcm9tICIuL2NvbXBvbmVudHMvUHJvY2Vzc29yLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGluaXQ6IGZ1bmN0aW9uIGluaXQoU3RvcmVzKSB7CiAgICB2YXIgc3RvcmVTZXJ2aWNlID0gbmV3IFZ1ZXguU3RvcmUoewogICAgICBzdGF0ZTogewogICAgICAgIGRhdGFMb2FkZXI6IG5ldyBEYXRhTG9hZGVyKHsKICAgICAgICAgIHRpbWVvdXQ6IDEwMDAgKiA2MCAqIDEwCiAgICAgICAgfSkgLy8gMTBtaW4KICAgICAgICAucHJvY2Vzc29yKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBzdG9yZVNlcnZpY2Uuc3RhdGUucHJvY2Vzc29yOwogICAgICAgIH0pLmxvYWREYXRhKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgdmFyIGFwaSwgZXJyb3IsIGNvbnRlbnQsIGNvbnRlbnRzLCBpdGVtczsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS51cmwoInNlcnZpY2UvIikuc2VuZCgpOwoKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgZXJyb3IgPSBhcGkuZ2V0RXJyb3IoKTsKICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaS5nZXRDb250ZW50KCk7CgogICAgICAgICAgICAgICAgICBpZiAoIWVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7CgogICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICBjb250ZW50cyA9IEFycmF5LmlzQXJyYXkoY29udGVudCkgPyBjb250ZW50IDogW107CiAgICAgICAgICAgICAgICAgIGl0ZW1zID0gY29udGVudHMubWFwKGZ1bmN0aW9uIChjb250ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNlcnZpY2UuaW1wb3J0RGF0YShjb250ZW50KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGl0ZW1zKTsKCiAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgIH0pKSkuc2V0RGF0YShmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIHN0b3JlU2VydmljZS5jb21taXQoIml0ZW1zIiwgQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbXSk7CiAgICAgICAgfSkuZ2V0RGF0YShmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gc3RvcmVTZXJ2aWNlLmdldHRlcnMuaXRlbXM7CiAgICAgICAgfSksCiAgICAgICAgaXRlbXM6IFtdLAogICAgICAgIHByb2Nlc3NvcjogbmV3IFByb2Nlc3NvcigpCiAgICAgIH0sCiAgICAgIG11dGF0aW9uczogewogICAgICAgIGl0ZW1zOiBmdW5jdGlvbiBpdGVtcyhzdGF0ZSwgX2l0ZW1zKSB7CiAgICAgICAgICByZXR1cm4gc3RhdGUuaXRlbXMgPSBfaXRlbXM7CiAgICAgICAgfQogICAgICB9LAogICAgICBnZXR0ZXJzOiB7CiAgICAgICAgaXNMb2FkaW5nOiBmdW5jdGlvbiBpc0xvYWRpbmcoc3RhdGUpIHsKICAgICAgICAgIHJldHVybiBzdGF0ZS5wcm9jZXNzb3IuaXNMb2FkaW5nKCk7CiAgICAgICAgfSwKICAgICAgICBpdGVtczogZnVuY3Rpb24gaXRlbXMoc3RhdGUpIHsKICAgICAgICAgIHJldHVybiAoQXJyYXkuaXNBcnJheShzdGF0ZS5pdGVtcykgPyBzdGF0ZS5pdGVtcyA6IFtdKS5tYXAoZnVuY3Rpb24gKHNlcnZpY2UpIHsKICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VydmljZS5ldmVudHMpKSBzZXJ2aWNlLmV2ZW50cy5zb3J0KGZ1bmN0aW9uIChldmVudDEsIGV2ZW50MikgewogICAgICAgICAgICAgIHJldHVybiBldmVudDEuY29tcGFyZShldmVudDIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2U7CiAgICAgICAgICB9KS5zb3J0KGZ1bmN0aW9uIChzZXJ2aWNlMSwgc2VydmljZTIpIHsKICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UxLmNvbXBhcmUoc2VydmljZTIpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBhY3Rpb25zOiB7CiAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaChjb250ZXh0KSB7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgicmVmcmVzaCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdGF0ZS5kYXRhTG9hZGVyLmRvVGltZW91dCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCJnZXRJdGVtcyIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICBnZXRJdGVtczogZnVuY3Rpb24gZ2V0SXRlbXMoY29udGV4dCkgewogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoImdldEl0ZW1zIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5kYXRhTG9hZGVyLmRhdGEoKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIGdldEl0ZW1PZklkOiBmdW5jdGlvbiBnZXRJdGVtT2ZJZChjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgICAgICB2YXIgYXJnOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGFyZyA9IF9hcmd1bWVudHMubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzWzFdIDogewogICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgiZ2V0SXRlbU9mSWQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCwgaXRlbXM7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA9IGFyZy5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiZ2V0U2VydmljZXMiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBpdGVtcy5maW5kKGZ1bmN0aW9uIChzZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0SWQoKSA9PT0gaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgaW1wb3J0SXRlbTogZnVuY3Rpb24gaW1wb3J0SXRlbShjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50czIgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBhcmcgPSBfYXJndW1lbnRzMi5sZW5ndGggPiAxICYmIF9hcmd1bWVudHMyWzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzMlsxXSA6IHsKICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJpbXBvcnRJdGVtIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSwgc2VydmljZSwgYXBpLCBlcnJvciwgY29udGVudCwgaXRlbXM7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gYXJnLmRhdGE7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlID0gU2VydmljZU1vZHVsZS50cmltKGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5QT1NUKCkudXJsKCJzZXJ2aWNlL2ltcG9ydC8iKS5ib2R5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBzZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGFwaS5nZXRFcnJvcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYXBpLmdldENvbnRlbnQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlID0gU2VydmljZS5pbXBvcnREYXRhKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IGNvbnRleHQuZ2V0dGVycy5pdGVtczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChzZXJ2aWNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoIml0ZW1zIiwgaXRlbXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgc2VydmljZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICBhZGRJdGVtOiBmdW5jdGlvbiBhZGRJdGVtKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzMyA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMSgpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czMubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzM1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czNbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoImFkZEl0ZW0iLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSwgaW1hZ2VzLCBhcGksIGVycm9yLCBjb250ZW50LCBzZXJ2aWNlOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBhcmcuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBudWxsKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkIGRhdGEiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCFBcnJheS5pc0FycmF5KGRhdGEuaW1hZ2VGaWxlcykgfHwgZGF0YS5pbWFnZUZpbGVzLmxlbmd0aCA8PSAwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAudDAgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LmltZ0ZpbGUudXBsb2FkKGRhdGEuaW1hZ2VGaWxlcykudGhlbihmdW5jdGlvbiAoanNvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqc29uLmNvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAudDAgPSBfY29udGV4dDEwLnNlbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VzID0gX2NvbnRleHQxMC50MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pbWFnZUZpbGVzID0gaW1hZ2VzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QucmVxdWVzdCgpLlBPU1QoKS51cmwoInNlcnZpY2UvIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQxMC5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGFwaS5nZXRFcnJvcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYXBpLmdldENvbnRlbnQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZSA9IFNlcnZpY2UuaW1wb3J0RGF0YShjb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBuZXcgQ29sbGVjdGlvblVwZGF0ZXIoY29udGV4dCkub25JZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmdldElkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldEl0ZW0oc2VydmljZSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZUl0ZW1PZklkOiBmdW5jdGlvbiByZW1vdmVJdGVtT2ZJZChjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50czQgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMoKSB7CiAgICAgICAgICAgIHZhciBhcmc7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGFyZyA9IF9hcmd1bWVudHM0Lmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czRbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHM0WzFdIDogewogICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoInJlbW92ZUl0ZW1PZklkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGlkLCBhcGksIGVycm9yLCBmb3VuZCwgaXRlbXM7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSBhcmcuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5ERUxFVEUoKS51cmwoInNlcnZpY2UvIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBhcGkuZ2V0RXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gY29udGV4dC5zdGF0ZS5pdGVtcy5maW5kKGZ1bmN0aW9uIChzZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0SWQoKSA9PT0gaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gY29udGV4dC5zdGF0ZS5pdGVtczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMuc3BsaWNlKGl0ZW1zLmluZGV4T2YoZm91bmQpLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoIml0ZW1zIiwgaXRlbXMpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTIpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxMyk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIHVwZGF0ZVN0YXRlT2ZJZDogZnVuY3Rpb24gdXBkYXRlU3RhdGVPZklkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzNSA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNSgpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNSQoX2NvbnRleHQxNSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTUucHJldiA9IF9jb250ZXh0MTUubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czUubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzNVsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czVbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSUQ6IHNlcnZpY2VJRCwKICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJ1cGRhdGVTdGF0ZU9mSWQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTQoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VydmljZUlELCBzdGF0ZSwgYXBpLCBlcnJvcjsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSUQgPSBhcmcuc2VydmljZUlELCBzdGF0ZSA9IGFyZy5zdGF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QucmVxdWVzdCgpLlBVVCgpLnVybCgic2VydmljZS9zdGF0ZS8iKS5ib2R5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSUQ6IHNlcnZpY2VJRCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBzdGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDE0LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gYXBpLmdldEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIG5ldyBDb2xsZWN0aW9uVXBkYXRlcihjb250ZXh0KS5vbklkKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZ2V0SWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkub25VcGRhdGUoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5zdGF0ZSA9IHN0YXRlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5nZXRJdGVtQnlJZChzZXJ2aWNlSUQpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTQpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxNSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIHVwZGF0ZURlc2NyaXB0aW9uT2ZJZDogZnVuY3Rpb24gdXBkYXRlRGVzY3JpcHRpb25PZklkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzNiA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNygpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNyQoX2NvbnRleHQxNykgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTcucHJldiA9IF9jb250ZXh0MTcubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czYubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzNlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czZbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSUQ6IHNlcnZpY2VJRCwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJ1cGRhdGVEZXNjcmlwdGlvbk9mSWQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTYoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VydmljZUlELCBkZXNjcmlwdGlvbiwgYXBpLCBlcnJvcjsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTYkKF9jb250ZXh0MTYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTYucHJldiA9IF9jb250ZXh0MTYubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSUQgPSBhcmcuc2VydmljZUlELCBkZXNjcmlwdGlvbiA9IGFyZy5kZXNjcmlwdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QucmVxdWVzdCgpLlBVVCgpLnVybCgic2VydmljZS9kZXNjcmlwdGlvbi8iKS5ib2R5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSUQ6IHNlcnZpY2VJRCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBkZXNjcmlwdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDE2LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gYXBpLmdldEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5hYnJ1cHQoInJldHVybiIsIG5ldyBDb2xsZWN0aW9uVXBkYXRlcihjb250ZXh0KS5vbklkKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZ2V0SWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkub25VcGRhdGUoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5zZXREZXNjcmlwdGlvbihkZXNjcmlwdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldEl0ZW1CeUlkKHNlcnZpY2VJRCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxNik7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTE3KTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgdXBkYXRlQmVsb25naW5nc09mSWQ6IGZ1bmN0aW9uIHVwZGF0ZUJlbG9uZ2luZ3NPZklkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzNyA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOSgpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOSQoX2NvbnRleHQxOSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTkucHJldiA9IF9jb250ZXh0MTkubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czcubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzN1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czdbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSUQ6IHNlcnZpY2VJRCwKICAgICAgICAgICAgICAgICAgICAgIGJlbG9uZ2luZ3M6IGJlbG9uZ2luZ3MKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgidXBkYXRlQmVsb25naW5nc09mSWQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTgoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VydmljZUlELCBiZWxvbmdpbmdzLCBhcGksIGVycm9yLCBjb250ZW50OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOCQoX2NvbnRleHQxOCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxOC5wcmV2ID0gX2NvbnRleHQxOC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJRCA9IGFyZy5zZXJ2aWNlSUQsIGJlbG9uZ2luZ3MgPSBhcmcuYmVsb25naW5nczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QucmVxdWVzdCgpLlBVVCgpLnVybCgic2VydmljZS9iZWxvbmdpbmcvIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlEOiBzZXJ2aWNlSUQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogYmVsb25naW5ncwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDE4LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gYXBpLmdldEVycm9yKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGkuZ2V0Q29udGVudCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguYWJydXB0KCJyZXR1cm4iLCBuZXcgQ29sbGVjdGlvblVwZGF0ZXIoY29udGV4dCkub25JZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmdldElkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLm9uVXBkYXRlKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uYmVsb25naW5ncyA9IGNvbnRlbnQuYmVsb25naW5nczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZ2V0SXRlbUJ5SWQoc2VydmljZUlEKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTE4KTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOS5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMTkpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVDdXN0b21lck9mSWQ6IGZ1bmN0aW9uIHVwZGF0ZUN1c3RvbWVyT2ZJZChjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50czggPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjEoKSB7CiAgICAgICAgICAgIHZhciBhcmc7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjEkKF9jb250ZXh0MjEpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIxLnByZXYgPSBfY29udGV4dDIxLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGFyZyA9IF9hcmd1bWVudHM4Lmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czhbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHM4WzFdIDogewogICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlEOiBzZXJ2aWNlSUQsCiAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lcjogY3VzdG9tZXIKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgidXBkYXRlQ3VzdG9tZXJPZklkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIwKCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcnZpY2VJRCwgY3VzdG9tZXIsIGFwaSwgZXJyb3IsIGNvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIwJChfY29udGV4dDIwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIwLnByZXYgPSBfY29udGV4dDIwLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlEID0gYXJnLnNlcnZpY2VJRCwgY3VzdG9tZXIgPSBhcmcuY3VzdG9tZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjAubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5QVVQoKS51cmwoInNlcnZpY2UvY3VzdG9tZXIvIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlEOiBzZXJ2aWNlSUQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY3VzdG9tZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc2VuZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQyMC5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGFwaS5nZXRFcnJvcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYXBpLmdldENvbnRlbnQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIwLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIwLmFicnVwdCgicmV0dXJuIiwgbmV3IENvbGxlY3Rpb25VcGRhdGVyKGNvbnRleHQpLm9uSWQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5nZXRJZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5vblVwZGF0ZShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnNldEN1c3RvbWVyKGNvbnRlbnQuY3VzdG9tZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5nZXRJdGVtQnlJZChzZXJ2aWNlSUQpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjApOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUyMSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIGFkZEV2ZW50VG9JZDogZnVuY3Rpb24gYWRkRXZlbnRUb0lkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzOSA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMygpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMyQoX2NvbnRleHQyMykgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjMucHJldiA9IF9jb250ZXh0MjMubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czkubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzOVsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czlbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSUQ6IHNlcnZpY2VJRCwKICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIzLmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgiYWRkRXZlbnRUb0lkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIyKCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcnZpY2VJRCwgZGF0YSwgYXBpLCBlcnJvciwgY29udGVudCwgc2VydmljZVBhcnNlOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMiQoX2NvbnRleHQyMikgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMi5wcmV2ID0gX2NvbnRleHQyMi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJRCA9IGFyZy5zZXJ2aWNlSUQsIGRhdGEgPSBhcmcuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCFzZXJ2aWNlSUQgfHwgIWRhdGEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyMi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuYWJydXB0KCJyZXR1cm4iLCBudWxsKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5QT1NUKCkudXJsKCJzZXJ2aWNlL2V2ZW50LyIpLmJvZHkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJRDogc2VydmljZUlELAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc2VuZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQyMi5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGFwaS5nZXRFcnJvcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYXBpLmdldENvbnRlbnQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZVBhcnNlID0gU2VydmljZS5pbXBvcnREYXRhKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMi5hYnJ1cHQoInJldHVybiIsIG5ldyBDb2xsZWN0aW9uVXBkYXRlcihjb250ZXh0KS5vbklkKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZ2V0SWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkub25VcGRhdGUoZnVuY3Rpb24gKGl0ZW0xLCBpdGVtMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0xLmV2ZW50cyA9IGl0ZW0yLmV2ZW50cy5zb3J0KGZ1bmN0aW9uIChldmVudDEsIGV2ZW50MikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50MS5jb21wYXJlKGV2ZW50Mik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldEl0ZW0oc2VydmljZVBhcnNlKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyMik7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjMuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTIzKTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlRXZlbnRGcm9tSWQ6IGZ1bmN0aW9uIHJlbW92ZUV2ZW50RnJvbUlkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzMTAgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjUoKSB7CiAgICAgICAgICAgIHZhciBhcmc7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjUkKF9jb250ZXh0MjUpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI1LnByZXYgPSBfY29udGV4dDI1Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGFyZyA9IF9hcmd1bWVudHMxMC5sZW5ndGggPiAxICYmIF9hcmd1bWVudHMxMFsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czEwWzFdIDogewogICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlEOiBzZXJ2aWNlSUQsCiAgICAgICAgICAgICAgICAgICAgICB0aW1lOiB0aW1lCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNS5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoInJlbW92ZUV2ZW50RnJvbUlkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI0KCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcnZpY2VJRCwgdGltZSwgYXBpLCBlcnJvcjsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjQkKF9jb250ZXh0MjQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjQucHJldiA9IF9jb250ZXh0MjQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSUQgPSBhcmcuc2VydmljZUlELCB0aW1lID0gYXJnLnRpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5ERUxFVEUoKS51cmwoInNlcnZpY2UvZXZlbnQiKS5ib2R5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSUQ6IHNlcnZpY2VJRCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiB0aW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0MjQuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBhcGkuZ2V0RXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI0LmFicnVwdCgicmV0dXJuIiwgbmV3IENvbGxlY3Rpb25VcGRhdGVyKGNvbnRleHQpLm9uSWQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5nZXRJZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5vblVwZGF0ZShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZXZlbnRzID0gaXRlbS5ldmVudHMuZmlsdGVyKGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50LmdldFRpbWVzdGFtcCgpLnRpbWUgIT09IHRpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldEl0ZW1CeUlkKHNlcnZpY2VJRCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyNCk7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjUuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTI1KTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgYWRkSW1hZ2VUb0lkOiBmdW5jdGlvbiBhZGRJbWFnZVRvSWQoY29udGV4dCkgewogICAgICAgICAgdmFyIF9hcmd1bWVudHMxMSA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNygpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyNyQoX2NvbnRleHQyNykgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjcucHJldiA9IF9jb250ZXh0MjcubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czExLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czExWzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzMTFbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSUQ6IHNlcnZpY2VJRCwKICAgICAgICAgICAgICAgICAgICAgIGltYWdlRmlsZTogaW1hZ2VGaWxlCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNy5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoImFkZEltYWdlVG9JZCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNigpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlSUQsIGltYWdlRmlsZSwgaW1hZ2VGaWxlRm9ybSwgYXBpLCBjb250ZW50LCBzZXJ2aWNlSWQsIGltYWdlRmlsZXM7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI2JChfY29udGV4dDI2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI2LnByZXYgPSBfY29udGV4dDI2Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlEID0gYXJnLnNlcnZpY2VJRCwgaW1hZ2VGaWxlID0gYXJnLmltYWdlRmlsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VGaWxlRm9ybSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZUZpbGVGb3JtLmFwcGVuZChpbWFnZUZpbGUubmFtZSwgaW1hZ2VGaWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QuZmV0Y2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogInNlcnZpY2UvaWQvIi5jb25jYXQoc2VydmljZUlELCAiL2ltYWdlLyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGltYWdlRmlsZUZvcm0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDI2LnNlbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFwaS5lcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjYubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihhcGkuZXJyb3IpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaS5jb250ZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSWQgPSBjb250ZW50LnNlcnZpY2VJZCwgaW1hZ2VGaWxlcyA9IGNvbnRlbnQuaW1hZ2VGaWxlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjYuYWJydXB0KCJyZXR1cm4iLCBuZXcgQ29sbGVjdGlvblVwZGF0ZXIoY29udGV4dCkub25JZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmdldElkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLm9uVXBkYXRlKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9pdGVtJGltYWdlRmlsZXM7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoX2l0ZW0kaW1hZ2VGaWxlcyA9IGl0ZW0uaW1hZ2VGaWxlcykucHVzaC5hcHBseShfaXRlbSRpbWFnZUZpbGVzLCBfdG9Db25zdW1hYmxlQXJyYXkoaW1hZ2VGaWxlcykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5nZXRJdGVtQnlJZChzZXJ2aWNlSWQpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjYuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTI2KTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNy5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMjcpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICByZW1vdmVJbWFnZUZyb21JZDogZnVuY3Rpb24gcmVtb3ZlSW1hZ2VGcm9tSWQoY29udGV4dCkgewogICAgICAgICAgdmFyIF9hcmd1bWVudHMxMiA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyOSgpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyOSQoX2NvbnRleHQyOSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjkucHJldiA9IF9jb250ZXh0MjkubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czEyLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czEyWzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzMTJbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSUQ6IHNlcnZpY2VJRCwKICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiBpbWFnZQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjkuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJyZW1vdmVJbWFnZUZyb21JZCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyOCgpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlSUQsIGltYWdlLCBhcGksIGVycm9yOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyOCQoX2NvbnRleHQyOCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyOC5wcmV2ID0gX2NvbnRleHQyOC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJRCA9IGFyZy5zZXJ2aWNlSUQsIGltYWdlID0gYXJnLmltYWdlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5pbWdGaWxlLnJlbW92ZShpbWFnZS5uYW1lKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0Mjguc2VudDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXBpLmVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBBcGlIb3N0LnJlcXVlc3QoKS5ERUxFVEUoKS51cmwoInNlcnZpY2UvaW1hZ2UvIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlEOiBzZXJ2aWNlSUQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogaW1hZ2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc2VuZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGFwaS5lcnJvcjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJyZXR1cm4iLCBuZXcgQ29sbGVjdGlvblVwZGF0ZXIoY29udGV4dCkub25JZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmdldElkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLm9uVXBkYXRlKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5pbWFnZUZpbGVzID0gaXRlbS5pbWFnZUZpbGVzLmZpbHRlcihmdW5jdGlvbiAoaW1hZ2VGaWxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW1hZ2VGaWxlLm5hbWUgIT09IGltYWdlLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldEl0ZW1CeUlkKHNlcnZpY2VJRCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjgpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI5LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUyOSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIHVwZGF0ZVVyZ2VudE9mSWQ6IGZ1bmN0aW9uIHVwZGF0ZVVyZ2VudE9mSWQoY29udGV4dCkgewogICAgICAgICAgdmFyIF9hcmd1bWVudHMxMyA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzMSgpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzMSQoX2NvbnRleHQzMSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzEucHJldiA9IF9jb250ZXh0MzEubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czEzLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czEzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzMTNbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSUQ6IHNlcnZpY2VJRCwKICAgICAgICAgICAgICAgICAgICAgIGlzVXJnZW50OiBpc1VyZ2VudAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzEuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJ1cGRhdGVVcmdlbnRPZklkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMwKCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcnZpY2VJRCwgaXNVcmdlbnQsIGFwaSwgZXJyb3IsIGNvbnRlbnQsIHNlcnZpY2U7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMwJChfY29udGV4dDMwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMwLnByZXYgPSBfY29udGV4dDMwLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlEID0gYXJnLnNlcnZpY2VJRCwgaXNVcmdlbnQgPSBhcmcuaXNVcmdlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MzAubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5QVVQoKS51cmwoInNlcnZpY2UvdXJnZW50IikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlEOiBzZXJ2aWNlSUQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNVcmdlbnQ6IGlzVXJnZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0MzAuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBhcGkuZ2V0RXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMwLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGkuZ2V0Q29udGVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlID0gbmV3IFNlcnZpY2UoY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMwLmFicnVwdCgicmV0dXJuIiwgbmV3IENvbGxlY3Rpb25VcGRhdGVyKGNvbnRleHQpLm9uSWQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5nZXRJZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5vblVwZGF0ZShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnNldFVyZ2VudChzZXJ2aWNlLmlzVXJnZW50KCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5nZXRJdGVtQnlJZChzZXJ2aWNlLmdldElkKCkpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzAuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMwKTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMS5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMzEpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVXYXJyYW50eU9mSWQ6IGZ1bmN0aW9uIHVwZGF0ZVdhcnJhbnR5T2ZJZChjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50czE0ID0gYXJndW1lbnRzOwogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMzKCkgewogICAgICAgICAgICB2YXIgYXJnOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMzJChfY29udGV4dDMzKSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzMy5wcmV2ID0gX2NvbnRleHQzMy5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBhcmcgPSBfYXJndW1lbnRzMTQubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzMTRbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHMxNFsxXSA6IHsKICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJRDogc2VydmljZUlELAogICAgICAgICAgICAgICAgICAgICAgaXNXYXJyYW50eTogaXNXYXJyYW50eQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzMuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJ1cGRhdGVXYXJyYW50eU9mSWQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMzIoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VydmljZUlELCBpc1dhcnJhbnR5LCBhcGksIGVycm9yLCBjb250ZW50LCBzZXJ2aWNlOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzMiQoX2NvbnRleHQzMikgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzMi5wcmV2ID0gX2NvbnRleHQzMi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJRCA9IGFyZy5zZXJ2aWNlSUQsIGlzV2FycmFudHkgPSBhcmcuaXNXYXJyYW50eTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzMi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwaUhvc3QucmVxdWVzdCgpLlBVVCgpLnVybCgic2VydmljZS93YXJyYW50eSIpLmJvZHkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJRDogc2VydmljZUlELAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzV2FycmFudHk6IGlzV2FycmFudHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc2VuZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpID0gX2NvbnRleHQzMi5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGFwaS5nZXRFcnJvcigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MzIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaS5nZXRDb250ZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2UgPSBuZXcgU2VydmljZShjb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzIuYWJydXB0KCJyZXR1cm4iLCBuZXcgQ29sbGVjdGlvblVwZGF0ZXIoY29udGV4dCkub25JZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmdldElkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLm9uVXBkYXRlKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uc2V0V2FycmFudHkoc2VydmljZS5pc1dhcnJhbnR5KCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5nZXRJdGVtQnlJZChzZXJ2aWNlLmdldElkKCkpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMyKTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMy5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMzMpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICBhZGRMYWJlbFRvSWQ6IGZ1bmN0aW9uIGFkZExhYmVsVG9JZChjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50czE1ID0gYXJndW1lbnRzOwogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTM1KCkgewogICAgICAgICAgICB2YXIgYXJnOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTM1JChfY29udGV4dDM1KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzNS5wcmV2ID0gX2NvbnRleHQzNS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBhcmcgPSBfYXJndW1lbnRzMTUubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzMTVbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHMxNVsxXSA6IHsKICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJRDogc2VydmljZUlELAogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNS5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoImFkZExhYmVsVG9JZCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzNCgpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlSUQsIGxhYmVsLCBhcGksIGVycm9yLCBjb250ZW50OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzNCQoX2NvbnRleHQzNCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzNC5wcmV2ID0gX2NvbnRleHQzNC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJRCA9IGFyZy5zZXJ2aWNlSUQsIGxhYmVsID0gYXJnLmxhYmVsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDM0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuUE9TVCgpLnVybCgic2VydmljZS9sYWJlbCIpLmJvZHkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJRDogc2VydmljZUlELAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBsYWJlbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDM0LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gYXBpLmdldEVycm9yKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzNC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGkuZ2V0Q29udGVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb250ZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMzQpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM1LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUzNSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZUxhYmVsRnJvbUlkOiBmdW5jdGlvbiByZW1vdmVMYWJlbEZyb21JZChjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50czE2ID0gYXJndW1lbnRzOwogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTM3KCkgewogICAgICAgICAgICB2YXIgYXJnOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTM3JChfY29udGV4dDM3KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzNy5wcmV2ID0gX2NvbnRleHQzNy5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBhcmcgPSBfYXJndW1lbnRzMTYubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzMTZbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHMxNlsxXSA6IHsKICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJRDogc2VydmljZUlELAogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNy5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoInJlbW92ZUxhYmVsRnJvbUlkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTM2KCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcnZpY2VJRCwgbGFiZWwsIGFwaSwgZXJyb3IsIGNvbnRlbnQsIHNlcnZpY2UsIGl0ZW1zLCBpdGVtOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzNiQoX2NvbnRleHQzNikgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzNi5wcmV2ID0gX2NvbnRleHQzNi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJRCA9IGFyZy5zZXJ2aWNlSUQsIGxhYmVsID0gYXJnLmxhYmVsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDM2Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuREVMRVRFKCkudXJsKCJzZXJ2aWNlL2xhYmVsIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlEOiBzZXJ2aWNlSUQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsLnRvRGF0YSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0MzYuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBhcGkuZ2V0RXJyb3IoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDM2Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaS5nZXRDb250ZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2UgPSBTZXJ2aWNlLmltcG9ydERhdGEoY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gY29udGV4dC5zdGF0ZS5pdGVtczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW1zLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5nZXRJZCgpID09PSBzZXJ2aWNlLmdldElkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChzZXJ2aWNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gc2VydmljZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnNldExhYmVscyhzZXJ2aWNlLmdldExhYmVscygpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoIml0ZW1zIiwgaXRlbXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNi5hYnJ1cHQoInJldHVybiIsIGl0ZW0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMzYpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM3LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUzNyk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHN0b3JlU2VydmljZTsKICB9Cn07"},{"version":3,"sources":["C:/development/freshnet-v2/vue/src/stores/store.service.js"],"names":["Vuex","ServiceModule","ApiHost","Service","DataLoader","CollectionUpdater","Processor","init","Stores","storeService","Store","state","dataLoader","timeout","processor","loadData","request","url","send","api","error","getError","content","getContent","Error","contents","Array","isArray","items","map","importData","setData","data","commit","getData","getters","mutations","isLoading","service","events","sort","event1","event2","compare","service1","service2","actions","refresh","context","acquire","doTimeout","dispatch","getItems","getItemOfId","arg","id","find","getId","importItem","trim","POST","body","push","addItem","imageFiles","length","imgFile","upload","then","json","images","onId","item","getItem","removeItemOfId","DELETE","found","splice","indexOf","updateStateOfId","serviceID","PUT","onUpdate","getItemById","updateDescriptionOfId","description","setDescription","updateBelongingsOfId","belongings","updateCustomerOfId","customer","setCustomer","addEventToId","serviceParse","item1","item2","removeEventFromId","time","filter","event","getTimestamp","addImageToId","imageFile","imageFileForm","FormData","append","name","fetch","method","serviceId","removeImageFromId","image","remove","updateUrgentOfId","isUrgent","setUrgent","updateWarrantyOfId","isWarranty","setWarranty","addLabelToId","label","console","log","removeLabelFromId","toData","setLabels","getLabels"],"mappings":"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","sourcesContent":["import Vuex from \"vuex\";\r\n\r\nimport ServiceModule from \"@/../../express/data_structures/Service.js\";\r\nimport ApiHost from \"@/host/ApiHost.js\";\r\nimport Service from \"@/items/Service.js\";\r\n\r\nimport DataLoader from \"./components/DataLoader\";\r\nimport CollectionUpdater from \"./components/CollectionUpdater\";\r\nimport Processor from \"./components/Processor.js\";\r\n\r\nexport default {\r\n   init(Stores) {\r\n      const storeService = new Vuex.Store({\r\n         state: {\r\n            dataLoader: new DataLoader({ timeout: 1000 * 60 * 10 }) // 10min\r\n               .processor(() => storeService.state.processor)\r\n               .loadData(async () => {\r\n                  const api = await ApiHost.request().url(\"service/\").send();\r\n                  const error = api.getError();\r\n                  const content = api.getContent();\r\n                  if (error) throw new Error(error);\r\n                  const contents = Array.isArray(content) ? content : [];\r\n                  const items = contents.map((content) => Service.importData(content));\r\n                  return items;\r\n               })\r\n               .setData((data) =>\r\n                  storeService.commit(\"items\", Array.isArray(data) ? data : [])\r\n               )\r\n               .getData(() => storeService.getters.items),\r\n            items: [],\r\n            processor: new Processor(),\r\n         },\r\n         mutations: { items: (state, items) => (state.items = items) },\r\n         getters: {\r\n            isLoading: (state) => state.processor.isLoading(),\r\n            items(state) {\r\n               return (Array.isArray(state.items) ? state.items : [])\r\n                  .map((service) => {\r\n                     if (Array.isArray(service.events))\r\n                        service.events.sort((event1, event2) => event1.compare(event2));\r\n                     return service;\r\n                  })\r\n                  .sort((service1, service2) => service1.compare(service2));\r\n            },\r\n         },\r\n         actions: {\r\n            async refresh(context) {\r\n               return context.state.processor.acquire(\"refresh\", async () => {\r\n                  context.state.dataLoader.doTimeout();\r\n                  await context.dispatch(\"getItems\");\r\n               });\r\n            },\r\n\r\n            async getItems(context) {\r\n               return context.state.processor.acquire(\"getItems\", async () => {\r\n                  return context.state.dataLoader.data();\r\n               });\r\n            },\r\n            async getItemOfId(context, arg = { id }) {\r\n               return context.state.processor.acquire(\"getItemOfId\", async () => {\r\n                  let { id } = arg;\r\n                  let items = await context.dispatch(\"getServices\");\r\n                  return items.find((service) => service.getId() === id);\r\n               });\r\n            },\r\n\r\n            async importItem(context, arg = { data }) {\r\n               return context.state.processor.acquire(\"importItem\", async () => {\r\n                  let { data } = arg;\r\n                  if (!data) throw new Error();\r\n                  let service = ServiceModule.trim(data);\r\n                  let api = await ApiHost.request()\r\n                     .POST()\r\n                     .url(\"service/import/\")\r\n                     .body({ content: service })\r\n                     .send();\r\n                  let error = api.getError();\r\n                  let content = api.getContent();\r\n                  if (error) throw new Error();\r\n                  service = Service.importData(content);\r\n                  let items = context.getters.items;\r\n                  items.push(service);\r\n                  context.commit(\"items\", items);\r\n                  return service;\r\n               });\r\n            },\r\n\r\n            async addItem(context, arg = { data }) {\r\n               return context.state.processor.acquire(\"addItem\", async () => {\r\n                  let { data } = arg;\r\n                  if (!data) return null;\r\n                  if (!data) throw new Error(\"invalid data\");\r\n                  let images =\r\n                     !Array.isArray(data.imageFiles) || data.imageFiles.length <= 0\r\n                        ? []\r\n                        : await ApiHost.imgFile\r\n                             .upload(data.imageFiles)\r\n                             .then((json) => json.content);\r\n                  data.imageFiles = images;\r\n                  let api = await ApiHost.request()\r\n                     .POST()\r\n                     .url(\"service/\")\r\n                     .body({ content: data })\r\n                     .send();\r\n                  let error = api.getError();\r\n                  let content = api.getContent();\r\n                  if (error) throw new Error();\r\n                  let service = Service.importData(content);\r\n\r\n                  return new CollectionUpdater(context)\r\n                     .onId((item) => item.getId())\r\n                     .getItem(service);\r\n               });\r\n            },\r\n            async removeItemOfId(context, arg = { id }) {\r\n               return context.state.processor.acquire(\"removeItemOfId\", async () => {\r\n                  let { id } = arg;\r\n                  let api = await ApiHost.request()\r\n                     .DELETE()\r\n                     .url(\"service/\")\r\n                     .body({ id })\r\n                     .send();\r\n                  let error = api.getError();\r\n                  if (error) throw new Error();\r\n                  let found = context.state.items.find(\r\n                     (service) => service.getId() === id\r\n                  );\r\n                  if (!found) throw new Error();\r\n                  let items = context.state.items;\r\n                  items.splice(items.indexOf(found), 1);\r\n                  context.commit(\"items\", items);\r\n               });\r\n            },\r\n            async updateStateOfId(context, arg = { serviceID, state }) {\r\n               return context.state.processor.acquire(\"updateStateOfId\", async () => {\r\n                  let { serviceID, state } = arg;\r\n                  let api = await ApiHost.request()\r\n                     .PUT()\r\n                     .url(\"service/state/\")\r\n                     .body({ serviceID: serviceID, content: state })\r\n                     .send();\r\n                  let error = api.getError();\r\n                  if (error) throw new Error();\r\n\r\n                  return new CollectionUpdater(context)\r\n                     .onId((item) => item.getId())\r\n                     .onUpdate((item) => (item.state = state))\r\n                     .getItemById(serviceID);\r\n               });\r\n            },\r\n            async updateDescriptionOfId(context, arg = { serviceID, description }) {\r\n               return context.state.processor.acquire(\r\n                  \"updateDescriptionOfId\",\r\n                  async () => {\r\n                     let { serviceID, description } = arg;\r\n                     let api = await ApiHost.request()\r\n                        .PUT()\r\n                        .url(\"service/description/\")\r\n                        .body({ serviceID: serviceID, content: description })\r\n                        .send();\r\n                     let error = api.getError();\r\n                     if (error) throw new Error();\r\n\r\n                     return new CollectionUpdater(context)\r\n                        .onId((item) => item.getId())\r\n                        .onUpdate((item) => item.setDescription(description))\r\n                        .getItemById(serviceID);\r\n                  }\r\n               );\r\n            },\r\n            async updateBelongingsOfId(context, arg = { serviceID, belongings }) {\r\n               return context.state.processor.acquire(\r\n                  \"updateBelongingsOfId\",\r\n                  async () => {\r\n                     let { serviceID, belongings } = arg;\r\n                     let api = await ApiHost.request()\r\n                        .PUT()\r\n                        .url(\"service/belonging/\")\r\n                        .body({ serviceID, content: belongings })\r\n                        .send();\r\n                     let error = api.getError();\r\n                     let content = api.getContent();\r\n                     if (error) throw new Error();\r\n\r\n                     return new CollectionUpdater(context)\r\n                        .onId((item) => item.getId())\r\n                        .onUpdate((item) => (item.belongings = content.belongings))\r\n                        .getItemById(serviceID);\r\n                  }\r\n               );\r\n            },\r\n            async updateCustomerOfId(context, arg = { serviceID, customer }) {\r\n               return context.state.processor.acquire(\"updateCustomerOfId\", async () => {\r\n                  let { serviceID, customer } = arg;\r\n                  let api = await ApiHost.request()\r\n                     .PUT()\r\n                     .url(\"service/customer/\")\r\n                     .body({ serviceID, content: customer })\r\n                     .send();\r\n                  let error = api.getError();\r\n                  let content = api.getContent();\r\n                  if (error) throw new Error();\r\n\r\n                  return new CollectionUpdater(context)\r\n                     .onId((item) => item.getId())\r\n                     .onUpdate((item) => item.setCustomer(content.customer))\r\n                     .getItemById(serviceID);\r\n               });\r\n            },\r\n\r\n            async addEventToId(context, arg = { serviceID, data }) {\r\n               return context.state.processor.acquire(\"addEventToId\", async () => {\r\n                  let { serviceID, data } = arg;\r\n                  if (!serviceID || !data) return null;\r\n                  let api = await ApiHost.request()\r\n                     .POST()\r\n                     .url(\"service/event/\")\r\n                     .body({ serviceID, content: data })\r\n                     .send();\r\n                  let error = api.getError();\r\n                  let content = api.getContent();\r\n                  if (error) throw new Error();\r\n\r\n                  let serviceParse = Service.importData(content);\r\n\r\n                  return new CollectionUpdater(context)\r\n                     .onId((item) => item.getId())\r\n                     .onUpdate((item1, item2) => {\r\n                        item1.events = item2.events.sort((event1, event2) =>\r\n                           event1.compare(event2)\r\n                        );\r\n                     })\r\n                     .getItem(serviceParse);\r\n               });\r\n            },\r\n            async removeEventFromId(context, arg = { serviceID, time }) {\r\n               return context.state.processor.acquire(\"removeEventFromId\", async () => {\r\n                  let { serviceID, time } = arg;\r\n                  let api = await ApiHost.request()\r\n                     .DELETE()\r\n                     .url(\"service/event\")\r\n                     .body({ serviceID, time })\r\n                     .send();\r\n                  let error = api.getError();\r\n                  if (error) throw new Error();\r\n\r\n                  return new CollectionUpdater(context)\r\n                     .onId((item) => item.getId())\r\n                     .onUpdate((item) => {\r\n                        item.events = item.events.filter(\r\n                           (event) => event.getTimestamp().time !== time\r\n                        );\r\n                     })\r\n                     .getItemById(serviceID);\r\n               });\r\n            },\r\n\r\n            async addImageToId(context, arg = { serviceID, imageFile }) {\r\n               return context.state.processor.acquire(\"addImageToId\", async () => {\r\n                  let { serviceID, imageFile } = arg;\r\n                  let imageFileForm = new FormData();\r\n                  imageFileForm.append(imageFile.name, imageFile);\r\n                  let api = await ApiHost.fetch({\r\n                     method: \"POST\",\r\n                     url: `service/id/${serviceID}/image/`,\r\n                     body: imageFileForm,\r\n                  });\r\n                  if (api.error) throw new Error(api.error);\r\n                  let { content } = api;\r\n                  let { serviceId, imageFiles } = content;\r\n\r\n                  return new CollectionUpdater(context)\r\n                     .onId((item) => item.getId())\r\n                     .onUpdate((item) => item.imageFiles.push(...imageFiles))\r\n                     .getItemById(serviceId);\r\n               });\r\n            },\r\n            async removeImageFromId(context, arg = { serviceID, image }) {\r\n               return context.state.processor.acquire(\"removeImageFromId\", async () => {\r\n                  let { serviceID, image } = arg;\r\n                  let api = await ApiHost.imgFile.remove(image.name);\r\n                  if (api.error) throw new Error();\r\n                  api = ApiHost.request()\r\n                     .DELETE()\r\n                     .url(\"service/image/\")\r\n                     .body({ serviceID, content: image })\r\n                     .send();\r\n                  let error = api.error;\r\n                  if (error) {\r\n                     throw new Error();\r\n                  }\r\n                  return new CollectionUpdater(context)\r\n                     .onId((item) => item.getId())\r\n                     .onUpdate((item) => {\r\n                        item.imageFiles = item.imageFiles.filter(\r\n                           (imageFile) => imageFile.name !== image.name\r\n                        );\r\n                     })\r\n                     .getItemById(serviceID);\r\n               });\r\n            },\r\n\r\n            async updateUrgentOfId(context, arg = { serviceID, isUrgent }) {\r\n               return context.state.processor.acquire(\"updateUrgentOfId\", async () => {\r\n                  let { serviceID, isUrgent } = arg;\r\n                  const api = await ApiHost.request()\r\n                     .PUT()\r\n                     .url(\"service/urgent\")\r\n                     .body({ serviceID, isUrgent })\r\n                     .send();\r\n\r\n                  let error = api.getError();\r\n                  if (error) throw new Error();\r\n                  const content = api.getContent();\r\n\r\n                  let service = new Service(content);\r\n                  return new CollectionUpdater(context)\r\n                     .onId((item) => item.getId())\r\n                     .onUpdate((item) => item.setUrgent(service.isUrgent()))\r\n                     .getItemById(service.getId());\r\n               });\r\n            },\r\n            async updateWarrantyOfId(context, arg = { serviceID, isWarranty }) {\r\n               return context.state.processor.acquire(\"updateWarrantyOfId\", async () => {\r\n                  let { serviceID, isWarranty } = arg;\r\n                  const api = await ApiHost.request()\r\n                     .PUT()\r\n                     .url(\"service/warranty\")\r\n                     .body({ serviceID, isWarranty })\r\n                     .send();\r\n\r\n                  let error = api.getError();\r\n                  if (error) throw new Error();\r\n                  const content = api.getContent();\r\n\r\n                  let service = new Service(content);\r\n                  return new CollectionUpdater(context)\r\n                     .onId((item) => item.getId())\r\n                     .onUpdate((item) => item.setWarranty(service.isWarranty()))\r\n                     .getItemById(service.getId());\r\n               });\r\n            },\r\n\r\n            async addLabelToId(context, arg = { serviceID, label }) {\r\n               return context.state.processor.acquire(\"addLabelToId\", async () => {\r\n                  let { serviceID, label } = arg;\r\n                  const api = await ApiHost.request()\r\n                     .POST()\r\n                     .url(\"service/label\")\r\n                     .body({ serviceID, label })\r\n                     .send();\r\n\r\n                  let error = api.getError();\r\n                  if (error) throw new Error(error);\r\n                  const content = api.getContent();\r\n                  console.log(content);\r\n               });\r\n            },\r\n            async removeLabelFromId(context, arg = { serviceID, label }) {\r\n               return context.state.processor.acquire(\"removeLabelFromId\", async () => {\r\n                  let { serviceID, label } = arg;\r\n                  const api = await ApiHost.request()\r\n                     .DELETE()\r\n                     .url(\"service/label\")\r\n                     .body({ serviceID, label: label.toData() })\r\n                     .send();\r\n\r\n                  let error = api.getError();\r\n                  if (error) throw new Error(error);\r\n                  const content = api.getContent();\r\n\r\n                  let service = Service.importData(content);\r\n                  let items = context.state.items;\r\n                  let item = items.find((item) => {\r\n                     return item.getId() === service.getId();\r\n                  });\r\n\r\n                  if (!item) {\r\n                     items.push(service);\r\n                     item = service;\r\n                  } else {\r\n                     item.setLabels(service.getLabels());\r\n                  }\r\n\r\n                  context.commit(\"items\", items);\r\n\r\n                  return item;\r\n               });\r\n            },\r\n         },\r\n      });\r\n\r\n      return storeService;\r\n   },\r\n};\r\n"]}]}