{"remainingRequest":"C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\development\\freshnet-v2\\vue\\src\\stores\\components\\CollectionUpdater.js","dependencies":[{"path":"C:\\development\\freshnet-v2\\vue\\src\\stores\\components\\CollectionUpdater.js","mtime":1662650937467},{"path":"C:\\development\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9jbGFzc0NhbGxDaGVjayA9IHJlcXVpcmUoIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGNsYXNzQ2FsbENoZWNrLmpzIikuZGVmYXVsdDsKCnZhciBfY3JlYXRlQ2xhc3MgPSByZXF1aXJlKCJDOlxcZGV2ZWxvcG1lbnRcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxjcmVhdGVDbGFzcy5qcyIpLmRlZmF1bHQ7Cgp2YXIgX2NsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWMgPSByZXF1aXJlKCJDOlxcZGV2ZWxvcG1lbnRcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxjbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjLmpzIikuZGVmYXVsdDsKCnZhciBfY2xhc3NQcml2YXRlRmllbGRHZXQgPSByZXF1aXJlKCJDOlxcZGV2ZWxvcG1lbnRcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxjbGFzc1ByaXZhdGVGaWVsZEdldC5qcyIpLmRlZmF1bHQ7Cgp2YXIgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0ID0gcmVxdWlyZSgiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcY2xhc3NQcml2YXRlRmllbGRTZXQuanMiKS5kZWZhdWx0OwoKdmFyIF9jb250ZXh0LCBfaXRlbUlkR2V0dGVyLCBfdXBkYXRlcjsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMud2Vhay1tYXAuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyIpOwoKbW9kdWxlLmV4cG9ydHMgPSAoX2NvbnRleHQgPSAvKiNfX1BVUkVfXyovbmV3IFdlYWtNYXAoKSwgX2l0ZW1JZEdldHRlciA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha01hcCgpLCBfdXBkYXRlciA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha01hcCgpLCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICJ1c2Ugc3RyaWN0IjsKCiAgZnVuY3Rpb24gQ29sbGVjdGlvblVwZGF0ZXIoY29udGV4dCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbGxlY3Rpb25VcGRhdGVyKTsKCiAgICBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYyh0aGlzLCBfY29udGV4dCwgewogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IHZvaWQgMAogICAgfSk7CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWModGhpcywgX2l0ZW1JZEdldHRlciwgewogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IHZvaWQgMAogICAgfSk7CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWModGhpcywgX3VwZGF0ZXIsIHsKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIHZhbHVlOiB2b2lkIDAKICAgIH0pOwoKICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfY29udGV4dCwgY29udGV4dCk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQ29sbGVjdGlvblVwZGF0ZXIsIFt7CiAgICBrZXk6ICJvbklkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbklkKGl0ZW1JZEdldHRlcikgewogICAgICBfY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX2l0ZW1JZEdldHRlciwgaXRlbUlkR2V0dGVyKTsKCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uVXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblVwZGF0ZSh1cGRhdGVyKSB7CiAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfdXBkYXRlciwgdXBkYXRlcik7CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRJdGVtIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJdGVtKGl0ZW1PY2N1cmVkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaXRlbXMgPSBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX2NvbnRleHQpLmdldHRlcnMuaXRlbXM7CgogICAgICB2YXIgZXhpc3RpbmdJdGVtID0gaXRlbXMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBfY2xhc3NQcml2YXRlRmllbGRHZXQoX3RoaXMsIF9pdGVtSWRHZXR0ZXIpLmNhbGwoX3RoaXMsIGl0ZW0pID09PSBfY2xhc3NQcml2YXRlRmllbGRHZXQoX3RoaXMsIF9pdGVtSWRHZXR0ZXIpLmNhbGwoX3RoaXMsIGl0ZW1PY2N1cmVkKTsKICAgICAgfSk7CgogICAgICBpZiAoZXhpc3RpbmdJdGVtKSB7CiAgICAgICAgaWYgKF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfdXBkYXRlcikpIHsKICAgICAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfdXBkYXRlcikuY2FsbCh0aGlzLCBleGlzdGluZ0l0ZW0sIGl0ZW1PY2N1cmVkKTsKCiAgICAgICAgICByZXR1cm4gZXhpc3RpbmdJdGVtOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgZXhpc3RpbmdJbmRleCA9IGl0ZW1zLmluZGV4T2YoZXhpc3RpbmdJdGVtKTsKICAgICAgICAgIGl0ZW1zW2V4aXN0aW5nSW5kZXhdID0gaXRlbU9jY3VyZWQ7CiAgICAgICAgICByZXR1cm4gaXRlbU9jY3VyZWQ7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGl0ZW1zLnB1c2goaXRlbU9jY3VyZWQpOwoKICAgICAgICBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX2NvbnRleHQpLmNvbW1pdCgiaXRlbXMiLCBpdGVtcyk7CgogICAgICAgIHJldHVybiBpdGVtT2NjdXJlZDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldEl0ZW1CeUlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJdGVtQnlJZChpZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBpdGVtcyA9IF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfY29udGV4dCkuZ2V0dGVycy5pdGVtczsKCiAgICAgIHZhciBleGlzdGluZ0l0ZW0gPSBpdGVtcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIF9jbGFzc1ByaXZhdGVGaWVsZEdldChfdGhpczIsIF9pdGVtSWRHZXR0ZXIpLmNhbGwoX3RoaXMyLCBpdGVtKSA9PT0gaWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGV4aXN0aW5nSXRlbSkgewogICAgICAgIGlmIChfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3VwZGF0ZXIpKSB7CiAgICAgICAgICBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3VwZGF0ZXIpLmNhbGwodGhpcywgZXhpc3RpbmdJdGVtKTsKCiAgICAgICAgICByZXR1cm4gZXhpc3RpbmdJdGVtOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQ29sbGVjdGlvblVwZGF0ZXI7Cn0oKSk7"},{"version":3,"sources":["C:/development/freshnet-v2/vue/src/stores/components/CollectionUpdater.js"],"names":["module","exports","context","itemIdGetter","updater","itemOccured","items","getters","existingItem","find","item","existingIndex","indexOf","push","commit","id"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAAA,MAAM,CAACC,OAAP;AAAA;;AAMG,6BAAYC,OAAZ,EAAqB;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAClB,0CAAgBA,OAAhB;AACF;;AARJ;AAAA;AAAA,WAUG,cAAKC,YAAL,EAAmB;AAChB,iDAAqBA,YAArB;;AACA,aAAO,IAAP;AACF;AAbJ;AAAA;AAAA,WAcG,kBAASC,OAAT,EAAkB;AACf,4CAAgBA,OAAhB;;AACA,aAAO,IAAP;AACF;AAjBJ;AAAA;AAAA,WAmBG,iBAAQC,WAAR,EAAqB;AAAA;;AAClB,UAAMC,KAAK,GAAG,sCAAcC,OAAd,CAAsBD,KAApC;;AACA,UAAME,YAAY,GAAGF,KAAK,CAACG,IAAN,CAClB,UAACC,IAAD;AAAA,eAAU,sBAAA,KAAI,gBAAJ,MAAA,KAAI,EAAeA,IAAf,CAAJ,2BAA6B,KAA7B,sBAA6B,KAA7B,EAAgDL,WAAhD,CAAV;AAAA,OADkB,CAArB;;AAIA,UAAIG,YAAJ,EAAkB;AACf,kCAAI,IAAJ,aAAmB;AAChB,2DAAcA,YAAd,EAA4BH,WAA5B;;AACA,iBAAOG,YAAP;AACF,SAHD,MAGO;AACJ,cAAMG,aAAa,GAAGL,KAAK,CAACM,OAAN,CAAcJ,YAAd,CAAtB;AACAF,UAAAA,KAAK,CAACK,aAAD,CAAL,GAAuBN,WAAvB;AACA,iBAAOA,WAAP;AACF;AACH,OATD,MASO;AACJC,QAAAA,KAAK,CAACO,IAAN,CAAWR,WAAX;;AACA,8CAAcS,MAAd,CAAqB,OAArB,EAA8BR,KAA9B;;AACA,eAAOD,WAAP;AACF;AACH;AAvCJ;AAAA;AAAA,WAyCG,qBAAYU,EAAZ,EAAgB;AAAA;;AACb,UAAMT,KAAK,GAAG,sCAAcC,OAAd,CAAsBD,KAApC;;AACA,UAAME,YAAY,GAAGF,KAAK,CAACG,IAAN,CAClB,UAACC,IAAD;AAAA,eAAU,sBAAA,MAAI,gBAAJ,MAAA,MAAI,EAAeA,IAAf,CAAJ,KAA6BK,EAAvC;AAAA,OADkB,CAArB;;AAIA,UAAIP,YAAJ,EAAkB;AACf,kCAAI,IAAJ,aAAmB;AAChB,2DAAcA,YAAd;;AACA,iBAAOA,YAAP;AACF;AACH;;AACD,aAAO,IAAP;AACF;AAtDJ;;AAAA;AAAA","sourcesContent":["module.exports = class CollectionUpdater {\r\n   #context;\r\n\r\n   #itemIdGetter;\r\n   #updater;\r\n\r\n   constructor(context) {\r\n      this.#context = context;\r\n   }\r\n\r\n   onId(itemIdGetter) {\r\n      this.#itemIdGetter = itemIdGetter;\r\n      return this;\r\n   }\r\n   onUpdate(updater) {\r\n      this.#updater = updater;\r\n      return this;\r\n   }\r\n\r\n   getItem(itemOccured) {\r\n      const items = this.#context.getters.items;\r\n      const existingItem = items.find(\r\n         (item) => this.#itemIdGetter(item) === this.#itemIdGetter(itemOccured)\r\n      );\r\n\r\n      if (existingItem) {\r\n         if (this.#updater) {\r\n            this.#updater(existingItem, itemOccured);\r\n            return existingItem;\r\n         } else {\r\n            const existingIndex = items.indexOf(existingItem);\r\n            items[existingIndex] = itemOccured;\r\n            return itemOccured;\r\n         }\r\n      } else {\r\n         items.push(itemOccured);\r\n         this.#context.commit(\"items\", items);\r\n         return itemOccured;\r\n      }\r\n   }\r\n\r\n   getItemById(id) {\r\n      const items = this.#context.getters.items;\r\n      const existingItem = items.find(\r\n         (item) => this.#itemIdGetter(item) === id\r\n      );\r\n\r\n      if (existingItem) {\r\n         if (this.#updater) {\r\n            this.#updater(existingItem);\r\n            return existingItem;\r\n         }\r\n      }\r\n      return null;\r\n   }\r\n};\r\n"]}]}