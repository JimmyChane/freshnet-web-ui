{"remainingRequest":"C:\\development\\freshnet-v2\\vue\\node_modules\\thread-loader\\dist\\cjs.js!C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\development\\freshnet-v2\\vue\\src\\main.js","dependencies":[{"path":"C:\\development\\freshnet-v2\\vue\\src\\main.js","mtime":1663685407018},{"path":"C:\\development\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1662650934417},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfdHlwZW9mIGZyb20gIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcdHlwZW9mLmpzIjsKaW1wb3J0IF9jbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjIGZyb20gIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYy5qcyI7CmltcG9ydCBfY2xhc3NQcml2YXRlRmllbGRHZXQgZnJvbSAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjbGFzc1ByaXZhdGVGaWVsZEdldC5qcyI7CmltcG9ydCBfY2xhc3NQcml2YXRlRmllbGRTZXQgZnJvbSAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjbGFzc1ByaXZhdGVGaWVsZFNldC5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxkZWZpbmVQcm9wZXJ0eS5qcyI7CmltcG9ydCAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXGNvcmUtanNcXG1vZHVsZXNcXGVzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJDOlxcZGV2ZWxvcG1lbnRcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcY29yZS1qc1xcbW9kdWxlc1xcZXMucHJvbWlzZS5qcyI7CmltcG9ydCAiQzpcXGRldmVsb3BtZW50XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXGNvcmUtanNcXG1vZHVsZXNcXGVzLm9iamVjdC5hc3NpZ24uanMiOwppbXBvcnQgIkM6XFxkZXZlbG9wbWVudFxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxjb3JlLWpzXFxtb2R1bGVzXFxlcy5wcm9taXNlLmZpbmFsbHkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMud2Vhay1tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKCnZhciBBcHBMYXlvdXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEFwcExheW91dChjb250ZXh0KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXBwTGF5b3V0KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNvbnRleHQiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicmVxdWVzdHMiLCBbXSk7CgogICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDsKICB9CgogIF9jcmVhdGVDbGFzcyhBcHBMYXlvdXQsIFt7CiAgICBrZXk6ICJzZXRMYXlvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldExheW91dChtb2RlKSB7CiAgICAgIHN3aXRjaCAobW9kZSkgewogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm47CgogICAgICAgIGNhc2UgQXBwTGF5b3V0LkxheW91dC5OT1JNQUw6CiAgICAgICAgY2FzZSBBcHBMYXlvdXQuTGF5b3V0LkZVTEw6CiAgICAgIH0KCiAgICAgIHZhciBwYWdlID0gdGhpcy5jb250ZXh0LmN1cnJlbnRQYWdlS2V5OwogICAgICB2YXIgdmlldyA9IHRoaXMuY29udGV4dC5jdXJyZW50Vmlld0tleTsKICAgICAgdmFyIHJlcXVlc3QgPSB0aGlzLnJlcXVlc3RzLmZpbmQoZnVuY3Rpb24gKHJlcXVlc3QpIHsKICAgICAgICByZXR1cm4gcmVxdWVzdC5wYWdlID09PSBwYWdlICYmIHJlcXVlc3QudmlldyA9PT0gdmlldzsKICAgICAgfSk7CiAgICAgIGlmIChyZXF1ZXN0KSByZXF1ZXN0Lm1vZGUgPSBtb2RlO2Vsc2UgdGhpcy5yZXF1ZXN0cy5wdXNoKHsKICAgICAgICBwYWdlOiBwYWdlLAogICAgICAgIHZpZXc6IHZpZXcsCiAgICAgICAgbW9kZTogbW9kZQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDdXJyZW50UmVxdWVzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q3VycmVudFJlcXVlc3QoKSB7CiAgICAgIHZhciBwYWdlID0gdGhpcy5jb250ZXh0LmN1cnJlbnRQYWdlS2V5OwogICAgICB2YXIgdmlldyA9IHRoaXMuY29udGV4dC5jdXJyZW50Vmlld0tleTsKICAgICAgdmFyIHJlcXVlc3QgPSB0aGlzLnJlcXVlc3RzLmZpbmQoZnVuY3Rpb24gKHJlcXVlc3QpIHsKICAgICAgICByZXR1cm4gcmVxdWVzdC5wYWdlID09PSBwYWdlICYmIHJlcXVlc3QudmlldyA9PT0gdmlldzsKICAgICAgfSk7CiAgICAgIHJldHVybiByZXF1ZXN0ID8gcmVxdWVzdCA6IG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q3VycmVudExheW91dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q3VycmVudExheW91dCgpIHsKICAgICAgdmFyIHJlcXVlc3QgPSB0aGlzLmdldEN1cnJlbnRSZXF1ZXN0KCk7CiAgICAgIHJldHVybiByZXF1ZXN0ID8gcmVxdWVzdC5tb2RlIDogQXBwTGF5b3V0LkxheW91dC5GVUxMOwogICAgfQogIH0sIHsKICAgIGtleTogImlzTm9ybWFsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc05vcm1hbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudExheW91dCgpID09PSBBcHBMYXlvdXQuTGF5b3V0Lk5PUk1BTDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0Z1bGwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzRnVsbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudExheW91dCgpID09PSBBcHBMYXlvdXQuTGF5b3V0LkZVTEw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQXBwTGF5b3V0Owp9KCk7CgpfZGVmaW5lUHJvcGVydHkoQXBwTGF5b3V0LCAiTGF5b3V0IiwgewogIE5PUk1BTDogLTEsCiAgRlVMTDogLTIKfSk7Cgp2YXIgTmF2aWdhdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gTmF2aWdhdGlvbihjb250ZXh0KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTmF2aWdhdGlvbik7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjb250ZXh0Iiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInJlcXVlc3RzIiwgW10pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibGF5b3V0UmVxdWVzdHMiLCBbXSk7CgogICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDsKICB9CgogIF9jcmVhdGVDbGFzcyhOYXZpZ2F0aW9uLCBbewogICAga2V5OiAic2V0VmlzaWJpbGl0eSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VmlzaWJpbGl0eSh2aXNpYmlsaXR5KSB7CiAgICAgIHN3aXRjaCAodmlzaWJpbGl0eSkgewogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm47CgogICAgICAgIGNhc2UgTmF2aWdhdGlvbi5WaXNpYmlsaXR5Lk5PTkU6CiAgICAgICAgY2FzZSBOYXZpZ2F0aW9uLlZpc2liaWxpdHkuRVhQQU5ERUQ6CiAgICAgICAgY2FzZSBOYXZpZ2F0aW9uLlZpc2liaWxpdHkuQ09MTEFQU0VEOgogICAgICB9CgogICAgICB2YXIgcGFnZSA9IHRoaXMuY29udGV4dC5jdXJyZW50UGFnZUtleTsKICAgICAgdmFyIHZpZXcgPSB0aGlzLmNvbnRleHQuY3VycmVudFZpZXdLZXk7CiAgICAgIHZhciByZXF1ZXN0ID0gdGhpcy5yZXF1ZXN0cy5maW5kKGZ1bmN0aW9uIChyZXF1ZXN0KSB7CiAgICAgICAgcmV0dXJuIHJlcXVlc3QucGFnZSA9PT0gcGFnZSAmJiByZXF1ZXN0LnZpZXcgPT09IHZpZXc7CiAgICAgIH0pOwogICAgICBpZiAocmVxdWVzdCkgcmVxdWVzdC52aXNpYmlsaXR5ID0gdmlzaWJpbGl0eTtlbHNlIHRoaXMucmVxdWVzdHMucHVzaCh7CiAgICAgICAgcGFnZTogcGFnZSwKICAgICAgICB2aWV3OiB2aWV3LAogICAgICAgIHZpc2liaWxpdHk6IHZpc2liaWxpdHkKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0TGF5b3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRMYXlvdXQobGF5b3V0KSB7CiAgICAgIHN3aXRjaCAobGF5b3V0KSB7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybjsKCiAgICAgICAgY2FzZSBOYXZpZ2F0aW9uLkxheW91dC5XSURFOgogICAgICAgIGNhc2UgTmF2aWdhdGlvbi5MYXlvdXQuVEhJTjoKICAgICAgfQoKICAgICAgdmFyIHBhZ2UgPSB0aGlzLmNvbnRleHQuY3VycmVudFBhZ2VLZXk7CiAgICAgIHZhciB2aWV3ID0gdGhpcy5jb250ZXh0LmN1cnJlbnRWaWV3S2V5OwogICAgICB2YXIgcmVxdWVzdCA9IHRoaXMubGF5b3V0UmVxdWVzdHMuZmluZChmdW5jdGlvbiAocmVxdWVzdCkgewogICAgICAgIHJldHVybiByZXF1ZXN0LnBhZ2UgPT09IHBhZ2UgJiYgcmVxdWVzdC52aWV3ID09PSB2aWV3OwogICAgICB9KTsKICAgICAgaWYgKHJlcXVlc3QpIHJlcXVlc3QubGF5b3V0ID0gbGF5b3V0O2Vsc2UgdGhpcy5sYXlvdXRSZXF1ZXN0cy5wdXNoKHsKICAgICAgICBwYWdlOiBwYWdlLAogICAgICAgIHZpZXc6IHZpZXcsCiAgICAgICAgbGF5b3V0OiBsYXlvdXQKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q3VycmVudFJlcXVlc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEN1cnJlbnRSZXF1ZXN0KCkgewogICAgICB2YXIgcGFnZSA9IHRoaXMuY29udGV4dC5jdXJyZW50UGFnZUtleTsKICAgICAgdmFyIHZpZXcgPSB0aGlzLmNvbnRleHQuY3VycmVudFZpZXdLZXk7CiAgICAgIHZhciByZXF1ZXN0ID0gdGhpcy5yZXF1ZXN0cy5maW5kKGZ1bmN0aW9uIChyZXF1ZXN0KSB7CiAgICAgICAgcmV0dXJuIHJlcXVlc3QucGFnZSA9PT0gcGFnZSAmJiByZXF1ZXN0LnZpZXcgPT09IHZpZXc7CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVxdWVzdCA/IHJlcXVlc3QgOiBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEN1cnJlbnRMYXlvdXRSZXF1ZXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDdXJyZW50TGF5b3V0UmVxdWVzdCgpIHsKICAgICAgdmFyIHBhZ2UgPSB0aGlzLmNvbnRleHQuY3VycmVudFBhZ2VLZXk7CiAgICAgIHZhciB2aWV3ID0gdGhpcy5jb250ZXh0LmN1cnJlbnRWaWV3S2V5OwogICAgICB2YXIgcmVxdWVzdCA9IHRoaXMubGF5b3V0UmVxdWVzdHMuZmluZChmdW5jdGlvbiAocmVxdWVzdCkgewogICAgICAgIHJldHVybiByZXF1ZXN0LnBhZ2UgPT09IHBhZ2UgJiYgcmVxdWVzdC52aWV3ID09PSB2aWV3OwogICAgICB9KTsKICAgICAgcmV0dXJuIHJlcXVlc3QgPyByZXF1ZXN0IDogbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDdXJyZW50VmlzaWJpbGl0eSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q3VycmVudFZpc2liaWxpdHkoKSB7CiAgICAgIHZhciByZXF1ZXN0ID0gdGhpcy5nZXRDdXJyZW50UmVxdWVzdCgpOwogICAgICByZXR1cm4gcmVxdWVzdCA/IHJlcXVlc3QudmlzaWJpbGl0eSA6IE5hdmlnYXRpb24uVmlzaWJpbGl0eS5DT0xMQVBTRUQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q3VycmVudExheW91dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q3VycmVudExheW91dCgpIHsKICAgICAgdmFyIHJlcXVlc3QgPSB0aGlzLmdldEN1cnJlbnRMYXlvdXRSZXF1ZXN0KCk7CiAgICAgIHJldHVybiByZXF1ZXN0ID8gcmVxdWVzdC5sYXlvdXQgOiBOYXZpZ2F0aW9uLkxheW91dC5XSURFOwogICAgfQogIH0sIHsKICAgIGtleTogImlzTm9uZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNOb25lKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmlzaWJpbGl0eSgpID09PSBOYXZpZ2F0aW9uLlZpc2liaWxpdHkuTk9ORTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0V4cGFuZGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0V4cGFuZGVkKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmlzaWJpbGl0eSgpID09PSBOYXZpZ2F0aW9uLlZpc2liaWxpdHkuRVhQQU5ERUQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNDb2xsYXBzZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ29sbGFwc2VkKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmlzaWJpbGl0eSgpID09PSBOYXZpZ2F0aW9uLlZpc2liaWxpdHkuQ09MTEFQU0VEOwogICAgfQogIH0sIHsKICAgIGtleTogImlzV2lkZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNXaWRlKCkgewogICAgICByZXR1cm4gIXRoaXMuaXNUaGluKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNUaGluIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc1RoaW4oKSB7CiAgICAgIGlmICh0aGlzLmlzRHJhd2VyKCkpIHJldHVybiBmYWxzZTsKICAgICAgdmFyIHdpbmRvdyA9IHRoaXMuY29udGV4dC53aW5kb3c7CiAgICAgIHZhciBpbm5lcldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CgogICAgICBpZiAodGhpcy5nZXRDdXJyZW50TGF5b3V0KCkgPT09IE5hdmlnYXRpb24uTGF5b3V0LldJREUpIHsKICAgICAgICByZXR1cm4gaW5uZXJXaWR0aCA8PSAxMDAwOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50TGF5b3V0KCkgPT09IE5hdmlnYXRpb24uTGF5b3V0LlRISU47CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNEcmF3ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzRHJhd2VyKCkgewogICAgICB2YXIgd2luZG93ID0gdGhpcy5jb250ZXh0LndpbmRvdzsKICAgICAgdmFyIGlubmVyV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsKICAgICAgcmV0dXJuIGlubmVyV2lkdGggPD0gNjAwOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIE5hdmlnYXRpb247Cn0oKTsKCl9kZWZpbmVQcm9wZXJ0eShOYXZpZ2F0aW9uLCAiVmlzaWJpbGl0eSIsIHsKICBOT05FOiAtMSwKICBFWFBBTkRFRDogLTIsCiAgQ09MTEFQU0VEOiAtMwp9KTsKCl9kZWZpbmVQcm9wZXJ0eShOYXZpZ2F0aW9uLCAiTGF5b3V0IiwgewogIFdJREU6IC0xLAogIFRISU46IC0yCn0pOwoKdmFyIE5vdGlmaWNhdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gTm90aWZpY2F0aW9uKGNvbnRleHQpIHsKICAgIHZhciBwYXJhbSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogewogICAgICB0ZXh0OiB0ZXh0LAogICAgICBpc0xvYWRpbmc6IGlzTG9hZGluZywKICAgICAgaWNvbjogaWNvbiwKICAgICAgYWN0aW9uczogYWN0aW9ucwogICAgfTsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTm90aWZpY2F0aW9uKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInNuYWNrYmFycyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJrZXkiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaXNTaG93aW5nIiwgZmFsc2UpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaWNvbiIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ0ZXh0Iiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImlzTG9hZGluZyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhY3Rpb25zIiwgdm9pZCAwKTsKCiAgICB0aGlzLnNuYWNrYmFycyA9IGNvbnRleHQuc25hY2tiYXJzOwogICAgdGhpcy5rZXkgPSBjb250ZXh0LmtleUdldHRlci5nZXQoKTsKICAgIHRoaXMuaWNvbiA9IHBhcmFtLmljb247CiAgICB0aGlzLmlzTG9hZGluZyA9IHBhcmFtLmlzTG9hZGluZzsKICAgIHRoaXMudGV4dCA9IHBhcmFtLnRleHQ7CiAgICB0aGlzLmFjdGlvbnMgPSBwYXJhbS5hY3Rpb25zOwogIH0KCiAgX2NyZWF0ZUNsYXNzKE5vdGlmaWNhdGlvbiwgW3sKICAgIGtleTogImluZGV4IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5zbmFja2JhcnMuaW5kZXhPZih0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzaG93IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHRpbWVvdXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDMwMDA7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpcy5pc1Nob3dpbmcgPSB0cnVlOwogICAgICB9LCA4MCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpcy5oaWRlKCk7CiAgICAgIH0sIHRpbWVvdXQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoaWRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuaXNTaG93aW5nID0gZmFsc2U7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5zbmFja2JhcnMuc3BsaWNlKF90aGlzMi5zbmFja2JhcnMuaW5kZXhPZihfdGhpczIpLCAxKTsKICAgICAgfSwgODApOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9XSk7CgogIHJldHVybiBOb3RpZmljYXRpb247Cn0oKTsKCnZhciBfbGFzdCA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha01hcCgpOwoKdmFyIFRpbWVOb3dHZXR0ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFRpbWVOb3dHZXR0ZXIoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGltZU5vd0dldHRlcik7CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWModGhpcywgX2xhc3QsIHsKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIHZhbHVlOiAwCiAgICB9KTsKICB9CgogIF9jcmVhdGVDbGFzcyhUaW1lTm93R2V0dGVyLCBbewogICAga2V5OiAiZ2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfbGFzdCwgMCk7CgogICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTsKCiAgICAgIHdoaWxlIChfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX2xhc3QpID49IG5vdykgewogICAgICAgIG5vdysrOwogICAgICB9CgogICAgICBfY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX2xhc3QsIG5vdyk7CgogICAgICByZXR1cm4gbm93OwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFRpbWVOb3dHZXR0ZXI7Cn0oKTsKCmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IFJvdXRlciBmcm9tICIuL21haW4ucm91dGVyLmpzIjsKaW1wb3J0IFN0b3JlcyBmcm9tICIuL21haW4uc3RvcmVzLmpzIjsKaW1wb3J0IE1peGluIGZyb20gIi4vbWFpbi5taXhpbi5qcyI7CmltcG9ydCBBcHAgZnJvbSAiLi9hcHAvQXBwLnZ1ZSI7CmltcG9ydCBBcGlIb3N0IGZyb20gIi4vaG9zdC9BcGlIb3N0LmpzIjsKaW1wb3J0IFBhZ2VNYW5hZ2UgZnJvbSAiLi9wYWdlcy9tYW5hZ2UvUGFnZU1hbmFnZS52dWUiOwppbXBvcnQgUGFnZVVzZXJzIGZyb20gIi4vcGFnZXMvdXNlcnMvUGFnZVVzZXJzLnZ1ZSI7CmltcG9ydCBQYWdlRGF0YWJhc2UgZnJvbSAiLi9wYWdlcy9kYXRhYmFzZS9QYWdlRGF0YWJhc2UudnVlIjsKVnVlLmNvbmZpZy5wcm9kdWN0aW9uVGlwID0gZmFsc2U7ClZ1ZS5wcm90b3R5cGUuaG9zdCA9IEFwaUhvc3Q7ClZ1ZS5taXhpbihNaXhpbik7Cgp2YXIgVXRpbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gVXRpbCgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVdGlsKTsKICB9CgogIF9jcmVhdGVDbGFzcyhVdGlsLCBudWxsLCBbewogICAga2V5OiAib2JqZWN0VG9BcnJheSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb2JqZWN0VG9BcnJheSgpIHsKICAgICAgdmFyIG9iamVjdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhfdHlwZW9mKG9iamVjdCkgPT09ICJvYmplY3QiID8gb2JqZWN0IDoge30pLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGtleToga2V5LAogICAgICAgICAgdmFsdWU6IG9iamVjdFtrZXldCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29uZmluZVJvdXRlUXVlcnkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbmZpbmVSb3V0ZVF1ZXJ5KHByZXZpb3VzUXVlcnksIG5leHRRdWVyeSkgewogICAgICB2YXIgbmV4dFF1ZXJpZXMgPSBVdGlsLm9iamVjdFRvQXJyYXkocHJldmlvdXNRdWVyeSk7CiAgICAgIHZhciBxdWVyaWVzID0gVXRpbC5vYmplY3RUb0FycmF5KG5leHRRdWVyeSk7CiAgICAgIHZhciBpc0NoYW5nZWQgPSBmYWxzZTsKCiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihxdWVyaWVzKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcCgpIHsKICAgICAgICAgIHZhciBxdWVyeSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgdmFyIGN1cnJlbnQgPSBuZXh0UXVlcmllcy5maW5kKGZ1bmN0aW9uIChjdXJyZW50KSB7CiAgICAgICAgICAgIHJldHVybiBjdXJyZW50LmtleSA9PT0gcXVlcnkua2V5OwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKGN1cnJlbnQgJiYgY3VycmVudC52YWx1ZSAhPT0gcXVlcnkudmFsdWUpIHsKICAgICAgICAgICAgY3VycmVudC52YWx1ZSA9IHF1ZXJ5LnZhbHVlOwogICAgICAgICAgICBpc0NoYW5nZWQgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIGlmICghY3VycmVudCAmJiBxdWVyeS52YWx1ZSAhPT0gbnVsbCAmJiBxdWVyeS52YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIG5leHRRdWVyaWVzLnB1c2goewogICAgICAgICAgICAgIGtleTogcXVlcnkua2V5LAogICAgICAgICAgICAgIHZhbHVlOiBxdWVyeS52YWx1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaXNDaGFuZ2VkID0gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoY3VycmVudCAmJiBjdXJyZW50LnZhbHVlID09PSBudWxsKSB7CiAgICAgICAgICAgIG5leHRRdWVyaWVzLnNwbGljZShuZXh0UXVlcmllcy5pbmRleE9mKGN1cnJlbnQpLCAxKTsKICAgICAgICAgICAgaXNDaGFuZ2VkID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgX2xvb3AoKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQoKICAgICAgaWYgKCFpc0NoYW5nZWQpIHJldHVybjsKICAgICAgcmV0dXJuIG5leHRRdWVyaWVzLnJlZHVjZShmdW5jdGlvbiAocXVlcnksIG5ld1F1ZXJ5KSB7CiAgICAgICAgcXVlcnlbbmV3UXVlcnkua2V5XSA9IG5ld1F1ZXJ5LnZhbHVlOwogICAgICAgIHJldHVybiBxdWVyeTsKICAgICAgfSwge30pOwogICAgfQogIH0sIHsKICAgIGtleTogInBhcnNlSWNvblVybCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VJY29uVXJsKG5hbWUpIHsKICAgICAgcmV0dXJuIEFwaUhvc3QucmVzKCJpY29uLyIuY29uY2F0KG5hbWUsICIuc3ZnIikpOwogICAgfQogIH0sIHsKICAgIGtleTogInB1dFJlc291cmNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwdXRSZXNvdXJjZShjb250ZXh0LCBjb21wb25lbnQpIHsKICAgICAgdmFyIGtleSA9IGNvbXBvbmVudC5rZXksCiAgICAgICAgICByZXNvdXJjZSA9IGNvbXBvbmVudC5yZXNvdXJjZTsKICAgICAga2V5ID0gdHlwZW9mIGtleSA9PT0gInN0cmluZyIgPyBrZXkgOiAiIjsKICAgICAgcmVzb3VyY2UgPSBfdHlwZW9mKHJlc291cmNlKSA9PT0gIm9iamVjdCIgPyByZXNvdXJjZSA6IHt9OwogICAgICB2YXIgX3Jlc291cmNlID0gcmVzb3VyY2UsCiAgICAgICAgICB0aXRsZSA9IF9yZXNvdXJjZS50aXRsZSwKICAgICAgICAgIGljb24gPSBfcmVzb3VyY2UuaWNvbjsKICAgICAgdGl0bGUgPSB0eXBlb2YgdGl0bGUgPT09ICJzdHJpbmciID8gdGl0bGUudHJpbSgpIDogIiI7CiAgICAgIGljb24gPSBfdHlwZW9mKGljb24pID09PSAib2JqZWN0IiA/IGljb24gOiBudWxsOwogICAgICBjb250ZXh0LmtleSA9IGtleTsKICAgICAgY29udGV4dC50aXRsZSA9IHRpdGxlOwogICAgICBjb250ZXh0Lmljb24gPSBpY29uID09PSBudWxsID8gbnVsbCA6IHsKICAgICAgICBsaWdodDogVXRpbC5wYXJzZUljb25VcmwoaWNvbi5saWdodCksCiAgICAgICAgZGFyazogVXRpbC5wYXJzZUljb25VcmwoaWNvbi5kYXJrKQogICAgICB9OwogICAgICByZXR1cm4gY29udGV4dDsKICAgIH0KICB9XSk7CgogIHJldHVybiBVdGlsOwp9KCk7CgpuZXcgVnVlKHsKICBob3N0OiBBcGlIb3N0LAogIHJvdXRlcjogUm91dGVyLAogIHN0b3JlOiBTdG9yZXMuc3RvcmUsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnNvbGU6IHsKICAgICAgICBsb2c6IGZ1bmN0aW9uIGxvZyhwYXJhbTEsIHBhcmFtMikgewogICAgICAgICAgcGFyYW0yID09PSB1bmRlZmluZWQgPyBjb25zb2xlLmxvZyhwYXJhbTEpIDogY29uc29sZS5sb2cocGFyYW0xLCBwYXJhbTIpOwogICAgICAgIH0sCiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKHBhcmFtMSwgcGFyYW0yKSB7CiAgICAgICAgICBwYXJhbTIgPT09IHVuZGVmaW5lZCA/IGNvbnNvbGUuZXJyb3IocGFyYW0xKSA6IGNvbnNvbGUuZXJyb3IocGFyYW0xLCBwYXJhbTIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAga2V5R2V0dGVyOiBuZXcgVGltZU5vd0dldHRlcigpLAogICAgICB3aW5kb3c6IHsKICAgICAgICBpbm5lcldpZHRoOiAwLAogICAgICAgIGlubmVySGVpZ2h0OiAwCiAgICAgIH0sCiAgICAgIGFwcExheW91dDogbnVsbCwKICAgICAgbmF2aWdhdGlvbjogbnVsbCwKICAgICAgc25hY2tiYXJzOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB1c2VyOiBmdW5jdGlvbiB1c2VyKGMpIHsKICAgICAgcmV0dXJuIGMubG9naW5TdG9yZS5nZXR0ZXJzLnVzZXI7CiAgICB9LAogICAgLy8gYXBwCiAgICBhcHA6IGZ1bmN0aW9uIGFwcChjKSB7CiAgICAgIHJldHVybiBjLiRjaGlsZHJlbi5sZW5ndGggPyBjLiRjaGlsZHJlblswXSA6IG51bGw7CiAgICB9LAogICAgLy8gcGFnZXMKICAgIHBhZ2VzOiBmdW5jdGlvbiBwYWdlcygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAoIUFycmF5LmlzQXJyYXkoQXBwLmNoaWxkcmVuKSkgcmV0dXJuIFtdOwogICAgICByZXR1cm4gQXBwLmNoaWxkcmVuLm1hcChmdW5jdGlvbiAoUGFnZSkgewogICAgICAgIHZhciBWaWV3cyA9IEFycmF5LmlzQXJyYXkoUGFnZS5jaGlsZHJlbikgPyBQYWdlLmNoaWxkcmVuIDogW107CiAgICAgICAgdmFyIFNlY3Rpb25zID0gVmlld3MucmVkdWNlKGZ1bmN0aW9uIChTZWN0aW9ucywgVmlldykgewogICAgICAgICAgaWYgKFZpZXcgPT09IFBhZ2VVc2VycyAmJiAoIV90aGlzMy51c2VyIHx8ICFfdGhpczMudXNlci5pc1R5cGVBZG1pbigpKSkgewogICAgICAgICAgICByZXR1cm4gU2VjdGlvbnM7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKFZpZXcgPT09IFBhZ2VEYXRhYmFzZSAmJiAoIV90aGlzMy51c2VyIHx8ICFfdGhpczMudXNlci5pc1R5cGVBZG1pbigpKSkgewogICAgICAgICAgICByZXR1cm4gU2VjdGlvbnM7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGdyb3VwID0gX3R5cGVvZihWaWV3Lmdyb3VwKSA9PT0gIm9iamVjdCIgPyBWaWV3Lmdyb3VwIDoge307CiAgICAgICAgICB2YXIga2V5ID0gdHlwZW9mIGdyb3VwLmtleSA9PT0gInN0cmluZyIgPyBncm91cC5rZXkudHJpbSgpLnJlcGxhY2UoIiAiLCAiIikgOiAiIjsKICAgICAgICAgIHZhciB0aXRsZSA9IHR5cGVvZiBncm91cC50aXRsZSA9PT0gInN0cmluZyIgPyBncm91cC50aXRsZSA6ICIiOwogICAgICAgICAgdmFyIFNlY3Rpb24gPSBTZWN0aW9ucy5maW5kKGZ1bmN0aW9uIChTZWN0aW9uKSB7CiAgICAgICAgICAgIHJldHVybiBTZWN0aW9uLmtleSA9PT0ga2V5OwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoIVNlY3Rpb24pIFNlY3Rpb25zLnB1c2goU2VjdGlvbiA9IHsKICAgICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICAgICAgVmlld3M6IFtdCiAgICAgICAgICB9KTsKICAgICAgICAgIFNlY3Rpb24uVmlld3MucHVzaChWaWV3KTsKICAgICAgICAgIHJldHVybiBTZWN0aW9uczsKICAgICAgICB9LCBbXSk7CiAgICAgICAgaWYgKFBhZ2UgPT09IFBhZ2VNYW5hZ2UgJiYgIV90aGlzMy51c2VyKSByZXR1cm4gVXRpbC5wdXRSZXNvdXJjZSh7fSwgUGFnZSk7CiAgICAgICAgdmFyIHNlY3Rpb25zID0gU2VjdGlvbnMubWFwKGZ1bmN0aW9uIChTZWN0aW9uKSB7CiAgICAgICAgICB2YXIgdGl0bGUgPSBTZWN0aW9uLnRpdGxlLAogICAgICAgICAgICAgIFZpZXdzID0gU2VjdGlvbi5WaWV3czsKICAgICAgICAgIFZpZXdzID0gQXJyYXkuaXNBcnJheShWaWV3cykgPyBWaWV3cyA6IFtdOwogICAgICAgICAgdmFyIHZpZXdzID0gVmlld3MubWFwKGZ1bmN0aW9uIChWaWV3KSB7CiAgICAgICAgICAgIHJldHVybiBVdGlsLnB1dFJlc291cmNlKHt9LCBWaWV3KTsKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIHNlY3Rpb24gPSBVdGlsLnB1dFJlc291cmNlKHsKICAgICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAgICB2aWV3czogdmlld3MKICAgICAgICAgIH0sIFNlY3Rpb24pOwogICAgICAgICAgc2VjdGlvbi50aXRsZSA9IHRpdGxlOwogICAgICAgICAgcmV0dXJuIHNlY3Rpb247CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIFV0aWwucHV0UmVzb3VyY2UoewogICAgICAgICAgc2VjdGlvbnM6IHNlY3Rpb25zCiAgICAgICAgfSwgUGFnZSk7CiAgICAgIH0pOwogICAgfSwKICAgIHBhdGhzOiBmdW5jdGlvbiBwYXRocyhjKSB7CiAgICAgIHJldHVybiBjLiRyb3V0ZS5wYXRoLnNwbGl0KCIvIikuZmlsdGVyKGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgICAgcmV0dXJuIHBhdGg7CiAgICAgIH0pOwogICAgfSwKICAgIGN1cnJlbnRQYXRoczogZnVuY3Rpb24gY3VycmVudFBhdGhzKCkgewogICAgICB2YXIgZnVsbFBhdGggPSB0aGlzLiRyb3V0ZS5mdWxsUGF0aDsKICAgICAgdmFyIHF1ZXN0aW9uTWFya0luZGV4ID0gZnVsbFBhdGguaW5kZXhPZigiPyIpOwoKICAgICAgaWYgKHF1ZXN0aW9uTWFya0luZGV4ICE9PSAtMSkgewogICAgICAgIGZ1bGxQYXRoID0gZnVsbFBhdGguc3Vic3RyaW5nKDAsIHF1ZXN0aW9uTWFya0luZGV4KTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZ1bGxQYXRoLnNwbGl0KC9bL10vKS5maWx0ZXIoZnVuY3Rpb24gKHBhdGgpIHsKICAgICAgICByZXR1cm4gcGF0aDsKICAgICAgfSk7CiAgICB9LAogICAgY3VycmVudFBhZ2VLZXk6IGZ1bmN0aW9uIGN1cnJlbnRQYWdlS2V5KCkgewogICAgICB2YXIgcGF0aHMgPSB0aGlzLmN1cnJlbnRQYXRoczsKICAgICAgcmV0dXJuIHBhdGhzLmxlbmd0aCA+IDAgPyBwYXRoc1swXSA6ICIiOwogICAgfSwKICAgIGN1cnJlbnRWaWV3S2V5OiBmdW5jdGlvbiBjdXJyZW50Vmlld0tleSgpIHsKICAgICAgdmFyIHBhdGhzID0gdGhpcy5jdXJyZW50UGF0aHM7CiAgICAgIHJldHVybiBwYXRocy5sZW5ndGggPiAxID8gcGF0aHNbMV0gOiAiIjsKICAgIH0sCiAgICAvLyBhcHAgbGF5b3V0IG1vZGUKICAgIEFQUF9MQVlPVVRfTU9ERTogZnVuY3Rpb24gQVBQX0xBWU9VVF9NT0RFKGMpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBOT1JNQUw6IEFwcExheW91dC5MYXlvdXQuTk9STUFMLAogICAgICAgIEZVTEw6IEFwcExheW91dC5MYXlvdXQuRlVMTAogICAgICB9OwogICAgfSwKICAgIGFwcExheW91dEN1cnJlbnRSZXF1ZXN0OiBmdW5jdGlvbiBhcHBMYXlvdXRDdXJyZW50UmVxdWVzdChjKSB7CiAgICAgIHJldHVybiBjLmFwcExheW91dC5nZXRDdXJyZW50TGF5b3V0KCk7CiAgICB9LAogICAgYXBwTGF5b3V0TW9kZTogZnVuY3Rpb24gYXBwTGF5b3V0TW9kZShjKSB7CiAgICAgIHJldHVybiBjLmFwcExheW91dEN1cnJlbnRSZXF1ZXN0OwogICAgfSwKICAgIC8vIG5hdmlnYXRpb24KICAgIERSQVdFUl9WSVNJQklMSVRZOiBmdW5jdGlvbiBEUkFXRVJfVklTSUJJTElUWShjKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgTk9ORTogTmF2aWdhdGlvbi5WaXNpYmlsaXR5Lk5PTkUsCiAgICAgICAgRVhQQU5ERUQ6IE5hdmlnYXRpb24uVmlzaWJpbGl0eS5FWFBBTkRFRCwKICAgICAgICBDT0xMQVBTRUQ6IE5hdmlnYXRpb24uVmlzaWJpbGl0eS5DT0xMQVBTRUQKICAgICAgfTsKICAgIH0sCiAgICBEUkFXRVJfTEFZT1VUOiBmdW5jdGlvbiBEUkFXRVJfTEFZT1VUKGMpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBXSURFOiBOYXZpZ2F0aW9uLkxheW91dC5XSURFLAogICAgICAgIFRISU46IE5hdmlnYXRpb24uTGF5b3V0LlRISU4KICAgICAgfTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBjdXJyZW50UGF0aHM6IGZ1bmN0aW9uIGN1cnJlbnRQYXRocygpIHsKICAgICAgdGhpcy5jbG9zZU5hdmlnYXRpb25EcmF3ZXIoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIGFwcCBsYXlvdXQKICAgIHNldEFwcExheW91dDogZnVuY3Rpb24gc2V0QXBwTGF5b3V0KGxheW91dCkgewogICAgICB0aGlzLmFwcExheW91dC5zZXRMYXlvdXQobGF5b3V0KTsKICAgIH0sCiAgICAvLyBuYXZpZ2F0aW9uCiAgICBvcGVuTmF2aWdhdGlvbkRyYXdlcjogZnVuY3Rpb24gb3Blbk5hdmlnYXRpb25EcmF3ZXIoKSB7CiAgICAgIHRoaXMubmF2aWdhdGlvbi5zZXRWaXNpYmlsaXR5KHRoaXMuRFJBV0VSX1ZJU0lCSUxJVFkuRVhQQU5ERUQpOwogICAgfSwKICAgIGNsb3NlTmF2aWdhdGlvbkRyYXdlcjogZnVuY3Rpb24gY2xvc2VOYXZpZ2F0aW9uRHJhd2VyKCkgewogICAgICB0aGlzLm5hdmlnYXRpb24uc2V0VmlzaWJpbGl0eSh0aGlzLkRSQVdFUl9WSVNJQklMSVRZLkNPTExBUFNFRCk7CiAgICB9LAogICAgc2V0TmF2aWdhdGlvbkRyYXdlclZpc2liaWxpeTogZnVuY3Rpb24gc2V0TmF2aWdhdGlvbkRyYXdlclZpc2liaWxpeSh2aXNpYmlsaXR5KSB7CiAgICAgIHRoaXMubmF2aWdhdGlvbi5zZXRWaXNpYmlsaXR5KHZpc2liaWxpdHkpOwogICAgfSwKICAgIC8vIGdldCBmdWxsIGljb24gdXJsIG9uIHNlcnZlciBsb2NhbGhvc3QvcmVzL2ljb24vJHtuYW1lfS5zdmcKICAgIGljb246IGZ1bmN0aW9uIGljb24obmFtZSkgewogICAgICBjb25zb2xlLnRyYWNlKCk7CiAgICAgIGNvbnNvbGUud2FybigicGxlYXNlIGNvbnNpZGVyIHVzaW5nIGhvc3QuaWNvbigpIGluc3RlYWQiKTsKICAgICAgcmV0dXJuIHRoaXMuaG9zdC5yZXMoImljb24vIi5jb25jYXQobmFtZSwgIi5zdmciKSk7CiAgICB9LAogICAgLy8gc2VuZCBhIHNuYWNrYmFyIG5vdGlmaWNhdGlvbgogICAgZmVlZGJhY2s6IGZ1bmN0aW9uIGZlZWRiYWNrKHBhcmFtKSB7CiAgICAgIGlmICh0eXBlb2YgcGFyYW0gPT09ICJzdHJpbmciKSB7CiAgICAgICAgcGFyYW0gPSB7CiAgICAgICAgICB0ZXh0OiBwYXJhbQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHRoaXMuc25hY2tiYXJzLnB1c2gobmV3IE5vdGlmaWNhdGlvbih0aGlzLCBwYXJhbSkuc2hvdygpKTsKICAgICAgcmV0dXJuOwogICAgICBpZiAodGhpcy5hcHApIHRoaXMuYXBwLnNob3dTbmFja2JhcihwYXJhbSk7CiAgICB9LAogICAgLy8gZXh0ZXJuYWwgaW50ZXJhY3Rpb24KICAgIGNvcHlUZXh0OiBmdW5jdGlvbiBjb3B5VGV4dCh0ZXh0KSB7CiAgICAgIHZhciB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIik7CiAgICAgIHRleHRhcmVhLnZhbHVlID0gdGV4dDsKICAgICAgdGV4dGFyZWEuc2V0QXR0cmlidXRlKCJyZWFkb25seSIsICIiKTsKICAgICAgdGV4dGFyZWEuc3R5bGUgPSB7CiAgICAgICAgcG9zaXRpb246ICJhYnNvbHV0ZSIsCiAgICAgICAgbGVmdDogIi05OTk5cHgiCiAgICAgIH07CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpOwogICAgICB0ZXh0YXJlYS5zZWxlY3QoKTsKICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoImNvcHkiKTsKICAgICAgdGV4dGFyZWEucmVtb3ZlKCk7CiAgICB9LAogICAgb3Blbkxpbms6IGZ1bmN0aW9uIG9wZW5MaW5rKGxpbmspIHsKICAgICAgdmFyIHRhcmdldCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogIl9ibGFuayI7CiAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICBhLnN0eWxlID0gewogICAgICAgIHBvc2l0aW9uOiAiYWJzb2x1dGUiLAogICAgICAgIG9wYWNpdHk6ICIwIiwKICAgICAgICAicG9pbnRlci1ldmVudHMiOiAibm9uZSIKICAgICAgfTsKICAgICAgYS5ocmVmID0gbGluazsKICAgICAgYS50YXJnZXQgPSB0YXJnZXQ7CiAgICAgIGEuZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgiY2xpY2siLCB7CiAgICAgICAgdmlldzogd2luZG93LAogICAgICAgIGJ1YmJsZXM6IHRydWUsCiAgICAgICAgY2FuY2VsYWJsZTogZmFsc2UKICAgICAgfSkpOwogICAgICBhLnJlbW92ZSgpOwogICAgfSwKICAgIHB1c2hEb3dubG9hZDogZnVuY3Rpb24gcHVzaERvd25sb2FkKGZpbGVuYW1lLCBjb250ZW50KSB7CiAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICBlbGVtZW50LmhyZWYgPSAiZGF0YTp0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgsIi5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KGNvbnRlbnQpKTsKICAgICAgZWxlbWVudC5kb3dubG9hZCA9IGZpbGVuYW1lOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpOwogICAgICBlbGVtZW50LmNsaWNrKCk7CiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbWVudCk7CiAgICB9LAogICAgLy8gcm91dGVzCiAgICBuZXh0Um91dGU6IGZ1bmN0aW9uIG5leHRSb3V0ZSgpIHsKICAgICAgdmFyIHBhcmFtID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgdGhpcy5zZXRSb3V0ZShwYXJhbSwgdHJ1ZSk7CiAgICB9LAogICAgcmVwbGFjZVJvdXRlOiBmdW5jdGlvbiByZXBsYWNlUm91dGUoKSB7CiAgICAgIHZhciBwYXJhbSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIHRoaXMuc2V0Um91dGUocGFyYW0sIGZhbHNlKTsKICAgIH0sCiAgICBzZXRSb3V0ZTogZnVuY3Rpb24gc2V0Um91dGUoKSB7CiAgICAgIHZhciBwYXJhbSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIHZhciBpc05leHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgICAgIHZhciBxdWVyeSA9IFV0aWwuY29uZmluZVJvdXRlUXVlcnkodGhpcy4kcm91dGUucXVlcnksIHBhcmFtLnF1ZXJ5KTsKICAgICAgaWYgKGlzTmV4dCkgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHF1ZXJ5OiBxdWVyeQogICAgICB9KTtlbHNlIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICBxdWVyeTogcXVlcnkKICAgICAgfSk7CiAgICB9LAogICAgLy8gd2luZG93CiAgICBpbnZhbGlkYXRlV2luZG93OiBmdW5jdGlvbiBpbnZhbGlkYXRlV2luZG93KCkgewogICAgICB0aGlzLndpbmRvdy5pbm5lcldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CiAgICAgIHRoaXMud2luZG93LmlubmVySGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0OwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuYXBwTGF5b3V0ID0gbmV3IEFwcExheW91dCh0aGlzKTsKICAgIHRoaXMubmF2aWdhdGlvbiA9IG5ldyBOYXZpZ2F0aW9uKHRoaXMpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHRoaXMuaW52YWxpZGF0ZVdpbmRvdyk7IC8vIHRvZG8gaW1wbGVtZW50IGluaGVyaXRhYmxlIG9uQmFjayBmdW5jdGlvbnMKICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXl1cCIsIChldmVudCkgPT4gewogICAgLy8gICAgY29uc29sZS5sb2coZXZlbnQpOwogICAgLy8gfSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbnZhbGlkYXRlV2luZG93KCk7CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihjcmVhdGVFbGVtZW50KSB7CiAgICByZXR1cm4gY3JlYXRlRWxlbWVudChBcHApOwogIH0KfSkuJG1vdW50KCIjYXBwIik7"},null]}