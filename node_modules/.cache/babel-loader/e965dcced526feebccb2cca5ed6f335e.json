{"remainingRequest":"C:\\dev\\freshnet-v2\\vue\\node_modules\\thread-loader\\dist\\cjs.js!C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-v2\\vue\\src\\main.js","dependencies":[{"path":"C:\\dev\\freshnet-v2\\vue\\src\\main.js","mtime":1668084588786},{"path":"C:\\dev\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1662650934417},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOlxcZGV2XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFx0b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICJDOlxcZGV2XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiQzpcXGRldlxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcdHlwZW9mLmpzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOlxcZGV2XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzpcXGRldlxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcY29yZS1qc1xcbW9kdWxlc1xcZXMuYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcY29yZS1qc1xcbW9kdWxlc1xcZXMucHJvbWlzZS5qcyI7CmltcG9ydCAiQzpcXGRldlxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxjb3JlLWpzXFxtb2R1bGVzXFxlcy5vYmplY3QuYXNzaWduLmpzIjsKaW1wb3J0ICJDOlxcZGV2XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXGNvcmUtanNcXG1vZHVsZXNcXGVzLnByb21pc2UuZmluYWxseS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKLy8gdG9vbHMKaW1wb3J0IEFwcExheW91dCBmcm9tICIuL3Rvb2xzL0FwcExheW91dC5qcyI7CmltcG9ydCBOYXZpZ2F0aW9uIGZyb20gIi4vdG9vbHMvTmF2aWdhdGlvbi5qcyI7CmltcG9ydCBOb3RpZmljYXRpb24gZnJvbSAiLi90b29scy9Ob3RpZmljYXRpb24uanMiOwppbXBvcnQgVGltZU5vd0dldHRlciBmcm9tICIuL3Rvb2xzL1RpbWVOb3dHZXR0ZXIuanMiOwppbXBvcnQgQXBpSG9zdCBmcm9tICIuL2hvc3QvQXBpSG9zdC5qcyI7IC8vIHZ1ZQoKaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQgUm91dGVyIGZyb20gIi4vbWFpbi5yb3V0ZXIuanMiOwppbXBvcnQgU3RvcmVzIGZyb20gIi4vbWFpbi5zdG9yZXMuanMiOwppbXBvcnQgTWl4aW4gZnJvbSAiLi9tYWluLm1peGluLmpzIjsgLy8gYXBwCgppbXBvcnQgQXBwIGZyb20gIi4vYXBwL0FwcC52dWUiOwpWdWUuY29uZmlnLnByb2R1Y3Rpb25UaXAgPSBmYWxzZTsKVnVlLnByb3RvdHlwZS5ob3N0ID0gQXBpSG9zdDsKVnVlLm1peGluKE1peGluKTsKCnZhciBVID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBVKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFUpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFUsIG51bGwsIFt7CiAgICBrZXk6ICJvYmplY3RUb0FycmF5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvYmplY3RUb0FycmF5KCkgewogICAgICB2YXIgb2JqZWN0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKF90eXBlb2Yob2JqZWN0KSA9PT0gIm9iamVjdCIgPyBvYmplY3QgOiB7fSkubWFwKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICB2YWx1ZTogb2JqZWN0W2tleV0KICAgICAgICB9OwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb25maW5lUm91dGVRdWVyeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29uZmluZVJvdXRlUXVlcnkocHJldmlvdXNRdWVyeSwgbmV4dFF1ZXJ5KSB7CiAgICAgIHZhciBuZXh0UXVlcmllcyA9IFUub2JqZWN0VG9BcnJheShwcmV2aW91c1F1ZXJ5KTsKICAgICAgdmFyIHF1ZXJpZXMgPSBVLm9iamVjdFRvQXJyYXkobmV4dFF1ZXJ5KTsKICAgICAgdmFyIGlzQ2hhbmdlZCA9IGZhbHNlOwoKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHF1ZXJpZXMpLAogICAgICAgICAgX3N0ZXA7CgogICAgICB0cnkgewogICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKCkgewogICAgICAgICAgdmFyIHF1ZXJ5ID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICB2YXIgY3VycmVudCA9IG5leHRRdWVyaWVzLmZpbmQoZnVuY3Rpb24gKGN1cnJlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQua2V5ID09PSBxdWVyeS5rZXk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoY3VycmVudCAmJiBjdXJyZW50LnZhbHVlICE9PSBxdWVyeS52YWx1ZSkgewogICAgICAgICAgICBjdXJyZW50LnZhbHVlID0gcXVlcnkudmFsdWU7CiAgICAgICAgICAgIGlzQ2hhbmdlZCA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgaWYgKCFjdXJyZW50ICYmIHF1ZXJ5LnZhbHVlICE9PSBudWxsICYmIHF1ZXJ5LnZhbHVlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgbmV4dFF1ZXJpZXMucHVzaCh7CiAgICAgICAgICAgICAga2V5OiBxdWVyeS5rZXksCiAgICAgICAgICAgICAgdmFsdWU6IHF1ZXJ5LnZhbHVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpc0NoYW5nZWQgPSB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjdXJyZW50ICYmIGN1cnJlbnQudmFsdWUgPT09IG51bGwpIHsKICAgICAgICAgICAgbmV4dFF1ZXJpZXMuc3BsaWNlKG5leHRRdWVyaWVzLmluZGV4T2YoY3VycmVudCksIDEpOwogICAgICAgICAgICBpc0NoYW5nZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICBfbG9vcCgpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CgogICAgICBpZiAoIWlzQ2hhbmdlZCkgcmV0dXJuOwogICAgICByZXR1cm4gbmV4dFF1ZXJpZXMucmVkdWNlKGZ1bmN0aW9uIChxdWVyeSwgbmV3UXVlcnkpIHsKICAgICAgICBxdWVyeVtuZXdRdWVyeS5rZXldID0gbmV3UXVlcnkudmFsdWU7CiAgICAgICAgcmV0dXJuIHF1ZXJ5OwogICAgICB9LCB7fSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNPYmplY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzT2JqZWN0KG9iaikgewogICAgICByZXR1cm4gX3R5cGVvZihvYmopID09PSAib2JqZWN0IjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc1N0cmluZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNTdHJpbmcoc3RyKSB7CiAgICAgIHJldHVybiB0eXBlb2Ygc3RyID09PSAic3RyaW5nIjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc1Bhc3NlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNQYXNzZWQodXNlciwgcGVybWlzc2lvbnMpIHsKICAgICAgcGVybWlzc2lvbnMgPSBBcnJheS5pc0FycmF5KHBlcm1pc3Npb25zKSA/IHBlcm1pc3Npb25zIDogW107CiAgICAgIHZhciBpc0FkbWluID0gdXNlciA/IHVzZXIuaXNUeXBlQWRtaW4oKSA6IGZhbHNlOwogICAgICB2YXIgaXNTdGFmZiA9IHVzZXIgPyB1c2VyLmlzVHlwZVN0YWZmKCkgOiBmYWxzZTsKCiAgICAgIGlmIChwZXJtaXNzaW9ucy5sZW5ndGggPiAwKSB7CiAgICAgICAgaWYgKGlzQWRtaW4gJiYgIXBlcm1pc3Npb25zLmluY2x1ZGVzKCJhZG1pbiIpKSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKGlzU3RhZmYgJiYgIXBlcm1pc3Npb25zLmluY2x1ZGVzKCJzdGFmZiIpKSByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogInBhcnNlSWNvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VJY29uKGljb24pIHsKICAgICAgaWNvbiA9IFUuaXNPYmplY3QoaWNvbikgPyBpY29uIDogbnVsbDsKICAgICAgaWYgKGljb24gPT09IG51bGwpIHJldHVybiBudWxsOwogICAgICB2YXIgbGlnaHQgPSBpY29uID09PSBudWxsID8gIiIgOiBBcGlIb3N0LnJlcygiaWNvbi8iLmNvbmNhdChpY29uLmxpZ2h0LCAiLnN2ZyIpKTsKICAgICAgdmFyIGRhcmsgPSBpY29uID09PSBudWxsID8gIiIgOiBBcGlIb3N0LnJlcygiaWNvbi8iLmNvbmNhdChpY29uLmRhcmssICIuc3ZnIikpOwogICAgICByZXR1cm4gewogICAgICAgIGxpZ2h0OiBsaWdodCwKICAgICAgICBkYXJrOiBkYXJrCiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAicGFyc2VLZXkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlS2V5KHN0cikgewogICAgICByZXR1cm4gdGhpcy5pc1N0cmluZyhzdHIpID8gc3RyLnRyaW0oKS5yZXBsYWNlKCIgIiwgIiIpIDogIiI7CiAgICB9CiAgfSwgewogICAga2V5OiAicGFyc2VBcnJheSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VBcnJheShhcnJheSkgewogICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnJheSkgPyBhcnJheSA6IFtdOwogICAgfQogIH0sIHsKICAgIGtleTogInBhcnNlT2JqZWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZU9iamVjdChvYmopIHsKICAgICAgcmV0dXJuIHRoaXMuaXNPYmplY3Qob2JqKSA/IG9iaiA6IHt9OwogICAgfQogIH0sIHsKICAgIGtleTogInBhcnNlU3RyaW5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZVN0cmluZyhzdHIpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNTdHJpbmcoc3RyKSA/IHN0ciA6ICIiOwogICAgfQogIH0sIHsKICAgIGtleTogInBhcnNlR3JvdXAycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VHcm91cDJzKGFycmF5KSB7CiAgICAgIHJldHVybiBVLnBhcnNlQXJyYXkoYXJyYXkpLm1hcChmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGtleTogb2JqLmtleSwKICAgICAgICAgIHRpdGxlOiBvYmoudGl0bGUsCiAgICAgICAgICBpY29uOiBvYmouaWNvbiwKICAgICAgICAgIHZhbHVlczogb2JqLnZhbHVlcywKICAgICAgICAgIGNoaWxkcmVuOiBvYmouY2hpbGRyZW4sCiAgICAgICAgICB1c2VyUGVybWlzc2lvbnM6IG9iai51c2VyUGVybWlzc2lvbnMKICAgICAgICB9OwogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBVOwp9KCk7CgpuZXcgVnVlKHsKICBob3N0OiBBcGlIb3N0LAogIHJvdXRlcjogUm91dGVyLAogIHN0b3JlOiBTdG9yZXMuc3RvcmUsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnNvbGU6IHsKICAgICAgICBsb2c6IGZ1bmN0aW9uIGxvZyhwYXJhbTEsIHBhcmFtMikgewogICAgICAgICAgcGFyYW0yID09PSB1bmRlZmluZWQgPyBjb25zb2xlLmxvZyhwYXJhbTEpIDogY29uc29sZS5sb2cocGFyYW0xLCBwYXJhbTIpOwogICAgICAgIH0sCiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKHBhcmFtMSwgcGFyYW0yKSB7CiAgICAgICAgICBwYXJhbTIgPT09IHVuZGVmaW5lZCA/IGNvbnNvbGUuZXJyb3IocGFyYW0xKSA6IGNvbnNvbGUuZXJyb3IocGFyYW0xLCBwYXJhbTIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAga2V5R2V0dGVyOiBuZXcgVGltZU5vd0dldHRlcigpLAogICAgICB3aW5kb3c6IHsKICAgICAgICBpbm5lcldpZHRoOiAwLAogICAgICAgIGlubmVySGVpZ2h0OiAwCiAgICAgIH0sCiAgICAgIGFwcExheW91dDogbnVsbCwKICAgICAgbmF2aWdhdGlvbjogbnVsbCwKICAgICAgc25hY2tiYXJzOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB1c2VyOiBmdW5jdGlvbiB1c2VyKGMpIHsKICAgICAgcmV0dXJuIGMubG9naW5TdG9yZS5nZXR0ZXJzLnVzZXI7CiAgICB9LAogICAgLy8gYXBwCiAgICBhcHA6IGZ1bmN0aW9uIGFwcChjKSB7CiAgICAgIHJldHVybiBjLiRjaGlsZHJlbi5sZW5ndGggPyBjLiRjaGlsZHJlblswXSA6IG51bGw7CiAgICB9LAogICAgLy8gcGFnZXMKICAgIHBhZ2VzOiBmdW5jdGlvbiBwYWdlcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBwYWdlcyA9IFUucGFyc2VBcnJheShBcHAuX2NoaWxkcmVuKCkpOwogICAgICBpZiAocGFnZXMubGVuZ3RoIDwgMSkgcmV0dXJuIFtdOwogICAgICB2YXIgbGlzdEdyb3VwMSA9IHBhZ2VzLm1hcChmdW5jdGlvbiAocGFnZSkgewogICAgICAgIC8vIGdldCBwcm9wZXJ0eQogICAgICAgIHZhciBrZXkgPSBwYWdlLmtleSwKICAgICAgICAgICAgdGl0bGUgPSBwYWdlLnRpdGxlLAogICAgICAgICAgICBpY29uID0gcGFnZS5pY29uLAogICAgICAgICAgICB1c2VyUGVybWlzc2lvbnMgPSBwYWdlLnVzZXJQZXJtaXNzaW9uczsKICAgICAgICB2YXIgX2NoaWxkcmVuID0gcGFnZS5fY2hpbGRyZW4sCiAgICAgICAgICAgIF9ncm91cHMgPSBwYWdlLl9ncm91cHMsCiAgICAgICAgICAgIF9xdWVyaWVzID0gcGFnZS5fcXVlcmllczsgLy8gZ2V0IHJlYWR5CgogICAgICAgIGtleSA9IFUucGFyc2VLZXkocGFnZS5rZXkpOwogICAgICAgIHRpdGxlID0gVS5wYXJzZVN0cmluZyhwYWdlLnRpdGxlKS50cmltKCk7CiAgICAgICAgaWNvbiA9IFUucGFyc2VJY29uKHBhZ2UuaWNvbik7CiAgICAgICAgdmFyIGNoaWxkcmVuID0gdHlwZW9mIF9jaGlsZHJlbiA9PT0gImZ1bmN0aW9uIiA/IF9jaGlsZHJlbigpIDogW107CiAgICAgICAgdmFyIGdyb3VwcyA9IHR5cGVvZiBfZ3JvdXBzID09PSAiZnVuY3Rpb24iID8gX2dyb3VwcygpIDogW107CiAgICAgICAgdmFyIHF1ZXJpZXMgPSB0eXBlb2YgX3F1ZXJpZXMgPT09ICJmdW5jdGlvbiIgPyBfcXVlcmllcygpIDogW107IC8vIHBhcnNpbmcKCiAgICAgICAgdmFyIHBhcnNlZENoaWxkcmVuID0gVS5wYXJzZUdyb3VwMnMoW3sKICAgICAgICAgIHZhbHVlczogY2hpbGRyZW4KICAgICAgICB9XSkubWFwKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgIG9iai5pc0xpbmsgPSB0cnVlOwogICAgICAgICAgb2JqLmlzUXVlcnkgPSBmYWxzZTsKICAgICAgICAgIHJldHVybiBvYmo7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHBhcnNlZEdyb3VwcyA9IFUucGFyc2VHcm91cDJzKGdyb3VwcykubWFwKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgIG9iai5pc0xpbmsgPSB0cnVlOwogICAgICAgICAgb2JqLmlzUXVlcnkgPSBmYWxzZTsKICAgICAgICAgIHJldHVybiBvYmo7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHBhcnNlZFF1ZXJpZXMgPSBVLnBhcnNlR3JvdXAycyhxdWVyaWVzKS5tYXAoZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgb2JqLmlzTGluayA9IHRydWU7CiAgICAgICAgICBvYmouaXNRdWVyeSA9IHRydWU7CiAgICAgICAgICByZXR1cm4gb2JqOwogICAgICAgIH0pOwogICAgICAgIHZhciByZXR1cm5QYXJzZWRHcm91cHMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHBhcnNlZENoaWxkcmVuKSwgX3RvQ29uc3VtYWJsZUFycmF5KHBhcnNlZEdyb3VwcyksIF90b0NvbnN1bWFibGVBcnJheShwYXJzZWRRdWVyaWVzKSkubWFwKGZ1bmN0aW9uIChncm91cCkgewogICAgICAgICAgdmFyIF9ncm91cCR2YWx1ZXM7CgogICAgICAgICAgaWYgKCFVLmlzUGFzc2VkKF90aGlzLnVzZXIsIGdyb3VwLnVzZXJQZXJtaXNzaW9ucykpIHJldHVybiBncm91cDsKICAgICAgICAgIGdyb3VwLmtleSA9IFUucGFyc2VLZXkoZ3JvdXAua2V5KTsKICAgICAgICAgIGdyb3VwLnRpdGxlID0gVS5wYXJzZVN0cmluZyhncm91cC50aXRsZSk7CiAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZ3JvdXAudmFsdWVzKSkgZ3JvdXAudmFsdWVzID0gW107CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncm91cC5jaGlsZHJlbikpIChfZ3JvdXAkdmFsdWVzID0gZ3JvdXAudmFsdWVzKS51bnNoaWZ0LmFwcGx5KF9ncm91cCR2YWx1ZXMsIF90b0NvbnN1bWFibGVBcnJheShncm91cC5jaGlsZHJlbikpOwogICAgICAgICAgcmV0dXJuIGdyb3VwOwogICAgICAgIH0pLnJlZHVjZShmdW5jdGlvbiAoZ3JvdXBzLCBncm91cCkgewogICAgICAgICAgdmFyIF9mb3VuZCRncm91cHM7CgogICAgICAgICAgaWYgKCFVLmlzUGFzc2VkKF90aGlzLnVzZXIsIGdyb3VwLnVzZXJQZXJtaXNzaW9ucykpIHJldHVybiBncm91cHM7IC8vIGdldCBwcm9wZXJ0eQoKICAgICAgICAgIHZhciBrZXkgPSBncm91cC5rZXksCiAgICAgICAgICAgICAgdGl0bGUgPSBncm91cC50aXRsZTsKICAgICAgICAgIHZhciBpc0xpbmsgPSBncm91cC5pc0xpbmssCiAgICAgICAgICAgICAgaXNRdWVyeSA9IGdyb3VwLmlzUXVlcnk7CiAgICAgICAgICB2YXIgdmlld3MgPSBVLnBhcnNlQXJyYXkoZ3JvdXAudmFsdWVzKS5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgIGlmICghVS5pc1Bhc3NlZChfdGhpcy51c2VyLCB2YWx1ZS51c2VyUGVybWlzc2lvbnMpKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgdmFyIGtleSA9IFUucGFyc2VLZXkodmFsdWUua2V5KTsKICAgICAgICAgICAgdmFyIHRpdGxlID0gVS5wYXJzZVN0cmluZyh2YWx1ZS50aXRsZSk7CiAgICAgICAgICAgIHZhciBpY29uID0gVS5wYXJzZUljb24odmFsdWUuaWNvbik7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICAgICAgaWNvbjogaWNvbiwKICAgICAgICAgICAgICB0aXRsZTogdGl0bGUKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAodmlldykgewogICAgICAgICAgICByZXR1cm4gdmlldyAhPT0gbnVsbDsKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIGZvdW5kID0gZ3JvdXBzLmZpbmQoZnVuY3Rpb24gKGdyb3VwKSB7CiAgICAgICAgICAgIHJldHVybiBncm91cC5rZXkgPT09IGtleTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgICAgZ3JvdXBzLnB1c2goZm91bmQgPSB7CiAgICAgICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAgICAgIGlzTGluazogaXNMaW5rLAogICAgICAgICAgICAgIGlzUXVlcnk6IGlzUXVlcnksCiAgICAgICAgICAgICAgZ3JvdXBzOiBbXQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICAoX2ZvdW5kJGdyb3VwcyA9IGZvdW5kLmdyb3VwcykucHVzaC5hcHBseShfZm91bmQkZ3JvdXBzLCBfdG9Db25zdW1hYmxlQXJyYXkodmlld3MpKTsKCiAgICAgICAgICByZXR1cm4gZ3JvdXBzOwogICAgICAgIH0sIFtdKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICBpY29uOiBpY29uLAogICAgICAgICAgdXNlclBlcm1pc3Npb25zOiB1c2VyUGVybWlzc2lvbnMsCiAgICAgICAgICBncm91cHM6IHJldHVyblBhcnNlZEdyb3VwcwogICAgICAgIH07CiAgICAgIH0pOwogICAgICBsaXN0R3JvdXAxLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwMSkgewogICAgICAgIHZhciBsaXN0R3JvdXAyID0gZ3JvdXAxLmdyb3VwczsKICAgICAgICBsaXN0R3JvdXAyLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwMikgewogICAgICAgICAgdmFyIGxpc3RHcm91cDMgPSBncm91cDIuZ3JvdXBzOwoKICAgICAgICAgIGlmIChsaXN0R3JvdXAzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICBsaXN0R3JvdXAyLnNwbGljZShsaXN0R3JvdXAyLmluZGV4T2YoZ3JvdXAyKSwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gbGlzdEdyb3VwMTsKICAgIH0sCiAgICBwYXRoczogZnVuY3Rpb24gcGF0aHMoYykgewogICAgICByZXR1cm4gYy4kcm91dGUucGF0aC5zcGxpdCgiLyIpLmZpbHRlcihmdW5jdGlvbiAocGF0aCkgewogICAgICAgIHJldHVybiBwYXRoOwogICAgICB9KTsKICAgIH0sCiAgICBjdXJyZW50UGF0aHM6IGZ1bmN0aW9uIGN1cnJlbnRQYXRocygpIHsKICAgICAgdmFyIGZ1bGxQYXRoID0gdGhpcy4kcm91dGUuZnVsbFBhdGg7CiAgICAgIHZhciBxdWVzdGlvbk1hcmtJbmRleCA9IGZ1bGxQYXRoLmluZGV4T2YoIj8iKTsKCiAgICAgIGlmIChxdWVzdGlvbk1hcmtJbmRleCAhPT0gLTEpIHsKICAgICAgICBmdWxsUGF0aCA9IGZ1bGxQYXRoLnN1YnN0cmluZygwLCBxdWVzdGlvbk1hcmtJbmRleCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmdWxsUGF0aC5zcGxpdCgvWy9dLykuZmlsdGVyKGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgICAgcmV0dXJuIHBhdGg7CiAgICAgIH0pOwogICAgfSwKICAgIGN1cnJlbnRQYWdlS2V5OiBmdW5jdGlvbiBjdXJyZW50UGFnZUtleSgpIHsKICAgICAgdmFyIHBhdGhzID0gdGhpcy5jdXJyZW50UGF0aHM7CiAgICAgIHJldHVybiBwYXRocy5sZW5ndGggPiAwID8gcGF0aHNbMF0gOiAiIjsKICAgIH0sCiAgICBjdXJyZW50Vmlld0tleTogZnVuY3Rpb24gY3VycmVudFZpZXdLZXkoKSB7CiAgICAgIHZhciBwYXRocyA9IHRoaXMuY3VycmVudFBhdGhzOwogICAgICByZXR1cm4gcGF0aHMubGVuZ3RoID4gMSA/IHBhdGhzWzFdIDogIiI7CiAgICB9LAogICAgLy8gYXBwIGxheW91dCBtb2RlCiAgICBBUFBfTEFZT1VUX01PREU6IGZ1bmN0aW9uIEFQUF9MQVlPVVRfTU9ERShjKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgTk9STUFMOiBBcHBMYXlvdXQuTGF5b3V0Lk5PUk1BTCwKICAgICAgICBGVUxMOiBBcHBMYXlvdXQuTGF5b3V0LkZVTEwKICAgICAgfTsKICAgIH0sCiAgICBhcHBMYXlvdXRDdXJyZW50UmVxdWVzdDogZnVuY3Rpb24gYXBwTGF5b3V0Q3VycmVudFJlcXVlc3QoYykgewogICAgICByZXR1cm4gYy5hcHBMYXlvdXQuZ2V0Q3VycmVudExheW91dCgpOwogICAgfSwKICAgIGFwcExheW91dE1vZGU6IGZ1bmN0aW9uIGFwcExheW91dE1vZGUoYykgewogICAgICByZXR1cm4gYy5hcHBMYXlvdXRDdXJyZW50UmVxdWVzdDsKICAgIH0sCiAgICAvLyBuYXZpZ2F0aW9uCiAgICBEUkFXRVJfVklTSUJJTElUWTogZnVuY3Rpb24gRFJBV0VSX1ZJU0lCSUxJVFkoYykgewogICAgICByZXR1cm4gewogICAgICAgIE5PTkU6IE5hdmlnYXRpb24uVmlzaWJpbGl0eS5OT05FLAogICAgICAgIEVYUEFOREVEOiBOYXZpZ2F0aW9uLlZpc2liaWxpdHkuRVhQQU5ERUQsCiAgICAgICAgQ09MTEFQU0VEOiBOYXZpZ2F0aW9uLlZpc2liaWxpdHkuQ09MTEFQU0VECiAgICAgIH07CiAgICB9LAogICAgRFJBV0VSX0xBWU9VVDogZnVuY3Rpb24gRFJBV0VSX0xBWU9VVChjKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgV0lERTogTmF2aWdhdGlvbi5MYXlvdXQuV0lERSwKICAgICAgICBUSElOOiBOYXZpZ2F0aW9uLkxheW91dC5USElOCiAgICAgIH07CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgY3VycmVudFBhdGhzOiBmdW5jdGlvbiBjdXJyZW50UGF0aHMoKSB7CiAgICAgIHRoaXMuY2xvc2VOYXZpZ2F0aW9uRHJhd2VyKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBhcHAgbGF5b3V0CiAgICBzZXRBcHBMYXlvdXQ6IGZ1bmN0aW9uIHNldEFwcExheW91dChsYXlvdXQpIHsKICAgICAgdGhpcy5hcHBMYXlvdXQuc2V0TGF5b3V0KGxheW91dCk7CiAgICB9LAogICAgLy8gbmF2aWdhdGlvbgogICAgb3Blbk5hdmlnYXRpb25EcmF3ZXI6IGZ1bmN0aW9uIG9wZW5OYXZpZ2F0aW9uRHJhd2VyKCkgewogICAgICB0aGlzLm5hdmlnYXRpb24uc2V0VmlzaWJpbGl0eSh0aGlzLkRSQVdFUl9WSVNJQklMSVRZLkVYUEFOREVEKTsKICAgIH0sCiAgICBjbG9zZU5hdmlnYXRpb25EcmF3ZXI6IGZ1bmN0aW9uIGNsb3NlTmF2aWdhdGlvbkRyYXdlcigpIHsKICAgICAgdGhpcy5uYXZpZ2F0aW9uLnNldFZpc2liaWxpdHkodGhpcy5EUkFXRVJfVklTSUJJTElUWS5DT0xMQVBTRUQpOwogICAgfSwKICAgIHNldE5hdmlnYXRpb25EcmF3ZXJWaXNpYmlsaXk6IGZ1bmN0aW9uIHNldE5hdmlnYXRpb25EcmF3ZXJWaXNpYmlsaXkodmlzaWJpbGl0eSkgewogICAgICB0aGlzLm5hdmlnYXRpb24uc2V0VmlzaWJpbGl0eSh2aXNpYmlsaXR5KTsKICAgIH0sCiAgICAvLyBnZXQgZnVsbCBpY29uIHVybCBvbiBzZXJ2ZXIgbG9jYWxob3N0L3Jlcy9pY29uLyR7bmFtZX0uc3ZnCiAgICBpY29uOiBmdW5jdGlvbiBpY29uKG5hbWUpIHsKICAgICAgY29uc29sZS50cmFjZSgpOwogICAgICBjb25zb2xlLndhcm4oInBsZWFzZSBjb25zaWRlciB1c2luZyBob3N0Lmljb24oKSBpbnN0ZWFkIik7CiAgICAgIHJldHVybiB0aGlzLmhvc3QucmVzKCJpY29uLyIuY29uY2F0KG5hbWUsICIuc3ZnIikpOwogICAgfSwKICAgIC8vIHNlbmQgYSBzbmFja2JhciBub3RpZmljYXRpb24KICAgIGZlZWRiYWNrOiBmdW5jdGlvbiBmZWVkYmFjayhwYXJhbSkgewogICAgICBpZiAodHlwZW9mIHBhcmFtID09PSAic3RyaW5nIikgewogICAgICAgIHBhcmFtID0gewogICAgICAgICAgdGV4dDogcGFyYW0KICAgICAgICB9OwogICAgICB9CgogICAgICB0aGlzLnNuYWNrYmFycy5wdXNoKG5ldyBOb3RpZmljYXRpb24odGhpcywgcGFyYW0pLnNob3coKSk7CiAgICAgIHJldHVybjsKICAgICAgaWYgKHRoaXMuYXBwKSB0aGlzLmFwcC5zaG93U25hY2tiYXIocGFyYW0pOwogICAgfSwKICAgIC8vIGV4dGVybmFsIGludGVyYWN0aW9uCiAgICBjb3B5VGV4dDogZnVuY3Rpb24gY29weVRleHQodGV4dCkgewogICAgICB2YXIgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpOwogICAgICB0ZXh0YXJlYS52YWx1ZSA9IHRleHQ7CiAgICAgIHRleHRhcmVhLnNldEF0dHJpYnV0ZSgicmVhZG9ubHkiLCAiIik7CiAgICAgIHRleHRhcmVhLnN0eWxlID0gewogICAgICAgIHBvc2l0aW9uOiAiYWJzb2x1dGUiLAogICAgICAgIGxlZnQ6ICItOTk5OXB4IgogICAgICB9OwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRleHRhcmVhKTsKICAgICAgdGV4dGFyZWEuc2VsZWN0KCk7CiAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCJjb3B5Iik7CiAgICAgIHRleHRhcmVhLnJlbW92ZSgpOwogICAgfSwKICAgIG9wZW5MaW5rOiBmdW5jdGlvbiBvcGVuTGluayhsaW5rKSB7CiAgICAgIHZhciB0YXJnZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICJfYmxhbmsiOwogICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgYS5zdHlsZSA9IHsKICAgICAgICBwb3NpdGlvbjogImFic29sdXRlIiwKICAgICAgICBvcGFjaXR5OiAiMCIsCiAgICAgICAgInBvaW50ZXItZXZlbnRzIjogIm5vbmUiCiAgICAgIH07CiAgICAgIGEuaHJlZiA9IGxpbms7CiAgICAgIGEudGFyZ2V0ID0gdGFyZ2V0OwogICAgICBhLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoImNsaWNrIiwgewogICAgICAgIHZpZXc6IHdpbmRvdywKICAgICAgICBidWJibGVzOiB0cnVlLAogICAgICAgIGNhbmNlbGFibGU6IGZhbHNlCiAgICAgIH0pKTsKICAgICAgYS5yZW1vdmUoKTsKICAgIH0sCiAgICBwdXNoRG93bmxvYWQ6IGZ1bmN0aW9uIHB1c2hEb3dubG9hZChmaWxlbmFtZSwgY29udGVudCkgewogICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgZWxlbWVudC5ocmVmID0gImRhdGE6dGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04LCIuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChjb250ZW50KSk7CiAgICAgIGVsZW1lbnQuZG93bmxvYWQgPSBmaWxlbmFtZTsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTsKICAgICAgZWxlbWVudC5jbGljaygpOwogICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW1lbnQpOwogICAgfSwKICAgIHByaW50OiBmdW5jdGlvbiBwcmludChlbGVtZW50KSB7CiAgICAgIC8vIGxldCBQSEUgPSByZXF1aXJlKCJwcmludC1odG1sLWVsZW1lbnQiKTsgLy8gaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvc2ltcGxlLXByaW50CiAgICAgIC8vIFBIRS5wcmludEVsZW1lbnQoZWxlbWVudCk7CiAgICAgIHZhciBlV2luZG93ID0gd2luZG93Lm9wZW4oIiIsICJQUklOVCIsICJoZWlnaHQ9NDAwLHdpZHRoPTYwMCIpOwogICAgICBlV2luZG93LmRvY3VtZW50LndyaXRlKCI8aHRtbD4iKTsKICAgICAgZVdpbmRvdy5kb2N1bWVudC53cml0ZSgiPGhlYWQ+Iik7CiAgICAgIGVXaW5kb3cuZG9jdW1lbnQud3JpdGUoIjx0aXRsZT4iLmNvbmNhdChkb2N1bWVudC50aXRsZSwgIjwvdGl0bGU+IikpOwogICAgICBlV2luZG93LmRvY3VtZW50LndyaXRlKCI8L2hlYWQ+Iik7CiAgICAgIGVXaW5kb3cuZG9jdW1lbnQud3JpdGUoIjxib2R5PiIpOwogICAgICBlV2luZG93LmRvY3VtZW50LndyaXRlKGVsZW1lbnQuaW5uZXJIVE1MKTsKICAgICAgZVdpbmRvdy5kb2N1bWVudC53cml0ZSgiPC9ib2R5PiIpOyAvLyBjb25zb2xlLmxvZyhlbGVtZW50LmlubmVySFRNTCk7CiAgICAgIC8vIGZ1bmN0aW9uIGR1bXBDU1NUZXh0KGVsZW1lbnQpIHsKICAgICAgLy8gCWxldCBzdHIgPSAiIjsKICAgICAgLy8gCWxldCBvYmogPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpOwogICAgICAvLyAJZm9yIChsZXQgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHsKICAgICAgLy8gCQlzdHIgKz0gYCR7b2JqW2ldfToke29iai5nZXRQcm9wZXJ0eVZhbHVlKG9ialtpXSl9O2A7CiAgICAgIC8vIAl9CiAgICAgIC8vIAlyZXR1cm4gc3RyOwogICAgICAvLyB9CiAgICAgIC8vIGNvbnNvbGUubG9nKGR1bXBDU1NUZXh0KGVsZW1lbnQpKTsKCiAgICAgIGVXaW5kb3cuZG9jdW1lbnQud3JpdGUoIjwvaHRtbD4iKTsKICAgICAgZVdpbmRvdy5kb2N1bWVudC5jbG9zZSgpOyAvLyBuZWNlc3NhcnkgZm9yIElFID49IDEwCgogICAgICBlV2luZG93LmZvY3VzKCk7IC8vIG5lY2Vzc2FyeSBmb3IgSUUgPj0gMTAqLwoKICAgICAgZVdpbmRvdy5wcmludCgpOwogICAgICBlV2luZG93LmNsb3NlKCk7CiAgICB9LAogICAgLy8gcm91dGVzCiAgICBuZXh0Um91dGU6IGZ1bmN0aW9uIG5leHRSb3V0ZSgpIHsKICAgICAgdmFyIHBhcmFtID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgdGhpcy5zZXRSb3V0ZShwYXJhbSwgdHJ1ZSk7CiAgICB9LAogICAgcmVwbGFjZVJvdXRlOiBmdW5jdGlvbiByZXBsYWNlUm91dGUoKSB7CiAgICAgIHZhciBwYXJhbSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIHRoaXMuc2V0Um91dGUocGFyYW0sIGZhbHNlKTsKICAgIH0sCiAgICBzZXRSb3V0ZTogZnVuY3Rpb24gc2V0Um91dGUoKSB7CiAgICAgIHZhciBwYXJhbSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIHZhciBpc05leHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgICAgIHZhciBxdWVyeSA9IFUuY29uZmluZVJvdXRlUXVlcnkodGhpcy4kcm91dGUucXVlcnksIHBhcmFtLnF1ZXJ5KTsKICAgICAgaWYgKGlzTmV4dCkgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHF1ZXJ5OiBxdWVyeQogICAgICB9KTtlbHNlIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICBxdWVyeTogcXVlcnkKICAgICAgfSk7CiAgICB9LAogICAgLy8gd2luZG93CiAgICBpbnZhbGlkYXRlV2luZG93OiBmdW5jdGlvbiBpbnZhbGlkYXRlV2luZG93KCkgewogICAgICB0aGlzLndpbmRvdy5pbm5lcldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CiAgICAgIHRoaXMud2luZG93LmlubmVySGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0OwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuYXBwTGF5b3V0ID0gbmV3IEFwcExheW91dCh0aGlzKTsKICAgIHRoaXMubmF2aWdhdGlvbiA9IG5ldyBOYXZpZ2F0aW9uKHRoaXMpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHRoaXMuaW52YWxpZGF0ZVdpbmRvdyk7IC8vIHRvZG8gaW1wbGVtZW50IGluaGVyaXRhYmxlIG9uQmFjayBmdW5jdGlvbnMKICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXl1cCIsIChldmVudCkgPT4gewogICAgLy8gICAgY29uc29sZS5sb2coZXZlbnQpOwogICAgLy8gfSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbnZhbGlkYXRlV2luZG93KCk7CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihjcmVhdGVFbGVtZW50KSB7CiAgICByZXR1cm4gY3JlYXRlRWxlbWVudChBcHApOwogIH0KfSkuJG1vdW50KCIjYXBwIik7"},null]}