{"remainingRequest":"C:\\dev\\freshnet-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-vue\\src\\stores\\store.customer.js","dependencies":[{"path":"C:\\dev\\freshnet-vue\\src\\stores\\store.customer.js","mtime":1666954375023},{"path":"C:\\dev\\freshnet-vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOlxcZGV2XFxmcmVzaG5ldC12dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXHRvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6XFxkZXZcXGZyZXNobmV0LXZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOlxcZGV2XFxmcmVzaG5ldC12dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCBEYXRhTG9hZGVyIGZyb20gIi4vdG9vbHMvRGF0YUxvYWRlciI7CmltcG9ydCBDb2xsZWN0aW9uVXBkYXRlciBmcm9tICIuL3Rvb2xzL0NvbGxlY3Rpb25VcGRhdGVyIjsKaW1wb3J0IFByb2Nlc3NvciBmcm9tICIuL3Rvb2xzL1Byb2Nlc3Nvci5qcyI7CmltcG9ydCBWdWV4IGZyb20gInZ1ZXgiOwppbXBvcnQgQXBpSG9zdCBmcm9tICJAL2hvc3QvQXBpSG9zdC5qcyI7CmltcG9ydCBJdGVtQ3VzdG9tZXIgZnJvbSAiLi4vaXRlbXMvQ3VzdG9tZXIuanMiOwppbXBvcnQgRGV2aWNlU3RvcmUgZnJvbSAiLi9zdG9yZS5kZXZpY2UuanMiOwppbXBvcnQgVSBmcm9tICJAL1UiOwoKdmFyIGFwaVRoZW5Db250ZW50ID0gZnVuY3Rpb24gYXBpVGhlbkNvbnRlbnQoYXBpKSB7CiAgdmFyIGVycm9yID0gYXBpLmdldEVycm9yKCk7CiAgdmFyIGZyaWVuZGx5RXJyb3IgPSBhcGkuZ2V0RXJyb3JGcmllbmRseSgpOwogIGlmIChlcnJvcikgdGhyb3cgbmV3IEVycm9yKGVycm9yKTsKICBpZiAoZnJpZW5kbHlFcnJvcikgdGhyb3cgbmV3IEVycm9yKGZyaWVuZGx5RXJyb3IpOwogIHJldHVybiBhcGkuZ2V0Q29udGVudCgpOwp9OwoKdmFyIF9nZXRJdGVtT2ZJZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGNvbnRleHQpIHsKICAgIHZhciBpZCwKICAgICAgICBfYXJnczIgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZCA9IF9hcmdzMi5sZW5ndGggPiAxICYmIF9hcmdzMlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MyWzFdIDogIiI7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJnZXRJdGVtT2ZJZCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICAgICAgdmFyIGl0ZW1zLCBpdGVtOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIGlmIChVLmlzU3RyaW5nKGlkKSkgewogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbnVsbCk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlzcGF0Y2goImdldEl0ZW1zIik7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkID09PSBpZDsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgaXRlbSA/IGl0ZW0gOiBudWxsKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGdldEl0ZW1PZklkKF94KSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBfZ2V0SXRlbXNPZklkcyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChjb250ZXh0KSB7CiAgICB2YXIgaWRzLAogICAgICAgIF9hcmdzNCA9IGFyZ3VtZW50czsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlkcyA9IF9hcmdzNC5sZW5ndGggPiAxICYmIF9hcmdzNFsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3M0WzFdIDogW107CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJnZXRJdGVtc09mSWRzIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICAgICAgdmFyIGl0ZW1zLCByZXN1bHRzOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICBpZiAoVS5pc0FycmF5KGlkcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgW10pOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiZ2V0SXRlbXMiKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSBpZHMubWFwKGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSA/IGl0ZW0gOiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgcmVzdWx0cyk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTQpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGdldEl0ZW1zT2ZJZHMoX3gyKSB7CiAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7CgpleHBvcnQgZGVmYXVsdCB7CiAgaW5pdDogZnVuY3Rpb24gaW5pdChTdG9yZXMpIHsKICAgIHZhciBkZXZpY2VTdG9yZSA9IERldmljZVN0b3JlLmluaXQoU3RvcmVzKTsKICAgIHZhciBjdXN0b21lclN0b3JlID0gbmV3IFZ1ZXguU3RvcmUoewogICAgICBzdGF0ZTogewogICAgICAgIGxhc3RNb2RpZmllZDogMCwKICAgICAgICBkYXRhTG9hZGVyOiBuZXcgRGF0YUxvYWRlcih7CiAgICAgICAgICB0aW1lb3V0OiAxMDAwICogNjAgKiAxMAogICAgICAgIH0pIC8vIDEwbWluCiAgICAgICAgLnByb2Nlc3NvcihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gY3VzdG9tZXJTdG9yZS5zdGF0ZS5wcm9jZXNzb3I7CiAgICAgICAgfSkubG9hZERhdGEoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgICAgdmFyIGFwaSwgY29udGVudCwgaXRlbXM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS51cmwoImN1c3RvbWVyL2xpc3QiKS5zZW5kKCk7CgogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaVRoZW5Db250ZW50KGFwaSk7CiAgICAgICAgICAgICAgICAgIGl0ZW1zID0gVS5vcHRBcnJheShjb250ZW50KS5tYXAoZnVuY3Rpb24gKGNvbnRlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEl0ZW1DdXN0b21lcihTdG9yZXMpLmZyb21EYXRhKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIGl0ZW1zKTsKCiAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgICB9KSkpLnNldERhdGEoZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIGN1c3RvbWVyU3RvcmUuY29tbWl0KCJpdGVtcyIsIFUub3B0QXJyYXkoZGF0YSkpOwogICAgICAgICAgY3VzdG9tZXJTdG9yZS5jb21taXQoImxhc3RNb2RpZmllZCIsIERhdGUubm93KCkpOwogICAgICAgIH0pLmdldERhdGEoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGN1c3RvbWVyU3RvcmUuZ2V0dGVycy5pdGVtczsKICAgICAgICB9KSwKICAgICAgICBpdGVtczogW10sCiAgICAgICAgcHJvY2Vzc29yOiBuZXcgUHJvY2Vzc29yKCkKICAgICAgfSwKICAgICAgbXV0YXRpb25zOiB7CiAgICAgICAgbGFzdE1vZGlmaWVkOiBmdW5jdGlvbiBsYXN0TW9kaWZpZWQoc3RhdGUsIHRpbWUpIHsKICAgICAgICAgIHJldHVybiBzdGF0ZS5sYXN0TW9kaWZpZWQgPSB0aW1lOwogICAgICAgIH0sCiAgICAgICAgaXRlbXM6IGZ1bmN0aW9uIGl0ZW1zKHN0YXRlLCBfaXRlbXMpIHsKICAgICAgICAgIHJldHVybiBzdGF0ZS5pdGVtcyA9IF9pdGVtczsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdldHRlcnM6IHsKICAgICAgICBsYXN0TW9kaWZpZWQ6IGZ1bmN0aW9uIGxhc3RNb2RpZmllZChzdGF0ZSkgewogICAgICAgICAgcmV0dXJuIHN0YXRlLmxhc3RNb2RpZmllZDsKICAgICAgICB9LAogICAgICAgIGlzTG9hZGluZzogZnVuY3Rpb24gaXNMb2FkaW5nKHN0YXRlKSB7CiAgICAgICAgICByZXR1cm4gc3RhdGUucHJvY2Vzc29yLmlzTG9hZGluZygpIHx8IGRldmljZVN0b3JlLmdldHRlcnMuaXNMb2FkaW5nOwogICAgICAgIH0sCiAgICAgICAgaXRlbXM6IGZ1bmN0aW9uIGl0ZW1zKHN0YXRlKSB7CiAgICAgICAgICByZXR1cm4gc3RhdGUuaXRlbXM7CiAgICAgICAgfSwKICAgICAgICAvLyBsZWdhY3kKICAgICAgICBkZXZpY2VzOiBmdW5jdGlvbiBkZXZpY2VzKCkgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLmdldHRlcnMuaXRlbXM7CiAgICAgICAgfQogICAgICB9LAogICAgICBhY3Rpb25zOiB7CiAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaChjb250ZXh0KSB7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoInJlZnJlc2giLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3RhdGUuZGF0YUxvYWRlci5kb1RpbWVvdXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiZ2V0SXRlbXMiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgICAgICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGV2aWNlU3RvcmUuZGlzcGF0Y2goInJlZnJlc2giKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgZ2V0SXRlbXM6IGZ1bmN0aW9uIGdldEl0ZW1zKGNvbnRleHQpIHsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KCkgewogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJnZXRJdGVtcyIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUuZGF0YUxvYWRlci5kYXRhKCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICAgICAgICAgICAgICAgIH0pKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICBnZXRJdGVtT2ZJZDogZnVuY3Rpb24gZ2V0SXRlbU9mSWQoY29udGV4dCkgewogICAgICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgICAgIHZhciBpZDsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgaWQgPSBfYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50c1sxXSA6ICIiOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgX2dldEl0ZW1PZklkKGNvbnRleHQsIGlkKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTEwKTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgZ2V0SXRlbXNPZklkczogZnVuY3Rpb24gZ2V0SXRlbXNPZklkcyhjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50czIgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoKSB7CiAgICAgICAgICAgIHZhciBpZHM7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGlkcyA9IF9hcmd1bWVudHMyLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czJbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHMyWzFdIDogW107CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCBfZ2V0SXRlbXNPZklkcyhjb250ZXh0LCBpZHMpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMTEpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICBnZW5lcmF0ZUN1c3RvbWVyc0Fjcm9zczogZnVuY3Rpb24gZ2VuZXJhdGVDdXN0b21lcnNBY3Jvc3MoY29udGV4dCkgewogICAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKCkgewogICAgICAgICAgICB2YXIgY3VzdG9tZXJzLCBvcHRDdXN0b21lciwgc2VydmljZUdyb3Vwcywgb3JkZXJHcm91cHMsIF9pdGVyYXRvciwgX3N0ZXAsIF9vcHRDdXN0b21lciRzZXJ2aWNlcywgc2VydmljZUdyb3VwLCBfaXRlcmF0b3IyLCBfc3RlcDIsIF9vcHRDdXN0b21lciRvcmRlcnMsIG9yZGVyR3JvdXA7CgogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMi5wcmV2ID0gX2NvbnRleHQxMi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCJnZXRJdGVtcyIpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIGN1c3RvbWVycyA9IF9jb250ZXh0MTIuc2VudC5tYXAoZnVuY3Rpb24gKGN1c3RvbWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lciA9IG5ldyBJdGVtQ3VzdG9tZXIoU3RvcmVzKS5mcm9tRGF0YShjdXN0b21lci50b0RhdGEoKSk7CiAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lci5zZXJ2aWNlcyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXIub3JkZXJzID0gW107CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VzdG9tZXI7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIG9wdEN1c3RvbWVyID0gZnVuY3Rpb24gb3B0Q3VzdG9tZXIoZUN1c3RvbWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VzdG9tZXIgPSBjdXN0b21lcnMuZmluZChmdW5jdGlvbiAoY3VzdG9tZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVOYW1lID0gVS5vcHRTdHJpbmcoY3VzdG9tZXIubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlUGhvbmVOdW1iZXIgPSBjdXN0b21lci5waG9uZU51bWJlcjsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVQaG9uZU51bWJlclZhbHVlID0gZVBob25lTnVtYmVyID8gZVBob25lTnVtYmVyLnZhbHVlIDogIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gVS5vcHRTdHJpbmcoZUN1c3RvbWVyLm5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGhvbmVOdW1iZXIgPSBlQ3VzdG9tZXIucGhvbmVOdW1iZXI7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaG9uZU51bWJlclZhbHVlID0gcGhvbmVOdW1iZXIgPyBwaG9uZU51bWJlci52YWx1ZSA6ICIiOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZU5hbWUgPT09IG5hbWUgJiYgZVBob25lTnVtYmVyVmFsdWUgPT09IHBob25lTnVtYmVyVmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN1c3RvbWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyID0gbmV3IEl0ZW1DdXN0b21lcihTdG9yZXMpLmZyb21EYXRhKGVDdXN0b21lci50b0RhdGEoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyLnNlcnZpY2VzID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyLm9yZGVycyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lcnMucHVzaChjdXN0b21lcik7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1c3RvbWVyOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0b3Jlcy5zZXJ2aWNlLmRpc3BhdGNoKCJnZXRHcm91cHNCeUN1c3RvbWVyIik7CgogICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgc2VydmljZUdyb3VwcyA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA5OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBTdG9yZXMub3JkZXIuZGlzcGF0Y2goImdldEdyb3Vwc0J5Q3VzdG9tZXIiKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICBvcmRlckdyb3VwcyA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihzZXJ2aWNlR3JvdXBzKTsKCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VHcm91cCA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgICAgICAgICAgICAgKF9vcHRDdXN0b21lciRzZXJ2aWNlcyA9IG9wdEN1c3RvbWVyKHNlcnZpY2VHcm91cC5jdXN0b21lcikuc2VydmljZXMpLnB1c2guYXBwbHkoX29wdEN1c3RvbWVyJHNlcnZpY2VzLCBfdG9Db25zdW1hYmxlQXJyYXkoc2VydmljZUdyb3VwLml0ZW1zKSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9yZGVyR3JvdXBzKTsKCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyR3JvdXAgPSBfc3RlcDIudmFsdWU7CgogICAgICAgICAgICAgICAgICAgICAgICAoX29wdEN1c3RvbWVyJG9yZGVycyA9IG9wdEN1c3RvbWVyKG9yZGVyR3JvdXAuY3VzdG9tZXIpLm9yZGVycykucHVzaC5hcHBseShfb3B0Q3VzdG9tZXIkb3JkZXJzLCBfdG9Db25zdW1hYmxlQXJyYXkob3JkZXJHcm91cC5pdGVtcykpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuYWJydXB0KCJyZXR1cm4iLCBjdXN0b21lcnMpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMTIpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICBhZGRJdGVtOiBmdW5jdGlvbiBhZGRJdGVtKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzMyA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNCgpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNCQoX2NvbnRleHQxNCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czMubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzM1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czNbMV0gOiB7fTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuc3RhdGUucHJvY2Vzc29yLmFjcXVpcmUoImFkZEl0ZW0iLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSwgYXBpLCBjb250ZW50LCBpdGVtOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgSXRlbUN1c3RvbWVyKFN0b3JlcykuZnJvbURhdGEoYXJnKS50b0RhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGRhdGEuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5QT1NUKCkudXJsKCJjdXN0b21lci9hZGQiKS5ib2R5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBkYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNlbmQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0MTMuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGFwaVRoZW5Db250ZW50KGFwaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBuZXcgSXRlbUN1c3RvbWVyKFN0b3JlcykuZnJvbURhdGEoY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBuZXcgQ29sbGVjdGlvblVwZGF0ZXIoY29udGV4dCkub25JZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5nZXRJdGVtKGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIsIGl0ZW0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMyk7CiAgICAgICAgICAgICAgICAgICAgfSkpKSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTE0KTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlSXRlbU9mSWQ6IGZ1bmN0aW9uIHJlbW92ZUl0ZW1PZklkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzNCA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNigpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNiQoX2NvbnRleHQxNikgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTYucHJldiA9IF9jb250ZXh0MTYubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czQubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzNFsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czRbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICBfaWQ6IF9pZAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTYuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LnN0YXRlLnByb2Nlc3Nvci5hY3F1aXJlKCJyZW1vdmVJdGVtT2ZJZCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNSgpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBfaWQsIGFwaSwgY29udGVudCwgaXRlbSwgaXRlbXM7CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNSQoX2NvbnRleHQxNSkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNS5wcmV2ID0gX2NvbnRleHQxNS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZCA9IGFyZy5faWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5ERUxFVEUoKS51cmwoImN1c3RvbWVyL3JlbW92ZSIpLmJvZHkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZDogX2lkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDE1LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGlUaGVuQ29udGVudChhcGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbmV3IEl0ZW1DdXN0b21lcihTdG9yZXMpLmZyb21EYXRhKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IGNvbnRleHQuc3RhdGUuaXRlbXMuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHguaWQgIT09IGl0ZW0uaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgiaXRlbXMiLCBpdGVtcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJsYXN0TW9kaWZpZWQiLCBEYXRlLm5vdygpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJyZXR1cm4iLCBpdGVtKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTE1KTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMTYpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVOYW1lUGhvbmVOdW1iZXJPZklkOiBmdW5jdGlvbiB1cGRhdGVOYW1lUGhvbmVOdW1iZXJPZklkKGNvbnRleHQpIHsKICAgICAgICAgIHZhciBfYXJndW1lbnRzNSA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOCgpIHsKICAgICAgICAgICAgdmFyIGFyZzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOCQoX2NvbnRleHQxOCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTgucHJldiA9IF9jb250ZXh0MTgubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gX2FyZ3VtZW50czUubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzNVsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czVbMV0gOiB7CiAgICAgICAgICAgICAgICAgICAgICBfaWQ6IF9pZCwKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogcGhvbmVOdW1iZXIKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgidXBkYXRlTmFtZVBob25lTnVtYmVyT2ZJdGVtSWQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTcoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgX2lkLCBuYW1lLCBwaG9uZU51bWJlciwgYXBpLCBjb250ZW50LCBpdGVtOwoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTckKF9jb250ZXh0MTcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTcucHJldiA9IF9jb250ZXh0MTcubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaWQgPSBhcmcuX2lkLCBuYW1lID0gYXJnLm5hbWUsIHBob25lTnVtYmVyID0gYXJnLnBob25lTnVtYmVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBpSG9zdC5yZXF1ZXN0KCkuUFVUKCkudXJsKCJjdXN0b21lci91cGRhdGUvbmFtZVBob25lTnVtYmVyIikuYm9keSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkOiBfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lTnVtYmVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDE3LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGlUaGVuQ29udGVudChhcGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbmV3IEl0ZW1DdXN0b21lcihTdG9yZXMpLmZyb21EYXRhKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbmV3IENvbGxlY3Rpb25VcGRhdGVyKGNvbnRleHQpLm9uSWQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkub25VcGRhdGUoZnVuY3Rpb24gKGl0ZW0xLCBpdGVtMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0xLm5hbWUgPSBpdGVtMi5uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0xLnBob25lTnVtYmVyID0gaXRlbTIucGhvbmVOdW1iZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldEl0ZW0oaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LmFicnVwdCgicmV0dXJuIiwgaXRlbSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTE3KTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMTgpOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVEZXNjcmlwdGlvbk9mSWQ6IGZ1bmN0aW9uIHVwZGF0ZURlc2NyaXB0aW9uT2ZJZChjb250ZXh0KSB7CiAgICAgICAgICB2YXIgX2FyZ3VtZW50czYgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjAoKSB7CiAgICAgICAgICAgIHZhciBhcmc7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjAkKF9jb250ZXh0MjApIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIwLnByZXYgPSBfY29udGV4dDIwLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGFyZyA9IF9hcmd1bWVudHM2Lmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czZbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHM2WzFdIDogewogICAgICAgICAgICAgICAgICAgICAgX2lkOiBfaWQsCiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIwLmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5zdGF0ZS5wcm9jZXNzb3IuYWNxdWlyZSgidXBkYXRlRGVzY3JpcHRpb25PZklkIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE5KCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIF9pZCwgZGVzY3JpcHRpb24sIGFwaSwgY29udGVudCwgaXRlbTsKCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE5JChfY29udGV4dDE5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE5LnByZXYgPSBfY29udGV4dDE5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkID0gYXJnLl9pZCwgZGVzY3JpcHRpb24gPSBhcmcuZGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTkubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcGlIb3N0LnJlcXVlc3QoKS5QVVQoKS51cmwoImN1c3RvbWVyL3VwZGF0ZS9kZXNjcmlwdGlvbiIpLmJvZHkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZDogX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZW5kKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgPSBfY29udGV4dDE5LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcGlUaGVuQ29udGVudChhcGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbmV3IEl0ZW1DdXN0b21lcihTdG9yZXMpLmZyb21EYXRhKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbmV3IENvbGxlY3Rpb25VcGRhdGVyKGNvbnRleHQpLm9uSWQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkub25VcGRhdGUoZnVuY3Rpb24gKGl0ZW0xLCBpdGVtMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0xLmRlc2NyaXB0aW9uID0gaXRlbTIuZGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldEl0ZW0oaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdCgicmV0dXJuIiwgaXRlbSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTkuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTE5KTsKICAgICAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMjApOwogICAgICAgICAgfSkpKCk7CiAgICAgICAgfSwKICAgICAgICAvLyBsZWdhY3kKICAgICAgICBnZXREZXZpY2VzOiBmdW5jdGlvbiBnZXREZXZpY2VzKCkgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLmRpc3BhdGNoKCJnZXRJdGVtcyIpOwogICAgICAgIH0sCiAgICAgICAgZ2V0RGV2aWNlQnlJZDogZnVuY3Rpb24gZ2V0RGV2aWNlQnlJZChjb250ZXh0LCBpZCkgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLmRpc3BhdGNoKCJnZXRJdGVtT2ZJZCIsIGlkKTsKICAgICAgICB9LAogICAgICAgIGdldERldmljZXNCeUlkczogZnVuY3Rpb24gZ2V0RGV2aWNlc0J5SWRzKGNvbnRleHQsIGlkcykgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLmRpc3BhdGNoKCJnZXRJdGVtc09mSWRzIiwgaWRzKTsKICAgICAgICB9LAogICAgICAgIGFkZERldmljZTogZnVuY3Rpb24gYWRkRGV2aWNlKGNvbnRleHQsIGFyZykgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLmRpc3BhdGNoKCJhZGRJdGVtIiwgYXJnKTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZURldmljZTogZnVuY3Rpb24gcmVtb3ZlRGV2aWNlKGNvbnRleHQsIGFyZykgewogICAgICAgICAgcmV0dXJuIGRldmljZVN0b3JlLmRpc3BhdGNoKCJyZW1vdmVJdGVtT2ZJZCIsIGFyZyk7CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVEZXZpY2VTcGVjaWZpY2F0aW9uczogZnVuY3Rpb24gdXBkYXRlRGV2aWNlU3BlY2lmaWNhdGlvbnMoY29udGV4dCwgYXJnKSB7CiAgICAgICAgICByZXR1cm4gZGV2aWNlU3RvcmUuZGlzcGF0Y2goInVwZGF0ZVNwZWNpZmljYXRpb25zT2ZJZCIsIGFyZyk7CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVEZXZpY2VEZXNjcmlwdGlvbjogZnVuY3Rpb24gdXBkYXRlRGV2aWNlRGVzY3JpcHRpb24oY29udGV4dCwgYXJnKSB7CiAgICAgICAgICByZXR1cm4gZGV2aWNlU3RvcmUuZGlzcGF0Y2goInVwZGF0ZURlc2NyaXB0aW9uT2ZJZCIsIGFyZyk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBjdXN0b21lclN0b3JlOwogIH0KfTs="},{"version":3,"sources":["C:/dev/freshnet-vue/src/stores/store.customer.js"],"names":["DataLoader","CollectionUpdater","Processor","Vuex","ApiHost","ItemCustomer","DeviceStore","U","apiThenContent","api","error","getError","friendlyError","getErrorFriendly","Error","getContent","getItemOfId","context","id","state","processor","acquire","isString","dispatch","items","item","find","getItemsOfIds","ids","isArray","results","map","init","Stores","deviceStore","customerStore","Store","lastModified","dataLoader","timeout","loadData","request","url","send","content","optArray","fromData","setData","data","commit","Date","now","getData","getters","mutations","time","isLoading","devices","actions","refresh","doTimeout","getItems","generateCustomersAcross","customers","customer","toData","services","orders","optCustomer","eCustomer","eName","optString","name","ePhoneNumber","phoneNumber","ePhoneNumberValue","value","phoneNumberValue","push","service","serviceGroups","order","orderGroups","serviceGroup","orderGroup","addItem","arg","POST","body","onId","getItem","removeItemOfId","_id","DELETE","filter","x","updateNamePhoneNumberOfId","PUT","onUpdate","item1","item2","updateDescriptionOfId","description","getDevices","getDeviceById","getDevicesByIds","addDevice","removeDevice","updateDeviceSpecifications","updateDeviceDescription"],"mappings":"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","sourcesContent":["import DataLoader from \"./tools/DataLoader\";\r\nimport CollectionUpdater from \"./tools/CollectionUpdater\";\r\nimport Processor from \"./tools/Processor.js\";\r\n\r\nimport Vuex from \"vuex\";\r\nimport ApiHost from \"@/host/ApiHost.js\";\r\nimport ItemCustomer from \"../items/Customer.js\";\r\nimport DeviceStore from \"./store.device.js\";\r\nimport U from \"@/U\";\r\n\r\nconst apiThenContent = (api) => {\r\n\tlet error = api.getError();\r\n\tlet friendlyError = api.getErrorFriendly();\r\n\r\n\tif (error) throw new Error(error);\r\n\tif (friendlyError) throw new Error(friendlyError);\r\n\treturn api.getContent();\r\n};\r\nconst getItemOfId = async (context, id = \"\") => {\r\n\treturn context.state.processor.acquire(\"getItemOfId\", async () => {\r\n\t\tif (!U.isString(id)) return null;\r\n\t\tconst items = await context.dispatch(\"getItems\");\r\n\t\tconst item = items.find((item) => item.id === id);\r\n\t\treturn item ? item : null;\r\n\t});\r\n};\r\nconst getItemsOfIds = async (context, ids = []) => {\r\n\treturn context.state.processor.acquire(\"getItemsOfIds\", async () => {\r\n\t\tif (!U.isArray(ids)) return [];\r\n\r\n\t\tconst items = await context.dispatch(\"getItems\");\r\n\t\tconst results = ids.map((id) => {\r\n\t\t\tconst item = items.find((item) => item.id === id);\r\n\t\t\treturn item ? item : null;\r\n\t\t});\r\n\t\treturn results;\r\n\t});\r\n};\r\n\r\nexport default {\r\n\tinit(Stores) {\r\n\t\tconst deviceStore = DeviceStore.init(Stores);\r\n\r\n\t\tconst customerStore = new Vuex.Store({\r\n\t\t\tstate: {\r\n\t\t\t\tlastModified: 0,\r\n\t\t\t\tdataLoader: new DataLoader({ timeout: 1000 * 60 * 10 }) // 10min\r\n\t\t\t\t\t.processor(() => customerStore.state.processor)\r\n\t\t\t\t\t.loadData(async () => {\r\n\t\t\t\t\t\tconst api = await ApiHost.request().url(\"customer/list\").send();\r\n\t\t\t\t\t\tconst content = apiThenContent(api);\r\n\t\t\t\t\t\tconst items = U.optArray(content).map((content) => {\r\n\t\t\t\t\t\t\treturn new ItemCustomer(Stores).fromData(content);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn items;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.setData((data) => {\r\n\t\t\t\t\t\tcustomerStore.commit(\"items\", U.optArray(data));\r\n\t\t\t\t\t\tcustomerStore.commit(\"lastModified\", Date.now());\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.getData(() => customerStore.getters.items),\r\n\t\t\t\titems: [],\r\n\t\t\t\tprocessor: new Processor(),\r\n\t\t\t},\r\n\t\t\tmutations: {\r\n\t\t\t\tlastModified: (state, time) => (state.lastModified = time),\r\n\t\t\t\titems: (state, items) => (state.items = items),\r\n\t\t\t},\r\n\t\t\tgetters: {\r\n\t\t\t\tlastModified: (state) => state.lastModified,\r\n\t\t\t\tisLoading: (state) => {\r\n\t\t\t\t\treturn state.processor.isLoading() || deviceStore.getters.isLoading;\r\n\t\t\t\t},\r\n\t\t\t\titems: (state) => state.items,\r\n\r\n\t\t\t\t// legacy\r\n\r\n\t\t\t\tdevices: () => deviceStore.getters.items,\r\n\t\t\t},\r\n\t\t\tactions: {\r\n\t\t\t\tasync refresh(context) {\r\n\t\t\t\t\tawait context.state.processor.acquire(\"refresh\", async () => {\r\n\t\t\t\t\t\tcontext.state.dataLoader.doTimeout();\r\n\t\t\t\t\t\tawait context.dispatch(\"getItems\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait deviceStore.dispatch(\"refresh\");\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync getItems(context) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"getItems\", async () => {\r\n\t\t\t\t\t\treturn context.state.dataLoader.data();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tasync getItemOfId(context, id = \"\") {\r\n\t\t\t\t\treturn getItemOfId(context, id);\r\n\t\t\t\t},\r\n\t\t\t\tasync getItemsOfIds(context, ids = []) {\r\n\t\t\t\t\treturn getItemsOfIds(context, ids);\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync generateCustomersAcross(context) {\r\n\t\t\t\t\tconst customers = (await context.dispatch(\"getItems\")).map(\r\n\t\t\t\t\t\t(customer) => {\r\n\t\t\t\t\t\t\tcustomer = new ItemCustomer(Stores).fromData(customer.toData());\r\n\t\t\t\t\t\t\tcustomer.services = [];\r\n\t\t\t\t\t\t\tcustomer.orders = [];\r\n\r\n\t\t\t\t\t\t\treturn customer;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t\tconst optCustomer = (eCustomer) => {\r\n\t\t\t\t\t\tlet customer = customers.find((customer) => {\r\n\t\t\t\t\t\t\tconst eName = U.optString(customer.name);\r\n\t\t\t\t\t\t\tconst ePhoneNumber = customer.phoneNumber;\r\n\t\t\t\t\t\t\tconst ePhoneNumberValue = ePhoneNumber ? ePhoneNumber.value : \"\";\r\n\r\n\t\t\t\t\t\t\tconst name = U.optString(eCustomer.name);\r\n\t\t\t\t\t\t\tconst phoneNumber = eCustomer.phoneNumber;\r\n\t\t\t\t\t\t\tconst phoneNumberValue = phoneNumber ? phoneNumber.value : \"\";\r\n\r\n\t\t\t\t\t\t\treturn eName === name && ePhoneNumberValue === phoneNumberValue;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (!customer) {\r\n\t\t\t\t\t\t\tcustomer = new ItemCustomer(Stores).fromData(eCustomer.toData());\r\n\t\t\t\t\t\t\tcustomer.services = [];\r\n\t\t\t\t\t\t\tcustomer.orders = [];\r\n\t\t\t\t\t\t\tcustomers.push(customer);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn customer;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconst serviceGroups = await Stores.service.dispatch(\r\n\t\t\t\t\t\t\"getGroupsByCustomer\",\r\n\t\t\t\t\t);\r\n\t\t\t\t\tconst orderGroups = await Stores.order.dispatch(\r\n\t\t\t\t\t\t\"getGroupsByCustomer\",\r\n\t\t\t\t\t);\r\n\t\t\t\t\tfor (const serviceGroup of serviceGroups) {\r\n\t\t\t\t\t\toptCustomer(serviceGroup.customer).services.push(\r\n\t\t\t\t\t\t\t...serviceGroup.items,\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (const orderGroup of orderGroups) {\r\n\t\t\t\t\t\toptCustomer(orderGroup.customer).orders.push(...orderGroup.items);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn customers;\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync addItem(context, arg = {}) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"addItem\", async () => {\r\n\t\t\t\t\t\tlet data = new ItemCustomer(Stores).fromData(arg).toData();\r\n\t\t\t\t\t\tdelete data.id;\r\n\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t.POST()\r\n\t\t\t\t\t\t\t.url(\"customer/add\")\r\n\t\t\t\t\t\t\t.body({ content: data })\r\n\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\tlet content = apiThenContent(api);\r\n\t\t\t\t\t\tlet item = new ItemCustomer(Stores).fromData(content);\r\n\t\t\t\t\t\titem = new CollectionUpdater(context)\r\n\t\t\t\t\t\t\t.onId((item) => item.id)\r\n\t\t\t\t\t\t\t.getItem(item);\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tasync removeItemOfId(context, arg = { _id }) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\"removeItemOfId\", async () => {\r\n\t\t\t\t\t\tconst { _id } = arg;\r\n\t\t\t\t\t\tconst api = await ApiHost.request()\r\n\t\t\t\t\t\t\t.DELETE()\r\n\t\t\t\t\t\t\t.url(\"customer/remove\")\r\n\t\t\t\t\t\t\t.body({ content: { _id } })\r\n\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\tconst content = apiThenContent(api);\r\n\t\t\t\t\t\tconst item = new ItemCustomer(Stores).fromData(content);\r\n\t\t\t\t\t\tconst items = context.state.items.filter((x) => {\r\n\t\t\t\t\t\t\treturn x.id !== item.id;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tcontext.commit(\"items\", items);\r\n\t\t\t\t\t\tcontext.commit(\"lastModified\", Date.now());\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync updateNamePhoneNumberOfId(\r\n\t\t\t\t\tcontext,\r\n\t\t\t\t\targ = { _id, name, phoneNumber },\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\r\n\t\t\t\t\t\t\"updateNamePhoneNumberOfItemId\",\r\n\t\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\t\tlet { _id, name, phoneNumber } = arg;\r\n\t\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t\t.PUT()\r\n\t\t\t\t\t\t\t\t.url(\"customer/update/namePhoneNumber\")\r\n\t\t\t\t\t\t\t\t.body({ content: { _id, name, phoneNumber } })\r\n\t\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\t\tlet content = apiThenContent(api);\r\n\t\t\t\t\t\t\tlet item = new ItemCustomer(Stores).fromData(content);\r\n\t\t\t\t\t\t\titem = new CollectionUpdater(context)\r\n\t\t\t\t\t\t\t\t.onId((item) => item.id)\r\n\t\t\t\t\t\t\t\t.onUpdate((item1, item2) => {\r\n\t\t\t\t\t\t\t\t\titem1.name = item2.name;\r\n\t\t\t\t\t\t\t\t\titem1.phoneNumber = item2.phoneNumber;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.getItem(item);\r\n\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tasync updateDescriptionOfId(context, arg = { _id, description }) {\r\n\t\t\t\t\treturn context.state.processor.acquire(\r\n\t\t\t\t\t\t\"updateDescriptionOfId\",\r\n\t\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\t\tlet { _id, description } = arg;\r\n\t\t\t\t\t\t\tlet api = await ApiHost.request()\r\n\t\t\t\t\t\t\t\t.PUT()\r\n\t\t\t\t\t\t\t\t.url(\"customer/update/description\")\r\n\t\t\t\t\t\t\t\t.body({ content: { _id, description } })\r\n\t\t\t\t\t\t\t\t.send();\r\n\t\t\t\t\t\t\tlet content = apiThenContent(api);\r\n\t\t\t\t\t\t\tlet item = new ItemCustomer(Stores).fromData(content);\r\n\t\t\t\t\t\t\titem = new CollectionUpdater(context)\r\n\t\t\t\t\t\t\t\t.onId((item) => item.id)\r\n\t\t\t\t\t\t\t\t.onUpdate((item1, item2) => {\r\n\t\t\t\t\t\t\t\t\titem1.description = item2.description;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.getItem(item);\r\n\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// legacy\r\n\r\n\t\t\t\tgetDevices: () => deviceStore.dispatch(\"getItems\"),\r\n\t\t\t\tgetDeviceById: (context, id) => deviceStore.dispatch(\"getItemOfId\", id),\r\n\t\t\t\tgetDevicesByIds: (context, ids) =>\r\n\t\t\t\t\tdeviceStore.dispatch(\"getItemsOfIds\", ids),\r\n\t\t\t\taddDevice: (context, arg) => deviceStore.dispatch(\"addItem\", arg),\r\n\t\t\t\tremoveDevice: (context, arg) =>\r\n\t\t\t\t\tdeviceStore.dispatch(\"removeItemOfId\", arg),\r\n\t\t\t\tupdateDeviceSpecifications: (context, arg) =>\r\n\t\t\t\t\tdeviceStore.dispatch(\"updateSpecificationsOfId\", arg),\r\n\t\t\t\tupdateDeviceDescription: (context, arg) =>\r\n\t\t\t\t\tdeviceStore.dispatch(\"updateDescriptionOfId\", arg),\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\treturn customerStore;\r\n\t},\r\n};\r\n"]}]}