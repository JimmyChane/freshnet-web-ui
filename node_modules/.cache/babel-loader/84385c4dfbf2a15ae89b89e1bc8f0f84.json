{"remainingRequest":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-v2\\vue\\src\\stores\\store.js","dependencies":[{"path":"C:\\dev\\freshnet-v2\\vue\\src\\stores\\store.js","mtime":1666951413822},{"path":"C:\\dev\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQgVnVleCBmcm9tICJ2dWV4IjsKaW1wb3J0IHNvY2tldElvIGZyb20gInNvY2tldC5pby1jbGllbnQiOwppbXBvcnQgQXBpSG9zdCBmcm9tICIuLi9ob3N0L0FwaUhvc3QuanMiOwppbXBvcnQgU29ja2V0RGF0YSBmcm9tICIuLi8uLi8uLi9leHByZXNzL2RhdGFfc3RydWN0dXJlcy9Tb2NrZXREYXRhLmpzIjsKVnVlLnVzZShWdWV4KTsKZXhwb3J0IGRlZmF1bHQgewogIGluaXQ6IGZ1bmN0aW9uIGluaXQoU3RvcmVzKSB7CiAgICB2YXIgc3RvcmUgPSBuZXcgVnVleC5TdG9yZSh7CiAgICAgIHN0YXRlOiB7CiAgICAgICAgc29ja2V0OiBudWxsIC8vIGxpc3RlbmVyczogW10sCgogICAgICB9LAogICAgICBtdXRhdGlvbnM6IHsKICAgICAgICBzb2NrZXQ6IGZ1bmN0aW9uIHNvY2tldChzdGF0ZSwgX3NvY2tldCkgewogICAgICAgICAgcmV0dXJuIHN0YXRlLnNvY2tldCA9IF9zb2NrZXQ7CiAgICAgICAgfQogICAgICB9LAogICAgICBnZXR0ZXJzOiB7CiAgICAgICAgaXNDb25uZWN0ZWQ6IGZ1bmN0aW9uIGlzQ29ubmVjdGVkKHN0YXRlKSB7CiAgICAgICAgICByZXR1cm4gc3RhdGUuc29ja2V0ICYmIHN0YXRlLnNvY2tldC5jb25uZWN0ZWQ7CiAgICAgICAgfQogICAgICB9LAogICAgICBhY3Rpb25zOiB7CiAgICAgICAgb3BlblNvY2tldDogZnVuY3Rpb24gb3BlblNvY2tldChjb250ZXh0KSB7CiAgICAgICAgICBpZiAoY29udGV4dC5nZXR0ZXJzLmlzQ29ubmVjdGVkKSByZXR1cm47CiAgICAgICAgICB2YXIgc29ja2V0ID0gc29ja2V0SW8oQXBpSG9zdC5vcmlnaW4sIHsKICAgICAgICAgICAgZXh0cmFIZWFkZXJzOiB7CiAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyVG9rZW4iKQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsgLy8gc29ja2V0Lm9uKCJjb25uZWN0X2Vycm9yIiwgKCkgPT4gY29uc29sZS5pbmZvKCJjb25uZWN0IGVycm9yIikpOwogICAgICAgICAgLy8gc29ja2V0Lm9uKCJjb25uZWN0IiwgKCkgPT4gY29uc29sZS5pbmZvKCJjb25uZWN0ZWQiKSk7CiAgICAgICAgICAvLyBzb2NrZXQub24oImRpc2Nvbm5lY3QiLCAocmVhc29uKSA9PiBjb25zb2xlLmluZm8oImRpc2Nvbm5lY3RlZCIpKTsKCiAgICAgICAgICBzb2NrZXQub24oImVtaXQiLCBmdW5jdGlvbiAoYm9keSkgewogICAgICAgICAgICB2YXIgX3JlZiA9IGJvZHkgPyBib2R5IDoge30sCiAgICAgICAgICAgICAgICBjb250ZW50ID0gX3JlZi5jb250ZW50LAogICAgICAgICAgICAgICAga2V5ID0gX3JlZi5rZXk7CgogICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBTb2NrZXREYXRhKGNvbnRlbnQsIGtleSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOyAvLyBmb3IgKGxldCBsaXN0ZW5lciBvZiBzdG9yZS5zdGF0ZS5saXN0ZW5lcnMpIHsKICAgICAgICAgICAgLy8gICAgaWYgKGRhdGEua2V5ID09PSBsaXN0ZW5lci5rZXkpIHsKICAgICAgICAgICAgLy8gICAgICAgbGlzdGVuZXIudGVsbChkYXRhLmNvbnRlbnQpOwogICAgICAgICAgICAvLyAgICAgICByZXR1cm47CiAgICAgICAgICAgIC8vICAgIH0KICAgICAgICAgICAgLy8gICAgaWYgKCFsaXN0ZW5lci5rZXkgJiYgIWxpc3RlbmVyLmtleSkgewogICAgICAgICAgICAvLyAgICAgICBsaXN0ZW5lci50ZWxsKGRhdGEuY29udGVudCk7CiAgICAgICAgICAgIC8vICAgICAgIHJldHVybjsKICAgICAgICAgICAgLy8gICAgfQogICAgICAgICAgICAvLyB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJzb2NrZXQiLCBzb2NrZXQpOwogICAgICAgIH0sCiAgICAgICAgY2xvc2VTb2NrZXQ6IGZ1bmN0aW9uIGNsb3NlU29ja2V0KGNvbnRleHQpIHsKICAgICAgICAgIGlmICghY29udGV4dC5nZXR0ZXJzLmlzQ29ubmVjdGVkKSByZXR1cm47CiAgICAgICAgICB2YXIgc29ja2V0ID0gY29udGV4dC5zdGF0ZS5zb2NrZXQ7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgic29ja2V0IiwgbnVsbCk7CiAgICAgICAgICBzb2NrZXQuY2xvc2UoKTsKICAgICAgICB9LAogICAgICAgIHJlc3RhcnRTb2NrZXQ6IGZ1bmN0aW9uIHJlc3RhcnRTb2NrZXQoY29udGV4dCkgewogICAgICAgICAgY29udGV4dC5kaXNwYXRjaCgiY2xvc2VTb2NrZXQiKTsKICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2goIm9wZW5Tb2NrZXQiKTsKICAgICAgICB9LAogICAgICAgIHRlc3Q6IGZ1bmN0aW9uIHRlc3QoY29udGV4dCkgewogICAgICAgICAgcmV0dXJuICJoaSI7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHN0b3JlLmRpc3BhdGNoKCJvcGVuU29ja2V0Iik7CiAgICByZXR1cm4gc3RvcmU7CiAgfQp9Ow=="},{"version":3,"sources":["C:/dev/freshnet-v2/vue/src/stores/store.js"],"names":["Vue","Vuex","socketIo","ApiHost","SocketData","use","init","Stores","store","Store","state","socket","mutations","getters","isConnected","connected","actions","openSocket","context","origin","extraHeaders","authorization","window","localStorage","getItem","on","body","content","key","data","console","log","commit","closeSocket","close","restartSocket","dispatch","test"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,UAAP,MAAuB,gDAAvB;AAEAJ,GAAG,CAACK,GAAJ,CAAQJ,IAAR;AAEA,eAAe;AACdK,EAAAA,IADc,gBACTC,MADS,EACD;AACZ,QAAMC,KAAK,GAAG,IAAIP,IAAI,CAACQ,KAAT,CAAe;AAC5BC,MAAAA,KAAK,EAAE;AACNC,QAAAA,MAAM,EAAE,IADF,CAEN;;AAFM,OADqB;AAK5BC,MAAAA,SAAS,EAAE;AACVD,QAAAA,MAAM,EAAE,gBAACD,KAAD,EAAQC,OAAR;AAAA,iBAAoBD,KAAK,CAACC,MAAN,GAAeA,OAAnC;AAAA;AADE,OALiB;AAQ5BE,MAAAA,OAAO,EAAE;AACRC,QAAAA,WAAW,EAAE,qBAACJ,KAAD;AAAA,iBAAWA,KAAK,CAACC,MAAN,IAAgBD,KAAK,CAACC,MAAN,CAAaI,SAAxC;AAAA;AADL,OARmB;AAW5BC,MAAAA,OAAO,EAAE;AACRC,QAAAA,UADQ,sBACGC,OADH,EACY;AACnB,cAAIA,OAAO,CAACL,OAAR,CAAgBC,WAApB,EAAiC;AAEjC,cAAIH,MAAM,GAAGT,QAAQ,CAACC,OAAO,CAACgB,MAAT,EAAiB;AACrCC,YAAAA,YAAY,EAAE;AACbC,cAAAA,aAAa,EAAEC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B;AADF;AADuB,WAAjB,CAArB,CAHmB,CAQnB;AACA;AACA;;AACAb,UAAAA,MAAM,CAACc,EAAP,CAAU,MAAV,EAAkB,UAACC,IAAD,EAAU;AAC3B,uBAAyBA,IAAI,GAAGA,IAAH,GAAU,EAAvC;AAAA,gBAAQC,OAAR,QAAQA,OAAR;AAAA,gBAAiBC,GAAjB,QAAiBA,GAAjB;;AACA,gBAAMC,IAAI,GAAG,IAAIzB,UAAJ,CAAeuB,OAAf,EAAwBC,GAAxB,CAAb;AAEAE,YAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAJ2B,CAM3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAhBD;AAkBAX,UAAAA,OAAO,CAACc,MAAR,CAAe,QAAf,EAAyBrB,MAAzB;AACA,SA/BO;AAgCRsB,QAAAA,WAhCQ,uBAgCIf,OAhCJ,EAgCa;AACpB,cAAI,CAACA,OAAO,CAACL,OAAR,CAAgBC,WAArB,EAAkC;AAElC,cAAIH,MAAM,GAAGO,OAAO,CAACR,KAAR,CAAcC,MAA3B;AACAO,UAAAA,OAAO,CAACc,MAAR,CAAe,QAAf,EAAyB,IAAzB;AACArB,UAAAA,MAAM,CAACuB,KAAP;AACA,SAtCO;AAuCRC,QAAAA,aAvCQ,yBAuCMjB,OAvCN,EAuCe;AACtBA,UAAAA,OAAO,CAACkB,QAAR,CAAiB,aAAjB;AACAlB,UAAAA,OAAO,CAACkB,QAAR,CAAiB,YAAjB;AACA,SA1CO;AA4CRC,QAAAA,IA5CQ,gBA4CHnB,OA5CG,EA4CM;AACb,iBAAO,IAAP;AACA;AA9CO;AAXmB,KAAf,CAAd;AA6DAV,IAAAA,KAAK,CAAC4B,QAAN,CAAe,YAAf;AAEA,WAAO5B,KAAP;AACA;AAlEa,CAAf","sourcesContent":["import Vue from \"vue\";\r\nimport Vuex from \"vuex\";\r\nimport socketIo from \"socket.io-client\";\r\nimport ApiHost from \"../host/ApiHost.js\";\r\nimport SocketData from \"../../../express/data_structures/SocketData.js\";\r\n\r\nVue.use(Vuex);\r\n\r\nexport default {\r\n\tinit(Stores) {\r\n\t\tconst store = new Vuex.Store({\r\n\t\t\tstate: {\r\n\t\t\t\tsocket: null,\r\n\t\t\t\t// listeners: [],\r\n\t\t\t},\r\n\t\t\tmutations: {\r\n\t\t\t\tsocket: (state, socket) => (state.socket = socket),\r\n\t\t\t},\r\n\t\t\tgetters: {\r\n\t\t\t\tisConnected: (state) => state.socket && state.socket.connected,\r\n\t\t\t},\r\n\t\t\tactions: {\r\n\t\t\t\topenSocket(context) {\r\n\t\t\t\t\tif (context.getters.isConnected) return;\r\n\r\n\t\t\t\t\tlet socket = socketIo(ApiHost.origin, {\r\n\t\t\t\t\t\textraHeaders: {\r\n\t\t\t\t\t\t\tauthorization: window.localStorage.getItem(\"userToken\"),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// socket.on(\"connect_error\", () => console.info(\"connect error\"));\r\n\t\t\t\t\t// socket.on(\"connect\", () => console.info(\"connected\"));\r\n\t\t\t\t\t// socket.on(\"disconnect\", (reason) => console.info(\"disconnected\"));\r\n\t\t\t\t\tsocket.on(\"emit\", (body) => {\r\n\t\t\t\t\t\tconst { content, key } = body ? body : {};\r\n\t\t\t\t\t\tconst data = new SocketData(content, key);\r\n\r\n\t\t\t\t\t\tconsole.log(data);\r\n\r\n\t\t\t\t\t\t// for (let listener of store.state.listeners) {\r\n\t\t\t\t\t\t//    if (data.key === listener.key) {\r\n\t\t\t\t\t\t//       listener.tell(data.content);\r\n\t\t\t\t\t\t//       return;\r\n\t\t\t\t\t\t//    }\r\n\t\t\t\t\t\t//    if (!listener.key && !listener.key) {\r\n\t\t\t\t\t\t//       listener.tell(data.content);\r\n\t\t\t\t\t\t//       return;\r\n\t\t\t\t\t\t//    }\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tcontext.commit(\"socket\", socket);\r\n\t\t\t\t},\r\n\t\t\t\tcloseSocket(context) {\r\n\t\t\t\t\tif (!context.getters.isConnected) return;\r\n\r\n\t\t\t\t\tlet socket = context.state.socket;\r\n\t\t\t\t\tcontext.commit(\"socket\", null);\r\n\t\t\t\t\tsocket.close();\r\n\t\t\t\t},\r\n\t\t\t\trestartSocket(context) {\r\n\t\t\t\t\tcontext.dispatch(\"closeSocket\");\r\n\t\t\t\t\tcontext.dispatch(\"openSocket\");\r\n\t\t\t\t},\r\n\r\n\t\t\t\ttest(context) {\r\n\t\t\t\t\treturn \"hi\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tstore.dispatch(\"openSocket\");\r\n\r\n\t\treturn store;\r\n\t},\r\n};\r\n"]}]}