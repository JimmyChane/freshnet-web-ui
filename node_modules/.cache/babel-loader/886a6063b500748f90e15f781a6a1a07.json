{"remainingRequest":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-v2\\express\\data_structures\\Service.js","dependencies":[{"path":"C:\\dev\\freshnet-v2\\express\\data_structures\\Service.js","mtime":1662650897383},{"path":"C:\\dev\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyID0gcmVxdWlyZSgiQzpcXGRldlxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGNyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiKS5kZWZhdWx0OwoKdmFyIF90eXBlb2YgPSByZXF1aXJlKCJDOlxcZGV2XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcdHlwZW9mLmpzIikuZGVmYXVsdDsKCnZhciBfY2xhc3NDYWxsQ2hlY2sgPSByZXF1aXJlKCJDOlxcZGV2XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcY2xhc3NDYWxsQ2hlY2suanMiKS5kZWZhdWx0OwoKdmFyIF9jcmVhdGVDbGFzcyA9IHJlcXVpcmUoIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxjcmVhdGVDbGFzcy5qcyIpLmRlZmF1bHQ7Cgp2YXIgX2RlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgiQzpcXGRldlxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGRlZmluZVByb3BlcnR5LmpzIikuZGVmYXVsdDsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyIpOwoKdmFyIFRleHQgPSByZXF1aXJlKCIuL1RleHQuanMiKTsKCnZhciBTZXJ2aWNlQ3VzdG9tZXIgPSByZXF1aXJlKCIuL1NlcnZpY2VDdXN0b21lci5qcyIpOwoKdmFyIFNlcnZpY2VFdmVudCA9IHJlcXVpcmUoIi4vU2VydmljZUV2ZW50LmpzIik7Cgp2YXIgU2VydmljZUJlbG9uZ2luZyA9IHJlcXVpcmUoIi4vU2VydmljZUJlbG9uZ2luZy5qcyIpOwoKdmFyIFNlcnZpY2VJbWFnZUZpbGUgPSByZXF1aXJlKCIuL1NlcnZpY2VJbWFnZUZpbGUuanMiKTsKCnZhciBTZXJ2aWNlTm90aWNlID0gcmVxdWlyZSgiLi9TZXJ2aWNlTm90aWNlLmpzIik7Cgp2YXIgU2VydmljZUxhYmVsID0gcmVxdWlyZSgiLi9TZXJ2aWNlTGFiZWwuanMiKTsKCnZhciBQaG9uZU51bWJlciA9IHJlcXVpcmUoIi4vUGhvbmVOdW1iZXIuanMiKTsKCnZhciBTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAidXNlIHN0cmljdCI7CgogIGZ1bmN0aW9uIFNlcnZpY2UoKSB7CiAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogbnVsbDsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VydmljZSk7CgogICAgdGhpcy5faWQgPSBUZXh0LnRyaW0oZGF0YS5faWQsIGRhdGEuX2lkKTsKICAgIHRoaXMudGltZSA9IGRhdGEudGltZTsKICAgIHRoaXMudXNlcm5hbWUgPSBUZXh0LnRyaW0oZGF0YS51c2VybmFtZSwgIiIpLnJlcGxhY2UoIiAiLCAiIik7CiAgICB0aGlzLm5hbWVPZlVzZXIgPSBUZXh0LnRyaW0oZGF0YS5uYW1lT2ZVc2VyLCAiIik7CiAgICB0aGlzLnN0YXRlID0gVGV4dC50cmltKGRhdGEuc3RhdGUsIFNlcnZpY2UuU3RhdGUuUGVuZGluZykucmVwbGFjZSgiICIsICIiKTsKICAgIHRoaXMuY3VzdG9tZXIgPSBfdHlwZW9mKGRhdGEuY3VzdG9tZXIpID09PSAib2JqZWN0IiA/IFNlcnZpY2VDdXN0b21lci50cmltKGRhdGEuY3VzdG9tZXIpIDogdW5kZWZpbmVkOwogICAgdGhpcy5kZXNjcmlwdGlvbiA9IFRleHQudHJpbShkYXRhLmRlc2NyaXB0aW9uLCAiIik7CiAgICB0aGlzLmJlbG9uZ2luZ3MgPSAoQXJyYXkuaXNBcnJheShkYXRhLmJlbG9uZ2luZ3MpID8gZGF0YS5iZWxvbmdpbmdzIDogW10pLm1hcChmdW5jdGlvbiAoYmVsb25naW5nKSB7CiAgICAgIHJldHVybiBTZXJ2aWNlQmVsb25naW5nLnRyaW0oYmVsb25naW5nKTsKICAgIH0pOwogICAgdGhpcy5ldmVudHMgPSAoQXJyYXkuaXNBcnJheShkYXRhLmV2ZW50cykgPyBkYXRhLmV2ZW50cyA6IFtdKS5tYXAoZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHJldHVybiBTZXJ2aWNlRXZlbnQudHJpbShldmVudCk7CiAgICB9KTsKICAgIHRoaXMuaW1hZ2VGaWxlcyA9IChBcnJheS5pc0FycmF5KGRhdGEuaW1hZ2VGaWxlcykgPyBkYXRhLmltYWdlRmlsZXMgOiBbXSkubWFwKGZ1bmN0aW9uIChpbWFnZUZpbGUpIHsKICAgICAgcmV0dXJuIFNlcnZpY2VJbWFnZUZpbGUudHJpbShpbWFnZUZpbGUpOwogICAgfSk7IC8vIHBhcnNpbmcgbm90aWNlCgogICAgdGhpcy5ub3RpY2UgPSBTZXJ2aWNlTm90aWNlLnRyaW0oX3R5cGVvZihkYXRhLm5vdGljZSkgPT09ICJvYmplY3QiICYmIGRhdGEubm90aWNlID8gZGF0YS5ub3RpY2UgOiB7CiAgICAgIGlzVXJnZW50OiBmYWxzZSwKICAgICAgaXNXYXJyYW50eTogZmFsc2UKICAgIH0pOyAvLyBwYXJzaW5nIGxhYmVscwoKICAgIHRoaXMubGFiZWxzID0gKEFycmF5LmlzQXJyYXkoZGF0YS5sYWJlbHMpID8gZGF0YS5sYWJlbHMgOiBbXSkubWFwKGZ1bmN0aW9uIChsYWJlbCkgewogICAgICByZXR1cm4gbmV3IFNlcnZpY2VMYWJlbChsYWJlbCk7CiAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGxhYmVsKSB7CiAgICAgIHJldHVybiBsYWJlbC50aXRsZSAhPT0gIiAiIHx8IGxhYmVsLnRpdGxlICE9PSAiIjsKICAgIH0pOyAvLyByZWZhY3RvcmluZyBub3RpY2UgdG8gbGFiZWxzCgogICAgdmFyIGV4aXN0aW5nTGFiZWxVcmdlbnQgPSB0aGlzLmxhYmVscy5maW5kKGZ1bmN0aW9uIChsYWJlbCkgewogICAgICByZXR1cm4gbGFiZWwudGl0bGUgPT09IFNlcnZpY2VMYWJlbC5EZWZhdWx0cy5VcmdlbnQudGl0bGU7CiAgICB9KTsKICAgIHZhciBleGlzdGluZ0xhYmVsV2FycmFudHkgPSB0aGlzLmxhYmVscy5maW5kKGZ1bmN0aW9uIChsYWJlbCkgewogICAgICByZXR1cm4gbGFiZWwudGl0bGUgPT09IFNlcnZpY2VMYWJlbC5EZWZhdWx0cy5XYXJyYW50eS50aXRsZTsKICAgIH0pOwogICAgaWYgKHRoaXMubm90aWNlLmlzVXJnZW50ICYmICFleGlzdGluZ0xhYmVsVXJnZW50KSB0aGlzLmxhYmVscy5wdXNoKFNlcnZpY2VMYWJlbC5EZWZhdWx0cy5VcmdlbnQpOwogICAgaWYgKHRoaXMubm90aWNlLmlzV2FycmFudHkgJiYgIWV4aXN0aW5nTGFiZWxXYXJyYW50eSkgdGhpcy5sYWJlbHMucHVzaChTZXJ2aWNlTGFiZWwuRGVmYXVsdHMuV2FycmFudHkpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFNlcnZpY2UsIG51bGwsIFt7CiAgICBrZXk6ICJzZWFyY2giLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChpdGVtLCBzZWFyY2hlcykgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBkZXNjcmlwdGlvbjogVGV4dC5wYXJzZShpdGVtLmRlc2NyaXB0aW9uKSwKICAgICAgICBjdXN0b21lck5hbWU6IF90eXBlb2YoaXRlbS5jdXN0b21lcikgPT09ICJvYmplY3QiID8gVGV4dC5wYXJzZShpdGVtLmN1c3RvbWVyLm5hbWUpIDogIiIsCiAgICAgICAgY3VzdG9tZXJOdW1iZXI6IF90eXBlb2YoaXRlbS5jdXN0b21lcikgPT09ICJvYmplY3QiID8gUGhvbmVOdW1iZXIucGFyc2VUb1N0cmluZyhpdGVtLmN1c3RvbWVyLnBob25lTnVtYmVyKSA6ICIiLAogICAgICAgIHRpbWVTdHJpbmc6IChpdGVtLnRpbWVzdGFtcCA/IGl0ZW0udGltZXN0YW1wIDogIiIpLnRvU3RyaW5nKCksCiAgICAgICAgdXJnZW50OiBpdGVtLmlzVXJnZW50KCkgPyAidXJnZW50IiA6ICIiLAogICAgICAgIHdhcnJhbnR5OiBpdGVtLmlzV2FycmFudHkoKSA/ICJ3YXJyYW50eSIgOiAiIgogICAgICB9OwogICAgICB2YXIgc3RhdGVLZXkgPSBPYmplY3Qua2V5cyhTZXJ2aWNlLlN0YXRlKS5maW5kKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgICAgIHJldHVybiBzdGF0ZSA9PT0gaXRlbS5zdGF0ZTsKICAgICAgfSk7CiAgICAgIHZhciBjb250ZXh0cyA9IFtkYXRhLmRlc2NyaXB0aW9uLCBkYXRhLmN1c3RvbWVyTmFtZSwgZGF0YS5jdXN0b21lck51bWJlciwgZGF0YS50aW1lU3RyaW5nLCB0eXBlb2Ygc3RhdGVLZXkgPT09ICJzdHJpbmciID8gU2VydmljZS5TdGF0ZVtzdGF0ZUtleV0gOiAiIiwgZGF0YS51cmdlbnQsIGRhdGEud2FycmFudHldOwogICAgICB2YXIgcmVzdWx0ID0gewogICAgICAgIGl0ZW06IGl0ZW0sCiAgICAgICAgbWF0Y2hDb3VudDogMAogICAgICB9OwoKICAgICAgZm9yICh2YXIgX2kgPSAwLCBfY29udGV4dHMgPSBjb250ZXh0czsgX2kgPCBfY29udGV4dHMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgdmFyIGNvbnRleHQgPSBfY29udGV4dHNbX2ldOwoKICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoc2VhcmNoZXMpLAogICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBzZWFyY2ggPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICAgIGlmIChjb250ZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoKSkgewogICAgICAgICAgICAgIHJlc3VsdC5tYXRjaENvdW50ICs9IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogInRyaW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRyaW0oZGF0YSkgewogICAgICByZXR1cm4gbmV3IFNlcnZpY2UoZGF0YSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gU2VydmljZTsKfSgpOwoKX2RlZmluZVByb3BlcnR5KFNlcnZpY2UsICJTdGF0ZSIsIHsKICBQZW5kaW5nOiAicGVuZGluZyIsCiAgV2FpdGluZzogIndhaXRpbmciLAogIENvbXBsZXRlZDogImNvbXBsZXRlZCIsCiAgUmVqZWN0ZWQ6ICJyZWplY3RlZCIKfSk7Cgptb2R1bGUuZXhwb3J0cyA9IFNlcnZpY2U7"},{"version":3,"sources":["C:/dev/freshnet-v2/express/data_structures/Service.js"],"names":["Text","require","ServiceCustomer","ServiceEvent","ServiceBelonging","ServiceImageFile","ServiceNotice","ServiceLabel","PhoneNumber","Service","data","_id","trim","time","username","replace","nameOfUser","state","State","Pending","customer","undefined","description","belongings","Array","isArray","map","belonging","events","event","imageFiles","imageFile","notice","isUrgent","isWarranty","labels","label","filter","title","existingLabelUrgent","find","Defaults","Urgent","existingLabelWarranty","Warranty","push","item","searches","parse","customerName","name","customerNumber","parseToString","phoneNumber","timeString","timestamp","toString","urgent","warranty","stateKey","Object","keys","contexts","result","matchCount","context","search","toLowerCase","includes","Waiting","Completed","Rejected","module","exports"],"mappings":"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","sourcesContent":["const Text = require(\"./Text.js\");\r\nconst ServiceCustomer = require(\"./ServiceCustomer.js\");\r\nconst ServiceEvent = require(\"./ServiceEvent.js\");\r\nconst ServiceBelonging = require(\"./ServiceBelonging.js\");\r\nconst ServiceImageFile = require(\"./ServiceImageFile.js\");\r\nconst ServiceNotice = require(\"./ServiceNotice.js\");\r\nconst ServiceLabel = require(\"./ServiceLabel.js\");\r\nconst PhoneNumber = require(\"./PhoneNumber.js\");\r\n\r\nclass Service {\r\n   static State = {\r\n      Pending: \"pending\",\r\n      Waiting: \"waiting\",\r\n      Completed: \"completed\",\r\n      Rejected: \"rejected\",\r\n   };\r\n\r\n   static search(item, searches) {\r\n      const data = {\r\n         description: Text.parse(item.description),\r\n         customerName:\r\n            typeof item.customer === \"object\" ? Text.parse(item.customer.name) : \"\",\r\n         customerNumber:\r\n            typeof item.customer === \"object\"\r\n               ? PhoneNumber.parseToString(item.customer.phoneNumber)\r\n               : \"\",\r\n         timeString: (item.timestamp ? item.timestamp : \"\").toString(),\r\n         urgent: item.isUrgent() ? \"urgent\" : \"\",\r\n         warranty: item.isWarranty() ? \"warranty\" : \"\",\r\n      };\r\n\r\n      const stateKey = Object.keys(Service.State).find((state) => state === item.state);\r\n\r\n      const contexts = [\r\n         data.description,\r\n         data.customerName,\r\n         data.customerNumber,\r\n         data.timeString,\r\n         typeof stateKey === \"string\" ? Service.State[stateKey] : \"\",\r\n         data.urgent,\r\n         data.warranty,\r\n      ];\r\n\r\n      const result = { item, matchCount: 0 };\r\n\r\n      for (let context of contexts) {\r\n         for (let search of searches) {\r\n            if (context.toLowerCase().includes(search)) {\r\n               result.matchCount += 1;\r\n            }\r\n         }\r\n      }\r\n\r\n      return result;\r\n   }\r\n   static trim(data) {\r\n      return new Service(data);\r\n   }\r\n\r\n   constructor(data = null) {\r\n      this._id = Text.trim(data._id, data._id);\r\n      this.time = data.time;\r\n      this.username = Text.trim(data.username, \"\").replace(\" \", \"\");\r\n      this.nameOfUser = Text.trim(data.nameOfUser, \"\");\r\n\r\n      this.state = Text.trim(data.state, Service.State.Pending).replace(\" \", \"\");\r\n\r\n      this.customer =\r\n         typeof data.customer === \"object\"\r\n            ? ServiceCustomer.trim(data.customer)\r\n            : undefined;\r\n\r\n      this.description = Text.trim(data.description, \"\");\r\n\r\n      this.belongings = (Array.isArray(data.belongings) ? data.belongings : []).map(\r\n         (belonging) => ServiceBelonging.trim(belonging)\r\n      );\r\n\r\n      this.events = (Array.isArray(data.events) ? data.events : []).map((event) =>\r\n         ServiceEvent.trim(event)\r\n      );\r\n\r\n      this.imageFiles = (Array.isArray(data.imageFiles) ? data.imageFiles : []).map(\r\n         (imageFile) => ServiceImageFile.trim(imageFile)\r\n      );\r\n\r\n      // parsing notice\r\n      this.notice = ServiceNotice.trim(\r\n         typeof data.notice === \"object\" && data.notice\r\n            ? data.notice\r\n            : { isUrgent: false, isWarranty: false }\r\n      );\r\n\r\n      // parsing labels\r\n      this.labels = (Array.isArray(data.labels) ? data.labels : [])\r\n         .map((label) => new ServiceLabel(label))\r\n         .filter((label) => label.title !== \" \" || label.title !== \"\");\r\n\r\n      // refactoring notice to labels\r\n      const existingLabelUrgent = this.labels.find(\r\n         (label) => label.title === ServiceLabel.Defaults.Urgent.title\r\n      );\r\n      const existingLabelWarranty = this.labels.find(\r\n         (label) => label.title === ServiceLabel.Defaults.Warranty.title\r\n      );\r\n      if (this.notice.isUrgent && !existingLabelUrgent)\r\n         this.labels.push(ServiceLabel.Defaults.Urgent);\r\n      if (this.notice.isWarranty && !existingLabelWarranty)\r\n         this.labels.push(ServiceLabel.Defaults.Warranty);\r\n   }\r\n}\r\n\r\nmodule.exports = Service;\r\n"]}]}