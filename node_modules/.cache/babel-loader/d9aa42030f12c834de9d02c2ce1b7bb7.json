{"remainingRequest":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\dev\\freshnet-v2\\vue\\src\\stores\\components\\CollectionUpdater.js","dependencies":[{"path":"C:\\dev\\freshnet-v2\\vue\\src\\stores\\components\\CollectionUpdater.js","mtime":1662650937467},{"path":"C:\\dev\\freshnet-v2\\vue\\babel.config.js","mtime":1662650914175},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9jbGFzc0NhbGxDaGVjayA9IHJlcXVpcmUoIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxjbGFzc0NhbGxDaGVjay5qcyIpLmRlZmF1bHQ7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gcmVxdWlyZSgiQzpcXGRldlxcZnJlc2huZXQtdjJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGNyZWF0ZUNsYXNzLmpzIikuZGVmYXVsdDsKCnZhciBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYyA9IHJlcXVpcmUoIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxjbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjLmpzIikuZGVmYXVsdDsKCnZhciBfY2xhc3NQcml2YXRlRmllbGRHZXQgPSByZXF1aXJlKCJDOlxcZGV2XFxmcmVzaG5ldC12MlxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcY2xhc3NQcml2YXRlRmllbGRHZXQuanMiKS5kZWZhdWx0OwoKdmFyIF9jbGFzc1ByaXZhdGVGaWVsZFNldCA9IHJlcXVpcmUoIkM6XFxkZXZcXGZyZXNobmV0LXYyXFx2dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxjbGFzc1ByaXZhdGVGaWVsZFNldC5qcyIpLmRlZmF1bHQ7Cgp2YXIgX2NvbnRleHQsIF9pdGVtSWRHZXR0ZXIsIF91cGRhdGVyOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy53ZWFrLW1hcC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIik7Cgptb2R1bGUuZXhwb3J0cyA9IChfY29udGV4dCA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha01hcCgpLCBfaXRlbUlkR2V0dGVyID0gLyojX19QVVJFX18qL25ldyBXZWFrTWFwKCksIF91cGRhdGVyID0gLyojX19QVVJFX18qL25ldyBXZWFrTWFwKCksIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgInVzZSBzdHJpY3QiOwoKICBmdW5jdGlvbiBDb2xsZWN0aW9uVXBkYXRlcihjb250ZXh0KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29sbGVjdGlvblVwZGF0ZXIpOwoKICAgIF9jbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjKHRoaXMsIF9jb250ZXh0LCB7CiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogdm9pZCAwCiAgICB9KTsKCiAgICBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYyh0aGlzLCBfaXRlbUlkR2V0dGVyLCB7CiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogdm9pZCAwCiAgICB9KTsKCiAgICBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYyh0aGlzLCBfdXBkYXRlciwgewogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IHZvaWQgMAogICAgfSk7CgogICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9jb250ZXh0LCBjb250ZXh0KTsKICB9CgogIF9jcmVhdGVDbGFzcyhDb2xsZWN0aW9uVXBkYXRlciwgW3sKICAgIGtleTogIm9uSWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uSWQoaXRlbUlkR2V0dGVyKSB7CiAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfaXRlbUlkR2V0dGVyLCBpdGVtSWRHZXR0ZXIpOwoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAib25VcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uVXBkYXRlKHVwZGF0ZXIpIHsKICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF91cGRhdGVyLCB1cGRhdGVyKTsKCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEl0ZW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW0oaXRlbU9jY3VyZWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBpdGVtcyA9IF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfY29udGV4dCkuZ2V0dGVycy5pdGVtczsKCiAgICAgIHZhciBleGlzdGluZ0l0ZW0gPSBpdGVtcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIF9jbGFzc1ByaXZhdGVGaWVsZEdldChfdGhpcywgX2l0ZW1JZEdldHRlcikuY2FsbChfdGhpcywgaXRlbSkgPT09IF9jbGFzc1ByaXZhdGVGaWVsZEdldChfdGhpcywgX2l0ZW1JZEdldHRlcikuY2FsbChfdGhpcywgaXRlbU9jY3VyZWQpOwogICAgICB9KTsKCiAgICAgIGlmIChleGlzdGluZ0l0ZW0pIHsKICAgICAgICBpZiAoX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF91cGRhdGVyKSkgewogICAgICAgICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF91cGRhdGVyKS5jYWxsKHRoaXMsIGV4aXN0aW5nSXRlbSwgaXRlbU9jY3VyZWQpOwoKICAgICAgICAgIHJldHVybiBleGlzdGluZ0l0ZW07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBleGlzdGluZ0luZGV4ID0gaXRlbXMuaW5kZXhPZihleGlzdGluZ0l0ZW0pOwogICAgICAgICAgaXRlbXNbZXhpc3RpbmdJbmRleF0gPSBpdGVtT2NjdXJlZDsKICAgICAgICAgIHJldHVybiBpdGVtT2NjdXJlZDsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaXRlbXMucHVzaChpdGVtT2NjdXJlZCk7CgogICAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfY29udGV4dCkuY29tbWl0KCJpdGVtcyIsIGl0ZW1zKTsKCiAgICAgICAgcmV0dXJuIGl0ZW1PY2N1cmVkOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0SXRlbUJ5SWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW1CeUlkKGlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGl0ZW1zID0gX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9jb250ZXh0KS5nZXR0ZXJzLml0ZW1zOwoKICAgICAgdmFyIGV4aXN0aW5nSXRlbSA9IGl0ZW1zLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KF90aGlzMiwgX2l0ZW1JZEdldHRlcikuY2FsbChfdGhpczIsIGl0ZW0pID09PSBpZDsKICAgICAgfSk7CgogICAgICBpZiAoZXhpc3RpbmdJdGVtKSB7CiAgICAgICAgaWYgKF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfdXBkYXRlcikpIHsKICAgICAgICAgIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfdXBkYXRlcikuY2FsbCh0aGlzLCBleGlzdGluZ0l0ZW0pOwoKICAgICAgICAgIHJldHVybiBleGlzdGluZ0l0ZW07CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9XSk7CgogIHJldHVybiBDb2xsZWN0aW9uVXBkYXRlcjsKfSgpKTs="},{"version":3,"sources":["C:/dev/freshnet-v2/vue/src/stores/components/CollectionUpdater.js"],"names":["module","exports","context","itemIdGetter","updater","itemOccured","items","getters","existingItem","find","item","existingIndex","indexOf","push","commit","id"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAAA,MAAM,CAACC,OAAP;AAAA;;AAMG,6BAAYC,OAAZ,EAAqB;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAClB,0CAAgBA,OAAhB;AACF;;AARJ;AAAA;AAAA,WAUG,cAAKC,YAAL,EAAmB;AAChB,iDAAqBA,YAArB;;AACA,aAAO,IAAP;AACF;AAbJ;AAAA;AAAA,WAcG,kBAASC,OAAT,EAAkB;AACf,4CAAgBA,OAAhB;;AACA,aAAO,IAAP;AACF;AAjBJ;AAAA;AAAA,WAmBG,iBAAQC,WAAR,EAAqB;AAAA;;AAClB,UAAMC,KAAK,GAAG,sCAAcC,OAAd,CAAsBD,KAApC;;AACA,UAAME,YAAY,GAAGF,KAAK,CAACG,IAAN,CAClB,UAACC,IAAD;AAAA,eAAU,sBAAA,KAAI,gBAAJ,MAAA,KAAI,EAAeA,IAAf,CAAJ,2BAA6B,KAA7B,sBAA6B,KAA7B,EAAgDL,WAAhD,CAAV;AAAA,OADkB,CAArB;;AAIA,UAAIG,YAAJ,EAAkB;AACf,kCAAI,IAAJ,aAAmB;AAChB,2DAAcA,YAAd,EAA4BH,WAA5B;;AACA,iBAAOG,YAAP;AACF,SAHD,MAGO;AACJ,cAAMG,aAAa,GAAGL,KAAK,CAACM,OAAN,CAAcJ,YAAd,CAAtB;AACAF,UAAAA,KAAK,CAACK,aAAD,CAAL,GAAuBN,WAAvB;AACA,iBAAOA,WAAP;AACF;AACH,OATD,MASO;AACJC,QAAAA,KAAK,CAACO,IAAN,CAAWR,WAAX;;AACA,8CAAcS,MAAd,CAAqB,OAArB,EAA8BR,KAA9B;;AACA,eAAOD,WAAP;AACF;AACH;AAvCJ;AAAA;AAAA,WAyCG,qBAAYU,EAAZ,EAAgB;AAAA;;AACb,UAAMT,KAAK,GAAG,sCAAcC,OAAd,CAAsBD,KAApC;;AACA,UAAME,YAAY,GAAGF,KAAK,CAACG,IAAN,CAClB,UAACC,IAAD;AAAA,eAAU,sBAAA,MAAI,gBAAJ,MAAA,MAAI,EAAeA,IAAf,CAAJ,KAA6BK,EAAvC;AAAA,OADkB,CAArB;;AAIA,UAAIP,YAAJ,EAAkB;AACf,kCAAI,IAAJ,aAAmB;AAChB,2DAAcA,YAAd;;AACA,iBAAOA,YAAP;AACF;AACH;;AACD,aAAO,IAAP;AACF;AAtDJ;;AAAA;AAAA","sourcesContent":["module.exports = class CollectionUpdater {\r\n   #context;\r\n\r\n   #itemIdGetter;\r\n   #updater;\r\n\r\n   constructor(context) {\r\n      this.#context = context;\r\n   }\r\n\r\n   onId(itemIdGetter) {\r\n      this.#itemIdGetter = itemIdGetter;\r\n      return this;\r\n   }\r\n   onUpdate(updater) {\r\n      this.#updater = updater;\r\n      return this;\r\n   }\r\n\r\n   getItem(itemOccured) {\r\n      const items = this.#context.getters.items;\r\n      const existingItem = items.find(\r\n         (item) => this.#itemIdGetter(item) === this.#itemIdGetter(itemOccured)\r\n      );\r\n\r\n      if (existingItem) {\r\n         if (this.#updater) {\r\n            this.#updater(existingItem, itemOccured);\r\n            return existingItem;\r\n         } else {\r\n            const existingIndex = items.indexOf(existingItem);\r\n            items[existingIndex] = itemOccured;\r\n            return itemOccured;\r\n         }\r\n      } else {\r\n         items.push(itemOccured);\r\n         this.#context.commit(\"items\", items);\r\n         return itemOccured;\r\n      }\r\n   }\r\n\r\n   getItemById(id) {\r\n      const items = this.#context.getters.items;\r\n      const existingItem = items.find(\r\n         (item) => this.#itemIdGetter(item) === id\r\n      );\r\n\r\n      if (existingItem) {\r\n         if (this.#updater) {\r\n            this.#updater(existingItem);\r\n            return existingItem;\r\n         }\r\n      }\r\n      return null;\r\n   }\r\n};\r\n"]}]}