{"remainingRequest":"C:\\dev\\freshnet-v2\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\dev\\freshnet-v2\\vue\\src\\pages\\service\\LayoutFindCustomer.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\dev\\freshnet-v2\\vue\\src\\pages\\service\\LayoutFindCustomer.vue","mtime":1666962922835},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1662650934771}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKCXByb3BzOiB7CgkJaW5wdXROYW1lOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogIiIgfSwKCQlpbnB1dFBob25lTnVtYmVyOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogIiIgfSwKCX0sCglkYXRhKCkgewoJCXJldHVybiB7IGN1c3RvbWVyVGVtcGxhdGVzOiBbXSwgY3VzdG9tZXJTdWdnZXN0aW9uczogW10gfTsKCX0sCgl3YXRjaDogewoJCWlucHV0TmFtZSgpIHsKCQkJdGhpcy5pbnB1dCgpOwoJCX0sCgkJaW5wdXRQaG9uZU51bWJlcigpIHsKCQkJdGhpcy5pbnB1dCgpOwoJCX0sCgl9LAoJbW91bnRlZCgpIHsKCQl0aGlzLmludmFsaWRhdGUoKTsKCX0sCgltZXRob2RzOiB7CgkJYXN5bmMgaW52YWxpZGF0ZSgpIHsKCQkJdGhpcy5jdXN0b21lclRlbXBsYXRlcyA9IFtdOwoJCQl0aGlzLmN1c3RvbWVyU3VnZ2VzdGlvbnMgPSBbXTsKCQkJY29uc3QgY3VzdG9tZXJzID0gYXdhaXQgdGhpcy5jdXN0b21lclN0b3JlLmRpc3BhdGNoKAoJCQkJImdlbmVyYXRlQ3VzdG9tZXJzQWNyb3NzIiwKCQkJKTsKCgkJCXRoaXMuY3VzdG9tZXJUZW1wbGF0ZXMgPSBjdXN0b21lcnM7CgkJCXRoaXMuaW5wdXQoKTsKCQl9LAoKCQlhc3luYyBpbnB1dCgpIHsKCQkJaWYgKHRoaXMuaW5wdXROYW1lLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmlucHV0UGhvbmVOdW1iZXIubGVuZ3RoID09PSAwKSB7CgkJCQl0aGlzLmN1c3RvbWVyU3VnZ2VzdGlvbnMgPSBbXTsKCQkJCXJldHVybjsKCQkJfQoKCQkJY29uc3QgbmFtZSA9IHRoaXMuaW5wdXROYW1lLnRvTG93ZXJDYXNlKCk7CgkJCWNvbnN0IHBob25lTnVtYmVyID0gdGhpcy5pbnB1dFBob25lTnVtYmVyOwoKCQkJY29uc3QgdGVtcGxhdGVzID0gdGhpcy5jdXN0b21lclRlbXBsYXRlcy5yZWR1Y2UoCgkJCQkodGVtcGxhdGVzLCB0ZW1wbGF0ZSkgPT4gewoJCQkJCWNvbnN0IGlzTmFtZUluY2x1ZGUgPSB0ZW1wbGF0ZS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobmFtZSk7CgkJCQkJY29uc3QgZVBob25lTnVtYmVyID0gdGhpcy5jdXN0b21lclBob25lTnVtYmVyU3RyKHRlbXBsYXRlKTsKCQkJCQljb25zdCBpc1Bob25lTnVtYmVySW5jbHVkZSA9IGVQaG9uZU51bWJlci5pbmNsdWRlcyhwaG9uZU51bWJlcik7CgoJCQkJCWlmIChpc05hbWVJbmNsdWRlICYmIGlzUGhvbmVOdW1iZXJJbmNsdWRlKSB0ZW1wbGF0ZXMucHVzaCh0ZW1wbGF0ZSk7CgkJCQkJcmV0dXJuIHRlbXBsYXRlczsKCQkJCX0sCgkJCQlbXSwKCQkJKTsKCgkJCWlmICh0ZW1wbGF0ZXMubGVuZ3RoID09PSAwKSB7CgkJCQl0aGlzLmN1c3RvbWVyU3VnZ2VzdGlvbnMgPSBbXTsKCQkJCXJldHVybjsKCQkJfQoJCQlpZiAodGVtcGxhdGVzLmxlbmd0aCA9PT0gMSkgewoJCQkJY29uc3QgdGVtcGxhdGUgPSB0ZW1wbGF0ZXNbMF07CgkJCQljb25zdCBlUGhvbmVOdW1iZXIgPSB0aGlzLmN1c3RvbWVyUGhvbmVOdW1iZXJTdHIodGVtcGxhdGUpOwoJCQkJaWYgKG5hbWUgPT09IHRlbXBsYXRlLm5hbWUgJiYgcGhvbmVOdW1iZXIgPT09IGVQaG9uZU51bWJlcikgewoJCQkJCXRoaXMuY3VzdG9tZXJTdWdnZXN0aW9ucyA9IHRlbXBsYXRlczsKCQkJCQlyZXR1cm47CgkJCQl9CgkJCX0KCgkJCXRoaXMuY3VzdG9tZXJTdWdnZXN0aW9ucyA9IHRlbXBsYXRlczsKCQl9LAoKCQljbGlja0l0ZW0oY3VzdG9tZXIpIHsKCQkJdGhpcy4kZW1pdCgiY2xpY2staXRlbSIsIGN1c3RvbWVyKTsKCQkJc2V0VGltZW91dCgoKSA9PiAodGhpcy5jdXN0b21lclN1Z2dlc3Rpb25zID0gW10pLCAyMDApOwoJCX0sCgkJY2xpY2tDbG9zZSgpIHsKCQkJdGhpcy5jdXN0b21lclN1Z2dlc3Rpb25zID0gW107CgkJCXRoaXMuJGVtaXQoImNsaWNrLWNsb3NlIik7CgkJfSwKCgkJY3VzdG9tZXJOYW1lKGN1c3RvbWVyKSB7CgkJCXJldHVybiBjdXN0b21lci5uYW1lOwoJCX0sCgkJY3VzdG9tZXJQaG9uZU51bWJlclN0cihjdXN0b21lcikgewoJCQljb25zdCB7IHBob25lTnVtYmVyIH0gPSBjdXN0b21lcjsKCQkJcmV0dXJuIHBob25lTnVtYmVyID8gcGhvbmVOdW1iZXIudG9TdHJpbmcoKSA6ICIiOwoJCX0sCgl9LAp9Owo="},{"version":3,"sources":["LayoutFindCustomer.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LayoutFindCustomer.vue","sourceRoot":"src/pages/service","sourcesContent":["<script>\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\tinputName: { type: String, default: \"\" },\r\n\t\t\tinputPhoneNumber: { type: String, default: \"\" },\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn { customerTemplates: [], customerSuggestions: [] };\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tinputName() {\r\n\t\t\t\tthis.input();\r\n\t\t\t},\r\n\t\t\tinputPhoneNumber() {\r\n\t\t\t\tthis.input();\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.invalidate();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync invalidate() {\r\n\t\t\t\tthis.customerTemplates = [];\r\n\t\t\t\tthis.customerSuggestions = [];\r\n\t\t\t\tconst customers = await this.customerStore.dispatch(\r\n\t\t\t\t\t\"generateCustomersAcross\",\r\n\t\t\t\t);\r\n\r\n\t\t\t\tthis.customerTemplates = customers;\r\n\t\t\t\tthis.input();\r\n\t\t\t},\r\n\r\n\t\t\tasync input() {\r\n\t\t\t\tif (this.inputName.length === 0 && this.inputPhoneNumber.length === 0) {\r\n\t\t\t\t\tthis.customerSuggestions = [];\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst name = this.inputName.toLowerCase();\r\n\t\t\t\tconst phoneNumber = this.inputPhoneNumber;\r\n\r\n\t\t\t\tconst templates = this.customerTemplates.reduce(\r\n\t\t\t\t\t(templates, template) => {\r\n\t\t\t\t\t\tconst isNameInclude = template.name.toLowerCase().includes(name);\r\n\t\t\t\t\t\tconst ePhoneNumber = this.customerPhoneNumberStr(template);\r\n\t\t\t\t\t\tconst isPhoneNumberInclude = ePhoneNumber.includes(phoneNumber);\r\n\r\n\t\t\t\t\t\tif (isNameInclude && isPhoneNumberInclude) templates.push(template);\r\n\t\t\t\t\t\treturn templates;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[],\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (templates.length === 0) {\r\n\t\t\t\t\tthis.customerSuggestions = [];\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (templates.length === 1) {\r\n\t\t\t\t\tconst template = templates[0];\r\n\t\t\t\t\tconst ePhoneNumber = this.customerPhoneNumberStr(template);\r\n\t\t\t\t\tif (name === template.name && phoneNumber === ePhoneNumber) {\r\n\t\t\t\t\t\tthis.customerSuggestions = templates;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.customerSuggestions = templates;\r\n\t\t\t},\r\n\r\n\t\t\tclickItem(customer) {\r\n\t\t\t\tthis.$emit(\"click-item\", customer);\r\n\t\t\t\tsetTimeout(() => (this.customerSuggestions = []), 200);\r\n\t\t\t},\r\n\t\t\tclickClose() {\r\n\t\t\t\tthis.customerSuggestions = [];\r\n\t\t\t\tthis.$emit(\"click-close\");\r\n\t\t\t},\r\n\r\n\t\t\tcustomerName(customer) {\r\n\t\t\t\treturn customer.name;\r\n\t\t\t},\r\n\t\t\tcustomerPhoneNumberStr(customer) {\r\n\t\t\t\tconst { phoneNumber } = customer;\r\n\t\t\t\treturn phoneNumber ? phoneNumber.toString() : \"\";\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<template>\r\n\t<div class=\"LayoutFindCustomer\" v-if=\"customerSuggestions.length\">\r\n\t\t<div class=\"LayoutFindCustomer-body\">\r\n\t\t\t<div class=\"LayoutFindCustomer-header\">\r\n\t\t\t\t<span class=\"LayoutFindCustomer-title\">Find Customers</span>\r\n\t\t\t\t<button class=\"LayoutFindCustomer-close\" @click=\"() => clickClose()\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tclass=\"LayoutFindCustomer-close-img\"\r\n\t\t\t\t\t\t:src=\"host.res('icon/close-000000.svg')\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"LayoutFindCustomer-list\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"LayoutFindCustomer-item\"\r\n\t\t\t\t\tv-for=\"customerSuggestion of customerSuggestions\"\r\n\t\t\t\t\t:key=\"`${customerSuggestion.name}${\r\n\t\t\t\t\t\tcustomerSuggestion.phoneNumber\r\n\t\t\t\t\t\t\t? customerSuggestion.phoneNumber.toString()\r\n\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t}`\"\r\n\t\t\t\t\t@click=\"() => clickItem(customerSuggestion)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<span class=\"LayoutFindCustomer-item-name\">{{\r\n\t\t\t\t\t\tcustomerSuggestion.name\r\n\t\t\t\t\t}}</span>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass=\"LayoutFindCustomer-item-dot\"\r\n\t\t\t\t\t\tv-if=\"\r\n\t\t\t\t\t\t\tcustomerSuggestion.name &&\r\n\t\t\t\t\t\t\tcustomerPhoneNumberStr(customerSuggestion)\r\n\t\t\t\t\t\t\"\r\n\t\t\t\t\t></div>\r\n\t\t\t\t\t<span class=\"LayoutFindCustomer-item-phoneNumber\">{{\r\n\t\t\t\t\t\tcustomerSuggestion.phoneNumber\r\n\t\t\t\t\t\t\t? customerSuggestion.phoneNumber.toString()\r\n\t\t\t\t\t\t\t: \"\"\r\n\t\t\t\t\t}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.LayoutFindCustomer {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 0.6rem;\r\n\t\tbox-shadow: 0.2rem 0.4rem 2rem hsla(0, 0%, 0%, 0.4);\r\n\t\toverflow: hidden;\r\n\r\n\t\t.LayoutFindCustomer-body {\r\n\t\t\twidth: 100%;\r\n\t\t\tmax-height: 20rem;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\toverflow-y: auto;\r\n\t\t\tposition: relative;\r\n\t\t\tpadding-bottom: 4rem;\r\n\t\t\t.LayoutFindCustomer-header {\r\n\t\t\t\tposition: sticky;\r\n\t\t\t\ttop: 0;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tbackground-color: white;\r\n\t\t\t\tpadding: 1rem;\r\n\t\t\t\tborder-bottom: 1px solid hsla(0, 0%, 0%, 0.1);\r\n\t\t\t\t.LayoutFindCustomer-title {\r\n\t\t\t\t\tfont-size: 1.4rem;\r\n\t\t\t\t\tfont-weight: 900;\r\n\t\t\t\t}\r\n\t\t\t\t.LayoutFindCustomer-close {\r\n\t\t\t\t\twidth: 2rem;\r\n\t\t\t\t\theight: 2rem;\r\n\t\t\t\t\tbackground: none;\r\n\t\t\t\t\tborder: none;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\tcursor: pointer;\r\n\r\n\t\t\t\t\t&:hover {\r\n\t\t\t\t\t\tbackground-color: hsla(0, 0%, 0%, 0.05);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.LayoutFindCustomer-close-img {\r\n\t\t\t\t\t\twidth: 1rem;\r\n\t\t\t\t\t\theight: 1rem;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.LayoutFindCustomer-list {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: 0.2rem;\r\n\t\t\t\tpadding: 1rem;\r\n\r\n\t\t\t\t.LayoutFindCustomer-item {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t\tflex-wrap: nowrap;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tgap: 0.6rem;\r\n\t\t\t\t\tpadding: 0.4rem;\r\n\r\n\t\t\t\t\tborder: none;\r\n\t\t\t\t\tborder: 1px solid hsla(0, 0%, 0%, 0.1);\r\n\t\t\t\t\tbackground: none;\r\n\t\t\t\t\ttransition: var(--animation-duration);\r\n\t\t\t\t\tfont-size: 1rem;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\tborder-radius: 0.2rem;\r\n\t\t\t\t\t&:hover {\r\n\t\t\t\t\t\tbackground-color: hsla(0, 0%, 0%, 0.05);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.LayoutFindCustomer-item-dot {\r\n\t\t\t\t\t\t--size: 4px;\r\n\t\t\t\t\t\twidth: var(--size);\r\n\t\t\t\t\t\theight: var(--size);\r\n\t\t\t\t\t\tmin-width: var(--size);\r\n\t\t\t\t\t\tmin-height: var(--size);\r\n\t\t\t\t\t\tmax-width: var(--size);\r\n\t\t\t\t\t\tmax-height: var(--size);\r\n\t\t\t\t\t\tbackground: hsla(0, 0%, 0%, 0.2);\r\n\t\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n"]}]}