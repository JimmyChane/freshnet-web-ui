{"remainingRequest":"C:\\dev\\freshnet-v2\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\dev\\freshnet-v2\\vue\\src\\pages\\manage\\PageManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\dev\\freshnet-v2\\vue\\src\\pages\\manage\\PageManage.vue","mtime":1664551315824},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662650915901},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\dev\\freshnet-v2\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1662650934771}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBQYWdlUHJvZmlsZSBmcm9tICJAL3BhZ2VzL3Byb2ZpbGUvUGFnZVByb2ZpbGUudnVlIjsKaW1wb3J0IFBhZ2VDdXN0b21lciBmcm9tICJAL3BhZ2VzL2N1c3RvbWVyL1BhZ2VDdXN0b21lci52dWUiOwppbXBvcnQgUGFnZVNlcnZpY2UgZnJvbSAiQC9wYWdlcy9zZXJ2aWNlL1BhZ2VTZXJ2aWNlLnZ1ZSI7CmltcG9ydCBQYWdlT3JkZXIgZnJvbSAiQC9wYWdlcy9vcmRlci9QYWdlT3JkZXIudnVlIjsKaW1wb3J0IFBhZ2VVc2VycyBmcm9tICJAL3BhZ2VzL3VzZXJzL1BhZ2VVc2Vycy52dWUiOwppbXBvcnQgUGFnZURhdGFiYXNlIGZyb20gIkAvcGFnZXMvZGF0YWJhc2UvUGFnZURhdGFiYXNlLnZ1ZSI7CmltcG9ydCBQYWdlU2V0dGluZyBmcm9tICJAL3BhZ2VzL3NldHRpbmcvUGFnZVNldHRpbmcudnVlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAga2V5OiAibWFuYWdlIiwKICAgbmFtZTogIk1hbmFnZSIsCiAgIHRpdGxlOiAiTWFuYWdlIiwKICAgaWNvbjogeyBsaWdodDogIm1hbmFnZS1GRkZGRkYiLCBkYXJrOiAibWFuYWdlLTJBNDg1OCIgfSwKCiAgIF9jaGlsZHJlbigpIHsKICAgICAgcmV0dXJuIFtQYWdlUHJvZmlsZV07CiAgIH0sCiAgIF9ncm91cHMoKSB7CiAgICAgIHJldHVybiBbCiAgICAgICAgIHsKICAgICAgICAgICAga2V5OiAicmVjb3JkIiwKICAgICAgICAgICAgdGl0bGU6ICJSZWNvcmQiLAogICAgICAgICAgICBjaGlsZHJlbjogW1BhZ2VDdXN0b21lciwgUGFnZVNlcnZpY2UsIFBhZ2VPcmRlcl0sCiAgICAgICAgIH0sCiAgICAgICAgIHsKICAgICAgICAgICAga2V5OiAic3lzdGVtIiwKICAgICAgICAgICAgdGl0bGU6ICJTeXN0ZW0iLAogICAgICAgICAgICBjaGlsZHJlbjogW1BhZ2VVc2VycywgUGFnZURhdGFiYXNlLCBQYWdlU2V0dGluZ10sCiAgICAgICAgIH0sCiAgICAgIF07CiAgIH0sCgogICB1c2VyUGVybWlzc2lvbnM6IFsiYWRtaW4iLCAic3RhZmYiXSwKCiAgIGNvbXB1dGVkOiB7CiAgICAgIHVzZXI6IChjKSA9PiBjLmxvZ2luU3RvcmUuZ2V0dGVycy51c2VyLAogICB9LAogICB3YXRjaDogewogICAgICB1c2VyKHVzZXJOb3csIHVzZXJXYXMpIHsKICAgICAgICAgaWYgKHVzZXJXYXMgJiYgIXVzZXJOb3cpIHsKICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFRvTG9naW4oKTsKICAgICAgICAgfQogICAgICB9LAogICB9LAogICBtZXRob2RzOiB7CiAgICAgIGNsaWNrTG9nb3V0KCkgewogICAgICAgICBpZiAodGhpcy51c2VyKQogICAgICAgICAgICB0aGlzLmxvZ2luU3RvcmUuZGlzcGF0Y2goImxvZ291dCIpLnRoZW4oKCkgPT4gdGhpcy5yZWRpcmVjdFRvTG9naW4oKSk7CiAgICAgIH0sCiAgICAgIHJlZGlyZWN0VG9Mb2dpbigpIHsKICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgICBwYXRoOiAiL2xvZ2luIiwKICAgICAgICAgICAgcXVlcnk6IHsgcmVkaXJlY3Q6IHRoaXMuJHJvdXRlci5jdXJyZW50Um91dGUuZnVsbFBhdGggfSwKICAgICAgICAgfSk7CiAgICAgIH0sCiAgIH0sCiAgIGFzeW5jIG1vdW50ZWQoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmxvZ2luU3RvcmUuZGlzcGF0Y2goImdldFVzZXIiKTsKICAgICAgICAgaWYgKCF1c2VyKSB0aGlzLnJlZGlyZWN0VG9Mb2dpbigpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICB0aGlzLnJlZGlyZWN0VG9Mb2dpbigpOwogICAgICB9CiAgIH0sCn07Cg=="},{"version":3,"sources":["PageManage.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PageManage.vue","sourceRoot":"src/pages/manage","sourcesContent":["<script>\r\n   import PageProfile from \"@/pages/profile/PageProfile.vue\";\r\n   import PageCustomer from \"@/pages/customer/PageCustomer.vue\";\r\n   import PageService from \"@/pages/service/PageService.vue\";\r\n   import PageOrder from \"@/pages/order/PageOrder.vue\";\r\n   import PageUsers from \"@/pages/users/PageUsers.vue\";\r\n   import PageDatabase from \"@/pages/database/PageDatabase.vue\";\r\n   import PageSetting from \"@/pages/setting/PageSetting.vue\";\r\n\r\n   export default {\r\n      key: \"manage\",\r\n      name: \"Manage\",\r\n      title: \"Manage\",\r\n      icon: { light: \"manage-FFFFFF\", dark: \"manage-2A4858\" },\r\n\r\n      _children() {\r\n         return [PageProfile];\r\n      },\r\n      _groups() {\r\n         return [\r\n            {\r\n               key: \"record\",\r\n               title: \"Record\",\r\n               children: [PageCustomer, PageService, PageOrder],\r\n            },\r\n            {\r\n               key: \"system\",\r\n               title: \"System\",\r\n               children: [PageUsers, PageDatabase, PageSetting],\r\n            },\r\n         ];\r\n      },\r\n\r\n      userPermissions: [\"admin\", \"staff\"],\r\n\r\n      computed: {\r\n         user: (c) => c.loginStore.getters.user,\r\n      },\r\n      watch: {\r\n         user(userNow, userWas) {\r\n            if (userWas && !userNow) {\r\n               this.redirectToLogin();\r\n            }\r\n         },\r\n      },\r\n      methods: {\r\n         clickLogout() {\r\n            if (this.user)\r\n               this.loginStore.dispatch(\"logout\").then(() => this.redirectToLogin());\r\n         },\r\n         redirectToLogin() {\r\n            this.$router.replace({\r\n               path: \"/login\",\r\n               query: { redirect: this.$router.currentRoute.fullPath },\r\n            });\r\n         },\r\n      },\r\n      async mounted() {\r\n         try {\r\n            const user = await this.loginStore.dispatch(\"getUser\");\r\n            if (!user) this.redirectToLogin();\r\n         } catch (error) {\r\n            this.redirectToLogin();\r\n         }\r\n      },\r\n   };\r\n</script>\r\n\r\n<template>\r\n   <div class=\"PageManage\">\r\n      <router-view\r\n         class=\"PageManage-view\"\r\n         v-if=\"user\"\r\n         @click-drawer-expand=\"$root.openNavigationDrawer()\"\r\n      />\r\n   </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n   .PageManage {\r\n      width: 100%;\r\n      height: 100%;\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: stretch;\r\n      justify-content: stretch;\r\n      overflow: hidden;\r\n\r\n      .PageManage-view {\r\n         width: 100%;\r\n         height: 100%;\r\n         flex-grow: 1;\r\n         display: flex;\r\n         flex-direction: column;\r\n         align-items: stretch;\r\n         justify-content: stretch;\r\n         z-index: 1;\r\n      }\r\n   }\r\n</style>\r\n"]}]}