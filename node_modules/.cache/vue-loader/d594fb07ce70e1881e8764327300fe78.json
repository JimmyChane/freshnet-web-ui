{"remainingRequest":"C:\\development\\freshnet-v2\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\development\\freshnet-v2\\vue\\src\\pages\\product\\ItemProduct.vue?vue&type=style&index=0&id=c3366f70&lang=scss&scoped=true&","dependencies":[{"path":"C:\\development\\freshnet-v2\\vue\\src\\pages\\product\\ItemProduct.vue","mtime":1663518638155},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\css-loader\\index.js","mtime":1662650920109},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1662650934772},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1662650932744},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662650916242},{"path":"C:\\development\\freshnet-v2\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1662650934771}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5JdGVtUHJvZHVjdCB7CiAgIC0tYXZhaWxhYmxlLW9wYWNpdHk6IDE7CgogICB3aWR0aDogMTAwJTsKICAgdHJhbnNpdGlvbjogdmFyKC0tYW5pbWF0aW9uLWR1cmF0aW9uKTsKICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgIGJvcmRlcjogbm9uZTsKICAgYm9yZGVyLXJhZGl1czogMC44cmVtOwogICBvdmVyZmxvdzogaGlkZGVuOwogICBnYXA6IDAuMnJlbTsKCiAgIGRpc3BsYXk6IGZsZXg7CiAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgIGZsZXgtd3JhcDogbm93cmFwOwogICBhbGlnbi1pdGVtczogY2VudGVyOwogICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7CgogICAuSXRlbVByb2R1Y3QtcHJldmlldyB7CiAgICAgIGFzcGVjdC1yYXRpbzogNC8zOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgb2JqZWN0LWZpdDogY29udGFpbjsKICAgICAgb3BhY2l0eTogdmFyKC0tYXZhaWxhYmxlLW9wYWNpdHkpOwogICAgICBib3JkZXItcmFkaXVzOiAwLjVyZW07CiAgICAgIGZsZXgtZ3JvdzogMDsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgfQogICAuSXRlbVByb2R1Y3QtcHJldmlld0VtcHR5IHsKICAgICAgYXNwZWN0LXJhdGlvOiA0LzM7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBib3JkZXItcmFkaXVzOiAwLjVyZW07CiAgICAgIGZsZXgtZ3JvdzogMDsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4zKTsKICAgICAgZm9udC1zaXplOiAwLjhyZW07CiAgICAgIGZvbnQtd2VpZ2h0OiA5MDA7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICB9CgogICAuSXRlbVByb2R1Y3QtY2FyZCB7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBtaW4taGVpZ2h0OiA2cmVtOwogICAgICBjb2xvcjogYmxhY2s7CiAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICBib3JkZXItcmFkaXVzOiAwLjVyZW07CiAgICAgIG9wYWNpdHk6IHZhcigtLWF2YWlsYWJsZS1vcGFjaXR5KTsKICAgICAgdHJhbnNpdGlvbjogdmFyKC0tYW5pbWF0aW9uLWR1cmF0aW9uKTsKICAgICAgZ2FwOiAwLjVyZW07CiAgICAgIHBhZGRpbmc6IDFyZW07CgogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBmbGV4LWdyb3c6IDE7CiAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKCiAgICAgICYgPiAqIHsKICAgICAgICAgd2lkdGg6IG1heC1jb250ZW50OwogICAgICAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsKICAgICAgfQoKICAgICAgLkl0ZW1Qcm9kdWN0LXRpdGxlIHsKICAgICAgICAgZmxleC1ncm93OiAxOwogICAgICAgICBmb250LXdlaWdodDogOTAwOwogICAgICAgICB0ZXh0LWFsaWduOiBzdGFydDsKCiAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OwogICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKCiAgICAgICAgIC5JdGVtUHJvZHVjdC10aXRsZS10ZXh0IHsKICAgICAgICAgICAgZm9udC1zaXplOiAxLjJyZW07CiAgICAgICAgIH0KICAgICAgICAgLkl0ZW1Qcm9kdWN0LXRpdGxlLXByaWNlIHsKICAgICAgICAgICAgZm9udC1zaXplOiAwLjhyZW07CiAgICAgICAgIH0KICAgICAgfQogICAgICAuSXRlbVByb2R1Y3Qtc3BlY3MgewogICAgICAgICBmbGV4LWdyb3c6IDA7CiAgICAgICAgIGdhcDogMC4yZW07CiAgICAgICAgICYgPiAqIHsKICAgICAgICAgICAgbWluLXdpZHRoOiBtYXgtY29udGVudDsKICAgICAgICAgICAgd2lkdGg6IG1heC1jb250ZW50OwogICAgICAgICAgICBwYWRkaW5nOiAwLjJyZW0gMC40cmVtOwogICAgICAgICAgICBjb2xvcjogYmxhY2s7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IGhzbGEoMCwgMCUsIDAlLCAwLjEpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjJlbTsKICAgICAgICAgICAgZm9udC1zaXplOiAwLjZyZW07CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA5MDA7CiAgICAgICAgIH0KICAgICAgfQogICB9Cn0KCi5JdGVtUHJvZHVjdC1ub1ByZXZpZXcgewogICBiYWNrZ3JvdW5kLWNvbG9yOiBoc2xhKDAsIDAlLCAxMDAlLCAwLjIpOwp9CgouSXRlbVByb2R1Y3QtaXNOb3RTZWxlY3RlZCB7CiAgIGN1cnNvcjogcG9pbnRlcjsKICAgJjpob3ZlciwKICAgJjpmb2N1cywKICAgJjpmb2N1cy13aXRoaW4gewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBoc2xhKDAsIDAlLCAxMDAlLCAwLjQpOwogICAgICAuSXRlbVByb2R1Y3QtY2FyZCB7CiAgICAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDA7CiAgICAgICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAwOwogICAgICB9CiAgIH0KfQouSXRlbVByb2R1Y3QtaXNTZWxlY3RlZCB7CiAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOwoKICAgLkl0ZW1Qcm9kdWN0LWNhcmQgewogICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwOwogICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMDsKICAgfQp9CgouSXRlbVByb2R1Y3QtaXNBdmFpbGFibGUgewogICAtLWF2YWlsYWJsZS1vcGFjaXR5OiAxOwp9Ci5JdGVtUHJvZHVjdC1pc1VuYXZhaWxhYmxlIHsKICAgLS1hdmFpbGFibGUtb3BhY2l0eTogMC4xOwp9Cg=="},{"version":3,"sources":["ItemProduct.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ItemProduct.vue","sourceRoot":"src/pages/product","sourcesContent":["<script>\r\n   import User from \"@/../../express/data_structures/User.js\";\r\n   import Setting from \"@/../../express/data_structures/Setting.js\";\r\n   import ProductPrice from \"@/items/ProductPrice.js\";\r\n\r\n   export default {\r\n      emits: [\"click\"],\r\n      props: {\r\n         item: { type: Object, default: () => null },\r\n         isSelected: { type: Boolean, default: false },\r\n      },\r\n      computed: {\r\n         user: (c) => c.loginStore.getters.user,\r\n         userType: (c) => (c.user ? c.user.type : User.Type.None),\r\n         isUserAdmin: (c) => c.userType === User.Type.Admin,\r\n         isUserStaff: (c) => c.userType === User.Type.Staff,\r\n         isEditable: (c) => c.isUserAdmin || c.isUserStaff,\r\n\r\n         product: (c) => c.item,\r\n\r\n         productImages: (c) => c.product.getImages(),\r\n         preview: (c) => (c.productImages.length ? c.productImages[0] : \"\"),\r\n\r\n         productTitle: (c) => (c.product ? c.product.getTitle() : \"\"),\r\n         productBrandId: (c) => (c.product ? c.product.getBrandId() : \"\"),\r\n         productBrand: (c) =>\r\n            c.brandStore.getters.items.find((brand) => {\r\n               return brand.getId() === c.productBrandId;\r\n            }),\r\n         brandTitle: (c) => (c.productBrand ? c.productBrand.getTitle() : \"\"),\r\n         fullTitle: (c) => {\r\n            let { productTitle, brandTitle } = c;\r\n            if (productTitle && brandTitle) return `${brandTitle} ${productTitle}`;\r\n            if (productTitle) return productTitle;\r\n            if (brandTitle) return brandTitle;\r\n            return \"\";\r\n         },\r\n\r\n         isAvailable: (c) => (c.product ? c.product.isStockAvailable() : false),\r\n\r\n         shouldShowPrice: (c) => {\r\n            let setting = c.settingStore.getters.items.find((setting) => {\r\n               return setting.key === Setting.Key.PublicShowPrice;\r\n            });\r\n            return setting ? setting.value : false;\r\n         },\r\n\r\n         productPrice: (c) => {\r\n            if (!c.isEditable && !c.shouldShowPrice) return null;\r\n            return c.product.getPrice();\r\n         },\r\n         productPriceNormal: (c) => {\r\n            return c.productPrice && c.productPrice.normal\r\n               ? c.productPrice.normal\r\n               : new ProductPrice();\r\n         },\r\n         productPricePromotion: (c) => {\r\n            return c.productPrice && c.productPrice.promotion\r\n               ? c.productPrice.promotion\r\n               : new ProductPrice();\r\n         },\r\n         price: (c) => {\r\n            if (!c.isEditable && !c.shouldShowPrice) return null;\r\n\r\n            let normal = c.productPriceNormal;\r\n            let promotion = c.productPricePromotion;\r\n\r\n            if (normal.getValue() > 0 && promotion.getValue() <= 0) return { to: normal };\r\n            if (normal.getValue() > 0 && promotion.getValue() > 0)\r\n               return { from: normal, to: promotion };\r\n            if (normal.getValue() <= 0 && promotion.getValue() > 0)\r\n               return { from: normal, to: promotion };\r\n            return null;\r\n         },\r\n\r\n         priceLabels: (c) => c.product.ui().stockLabels(),\r\n         specLabels: (c) => c.product.ui().specLabels(),\r\n      },\r\n      mounted() {\r\n         this.settingStore.dispatch(\"getItems\");\r\n      },\r\n   };\r\n</script>\r\n\r\n<template>\r\n   <div\r\n      :class=\"[\r\n         'ItemProduct',\r\n         `ItemProduct-${productImages.length ? 'hasImages' : 'noImages'}`,\r\n         `ItemProduct-${isSelected ? 'isSelected' : 'isNotSelected'}`,\r\n         `ItemProduct-${isAvailable ? 'isAvailable' : 'isUnavailable'}`,\r\n         `ItemProduct-${preview ? 'hasPreview' : 'noPreview'}`,\r\n      ]\"\r\n      :ref=\"product._id\"\r\n      @click=\"$emit('click', product)\"\r\n   >\r\n      <img\r\n         class=\"ItemProduct-preview\"\r\n         v-if=\"preview\"\r\n         :src=\"preview ? preview.url({ width: 200 }) : ''\"\r\n      />\r\n      <div class=\"ItemProduct-previewEmpty\" v-else>\r\n         <span>No Preview</span>\r\n      </div>\r\n\r\n      <div class=\"ItemProduct-card\">\r\n         <div class=\"ItemProduct-title\">\r\n            <span class=\"ItemProduct-title-text\">{{ fullTitle }}</span>\r\n            <span class=\"ItemProduct-title-price\" v-if=\"price\">{{ price.to }}</span>\r\n         </div>\r\n         <div class=\"ItemProduct-specs\" v-if=\"specLabels.length\">\r\n            <span v-for=\"label in specLabels\" :key=\"label.text\">{{ label.text }}</span>\r\n         </div>\r\n      </div>\r\n   </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n   .ItemProduct {\r\n      --available-opacity: 1;\r\n\r\n      width: 100%;\r\n      transition: var(--animation-duration);\r\n      text-decoration: none;\r\n      position: relative;\r\n      border: none;\r\n      border-radius: 0.8rem;\r\n      overflow: hidden;\r\n      gap: 0.2rem;\r\n\r\n      display: flex;\r\n      flex-direction: column;\r\n      flex-wrap: nowrap;\r\n      align-items: center;\r\n      justify-content: flex-start;\r\n\r\n      .ItemProduct-preview {\r\n         aspect-ratio: 4/3;\r\n         width: 100%;\r\n         object-fit: contain;\r\n         opacity: var(--available-opacity);\r\n         border-radius: 0.5rem;\r\n         flex-grow: 0;\r\n         overflow: hidden;\r\n      }\r\n      .ItemProduct-previewEmpty {\r\n         aspect-ratio: 4/3;\r\n         width: 100%;\r\n         border-radius: 0.5rem;\r\n         flex-grow: 0;\r\n         overflow: hidden;\r\n         color: rgba(0, 0, 0, 0.3);\r\n         font-size: 0.8rem;\r\n         font-weight: 900;\r\n         display: flex;\r\n         align-items: center;\r\n         justify-content: center;\r\n      }\r\n\r\n      .ItemProduct-card {\r\n         width: 100%;\r\n         min-height: 6rem;\r\n         color: black;\r\n         background: white;\r\n         border-radius: 0.5rem;\r\n         opacity: var(--available-opacity);\r\n         transition: var(--animation-duration);\r\n         gap: 0.5rem;\r\n         padding: 1rem;\r\n\r\n         display: flex;\r\n         flex-direction: column;\r\n         flex-grow: 1;\r\n         align-items: flex-start;\r\n         justify-content: center;\r\n\r\n         & > * {\r\n            width: max-content;\r\n            max-width: 100%;\r\n            display: flex;\r\n            flex-direction: row;\r\n            flex-wrap: wrap;\r\n         }\r\n\r\n         .ItemProduct-title {\r\n            flex-grow: 1;\r\n            font-weight: 900;\r\n            text-align: start;\r\n\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: flex-start;\r\n            justify-content: center;\r\n\r\n            .ItemProduct-title-text {\r\n               font-size: 1.2rem;\r\n            }\r\n            .ItemProduct-title-price {\r\n               font-size: 0.8rem;\r\n            }\r\n         }\r\n         .ItemProduct-specs {\r\n            flex-grow: 0;\r\n            gap: 0.2em;\r\n            & > * {\r\n               min-width: max-content;\r\n               width: max-content;\r\n               padding: 0.2rem 0.4rem;\r\n               color: black;\r\n               background: hsla(0, 0%, 0%, 0.1);\r\n               border-radius: 0.2em;\r\n               font-size: 0.6rem;\r\n               font-weight: 900;\r\n            }\r\n         }\r\n      }\r\n   }\r\n\r\n   .ItemProduct-noPreview {\r\n      background-color: hsla(0, 0%, 100%, 0.2);\r\n   }\r\n\r\n   .ItemProduct-isNotSelected {\r\n      cursor: pointer;\r\n      &:hover,\r\n      &:focus,\r\n      &:focus-within {\r\n         background-color: hsla(0, 0%, 100%, 0.4);\r\n         .ItemProduct-card {\r\n            border-top-left-radius: 0;\r\n            border-top-right-radius: 0;\r\n         }\r\n      }\r\n   }\r\n   .ItemProduct-isSelected {\r\n      background-color: var(--primary-color);\r\n\r\n      .ItemProduct-card {\r\n         border-top-left-radius: 0;\r\n         border-top-right-radius: 0;\r\n      }\r\n   }\r\n\r\n   .ItemProduct-isAvailable {\r\n      --available-opacity: 1;\r\n   }\r\n   .ItemProduct-isUnavailable {\r\n      --available-opacity: 0.1;\r\n   }\r\n</style>\r\n"]}]}